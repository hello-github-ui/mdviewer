"use strict";(self.webpackChunkmdviewer=self.webpackChunkmdviewer||[]).push([[8653],{28453:(e,t,n)=>{n.d(t,{R:()=>d,x:()=>c});var r=n(96540);const s={},i=r.createContext(s);function d(e){const t=r.useContext(i);return r.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function c(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:d(e.components),r.createElement(i.Provider,{value:t},e.children)}},53376:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>u,contentTitle:()=>c,default:()=>l,frontMatter:()=>d,metadata:()=>r,toc:()=>a});const r=JSON.parse('{"id":"\u8c37\u7c92\u5b66\u9662\u5728\u7ebf\u6559\u80b2\u9879\u76ee/day06/09-\u5206\u7c7b\u5217\u8868\u5c55\u793a","title":"09-\u5206\u7c7b\u5217\u8868\u5c55\u793a","description":"1\u3001\u53c2\u8003 views/tree/index.vue","source":"@site/docs/\u8c37\u7c92\u5b66\u9662\u5728\u7ebf\u6559\u80b2\u9879\u76ee/day06/09-\u5206\u7c7b\u5217\u8868\u5c55\u793a.md","sourceDirName":"\u8c37\u7c92\u5b66\u9662\u5728\u7ebf\u6559\u80b2\u9879\u76ee/day06","slug":"/\u8c37\u7c92\u5b66\u9662\u5728\u7ebf\u6559\u80b2\u9879\u76ee/day06/09-\u5206\u7c7b\u5217\u8868\u5c55\u793a","permalink":"/mdviewer/docs/\u8c37\u7c92\u5b66\u9662\u5728\u7ebf\u6559\u80b2\u9879\u76ee/day06/09-\u5206\u7c7b\u5217\u8868\u5c55\u793a","draft":false,"unlisted":false,"editUrl":"https://github.com/hello-github-ui/mdviewer/edit/master/docs/\u8c37\u7c92\u5b66\u9662\u5728\u7ebf\u6559\u80b2\u9879\u76ee/day06/09-\u5206\u7c7b\u5217\u8868\u5c55\u793a.md","tags":[{"inline":true,"label":"\u5c1a\u7845\u8c37","permalink":"/mdviewer/docs/tags/\u5c1a\u7845\u8c37"}],"version":"current","sidebarPosition":9,"frontMatter":{"id":"09-\u5206\u7c7b\u5217\u8868\u5c55\u793a","title":"09-\u5206\u7c7b\u5217\u8868\u5c55\u793a","tags":["\u5c1a\u7845\u8c37"]},"sidebar":"tutorialSidebar","previous":{"title":"08-\u8bfe\u7a0b\u5206\u7c7b\u7ba1\u7406\u63a5\u53e3","permalink":"/mdviewer/docs/\u8c37\u7c92\u5b66\u9662\u5728\u7ebf\u6559\u80b2\u9879\u76ee/day06/08-\u8bfe\u7a0b\u5206\u7c7b\u7ba1\u7406\u63a5\u53e3"},"next":{"title":"10-\u968f\u5802\u7b14\u8bb0","permalink":"/mdviewer/docs/\u8c37\u7c92\u5b66\u9662\u5728\u7ebf\u6559\u80b2\u9879\u76ee/day06/10-\u968f\u5802\u7b14\u8bb0"}}');var s=n(74848),i=n(28453);const d={id:"09-\u5206\u7c7b\u5217\u8868\u5c55\u793a",title:"09-\u5206\u7c7b\u5217\u8868\u5c55\u793a",tags:["\u5c1a\u7845\u8c37"]},c="\u4e00\u3001\u524d\u7aef\u5b9e\u73b0",u={},a=[{value:"1\u3001\u53c2\u8003 views/tree/index.vue",id:"1\u53c2\u8003-viewstreeindexvue",level:2},{value:"2\u3001\u521b\u5efaapi",id:"2\u521b\u5efaapi",level:2},{value:"3\u3001list.vue",id:"3listvue",level:2},{value:"1\u3001\u521b\u5efavo",id:"1\u521b\u5efavo",level:2},{value:"2\u3001\u521b\u5efacontroller",id:"2\u521b\u5efacontroller",level:2},{value:"3\u3001\u521b\u5efaservice",id:"3\u521b\u5efaservice",level:2}];function o(e){const t={code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.header,{children:(0,s.jsx)(t.h1,{id:"\u4e00\u524d\u7aef\u5b9e\u73b0",children:"\u4e00\u3001\u524d\u7aef\u5b9e\u73b0"})}),"\n",(0,s.jsx)(t.h2,{id:"1\u53c2\u8003-viewstreeindexvue",children:"1\u3001\u53c2\u8003 views/tree/index.vue"}),"\n",(0,s.jsx)(t.h2,{id:"2\u521b\u5efaapi",children:"2\u3001\u521b\u5efaapi"}),"\n",(0,s.jsx)(t.p,{children:"api/edu/subject.js"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{children:"import request from '@/utils/request'\n\nconst api_name = '/admin/edu/subject'\n\nexport default {\n\n  getNestedTreeList() {\n    return request({\n      url: `${api_name}`,\n      method: 'get'\n    })\n  }\n}\n"})}),"\n",(0,s.jsx)(t.h2,{id:"3listvue",children:"3\u3001list.vue"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{children:'<template>\n  <div class="app-container">\n    <el-input v-model="filterText" placeholder="Filter keyword" style="margin-bottom:30px;" />\n\n    <el-tree\n      ref="subjectTree"\n      :data="subjectList"\n      :props="defaultProps"\n      :filter-node-method="filterNode"\n      class="filter-tree"\n      default-expand-all\n    />\n\n  </div>\n</template>\n\n<script>\nimport subject from \'@/api/edu/subject\'\nexport default {\n\n  data() {\n    return {\n      filterText: \'\',\n      subjectList: [],\n      defaultProps: {\n        children: \'children\',\n        label: \'title\'\n      }\n    }\n  },\n  watch: {\n    filterText(val) {\n      this.$refs.subjectTree.filter(val)\n    }\n  },\n\n  created() {\n    this.fetchNodeList()\n  },\n\n  methods: {\n    fetchNodeList() {\n      subject.getNestedTreeList().then(response => {\n        if (response.success === true) {\n          this.subjectList = response.data.items\n        }\n      })\n    },\n    filterNode(value, data) {\n      if (!value) return true\n      return data.title.indexOf(value) !== -1\n    }\n  }\n}\n<\/script>\n'})}),"\n",(0,s.jsx)(t.h1,{id:"\u4e8c\u540e\u7aef\u5b9e\u73b0",children:"\u4e8c\u3001\u540e\u7aef\u5b9e\u73b0"}),"\n",(0,s.jsx)(t.h2,{id:"1\u521b\u5efavo",children:"1\u3001\u521b\u5efavo"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{children:"package com.guli.edu.vo;\n@Data\npublic class SubjectVo {\n\n    private String id;\n    private String title;\n}\npackage com.guli.edu.vo;\n@Data\npublic class SubjectNestedVo {\n\n    private String id;\n    private String title;\n    private List<SubjectVo> children = new ArrayList<>();\n}\n"})}),"\n",(0,s.jsx)(t.h2,{id:"2\u521b\u5efacontroller",children:"2\u3001\u521b\u5efacontroller"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{children:'@ApiOperation(value = "\u5d4c\u5957\u6570\u636e\u5217\u8868")\n@GetMapping("")\npublic R nestedList(){\n\n    List<SubjectNestedVo> subjectNestedVoList = subjectService.nestedList();\n    return R.ok().data("items", subjectNestedVoList);\n}\n'})}),"\n",(0,s.jsx)(t.h2,{id:"3\u521b\u5efaservice",children:"3\u3001\u521b\u5efaservice"}),"\n",(0,s.jsx)(t.p,{children:"\u63a5\u53e3"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{children:"List<SubjectNestedVo> nestedList();\n"})}),"\n",(0,s.jsx)(t.p,{children:"\u5b9e\u73b0Final"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{children:'@Override\npublic List<SubjectNestedVo> nestedList() {\n\n    //\u6700\u7ec8\u8981\u7684\u5230\u7684\u6570\u636e\u5217\u8868\n    ArrayList<SubjectNestedVo> subjectNestedVoArrayList = new ArrayList<>();\n\n    //\u83b7\u53d6\u4e00\u7ea7\u5206\u7c7b\u6570\u636e\u8bb0\u5f55\n    QueryWrapper<Subject> queryWrapper = new QueryWrapper<>();\n    queryWrapper.eq("parent_id", 0);\n    queryWrapper.orderByAsc("sort", "id");\n    List<Subject> subjects = baseMapper.selectList(queryWrapper);\n\n    //\u83b7\u53d6\u4e8c\u7ea7\u5206\u7c7b\u6570\u636e\u8bb0\u5f55\n    QueryWrapper<Subject> queryWrapper2 = new QueryWrapper<>();\n    queryWrapper2.ne("parent_id", 0);\n    queryWrapper2.orderByAsc("sort", "id");\n    List<Subject> subSubjects = baseMapper.selectList(queryWrapper2);\n\n    //\u586b\u5145\u4e00\u7ea7\u5206\u7c7bvo\u6570\u636e\n    int count = subjects.size();\n    for (int i = 0; i < count; i++) {\n        Subject subject = subjects.get(i);\n\n        //\u521b\u5efa\u4e00\u7ea7\u7c7b\u522bvo\u5bf9\u8c61\n        SubjectNestedVo subjectNestedVo = new SubjectNestedVo();\n        BeanUtils.copyProperties(subject, subjectNestedVo);\n        subjectNestedVoArrayList.add(subjectNestedVo);\n\n        //\u586b\u5145\u4e8c\u7ea7\u5206\u7c7bvo\u6570\u636e\n        ArrayList<SubjectVo> subjectVoArrayList = new ArrayList<>();\n        int count2 = subSubjects.size();\n        for (int j = 0; j < count2; j++) {\n\n            Subject subSubject = subSubjects.get(j);\n            if(subject.getId().equals(subSubject.getParentId())){\n\n                //\u521b\u5efa\u4e8c\u7ea7\u7c7b\u522bvo\u5bf9\u8c61\n                SubjectVo subjectVo = new SubjectVo();\n                BeanUtils.copyProperties(subSubject, subjectVo);\n                subjectVoArrayList.add(subjectVo);\n            }\n        }\n        subjectNestedVo.setChildren(subjectVoArrayList);\n    }\n\n\n    return subjectNestedVoArrayList;\n}\n'})}),"\n",(0,s.jsx)(t.h1,{id:"\u4e09\u4f18\u5316\u524d\u7aef\u8fc7\u6ee4\u529f\u80fd",children:"\u4e09\u3001\u4f18\u5316\u524d\u7aef\u8fc7\u6ee4\u529f\u80fd"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{children:"filterNode(value, data) {\n    if (!value) return true\n    return data.title.toLowerCase().indexOf(value.toLowerCase()) !== -1\n}\n"})})]})}function l(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(o,{...e})}):o(e)}}}]);