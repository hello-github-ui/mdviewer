"use strict";(self.webpackChunkmdviewer=self.webpackChunkmdviewer||[]).push([[5197],{11322:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>a,contentTitle:()=>o,default:()=>p,frontMatter:()=>c,metadata:()=>s,toc:()=>l});const s=JSON.parse('{"id":"\u8c37\u7c92\u5b66\u9662\u5728\u7ebf\u6559\u80b2\u9879\u76ee/day06/03-\u524d\u7aef\u6574\u5408\u4e0a\u4f20\u7ec4\u4ef6","title":"03-\u524d\u7aef\u6574\u5408\u4e0a\u4f20\u7ec4\u4ef6","description":"\u4e00\u3001\u524d\u7aef\u6574\u5408\u56fe\u7247\u4e0a\u4f20\u7ec4\u4ef6","source":"@site/docs/\u8c37\u7c92\u5b66\u9662\u5728\u7ebf\u6559\u80b2\u9879\u76ee/day06/03-\u524d\u7aef\u6574\u5408\u4e0a\u4f20\u7ec4\u4ef6.md","sourceDirName":"\u8c37\u7c92\u5b66\u9662\u5728\u7ebf\u6559\u80b2\u9879\u76ee/day06","slug":"/\u8c37\u7c92\u5b66\u9662\u5728\u7ebf\u6559\u80b2\u9879\u76ee/day06/03-\u524d\u7aef\u6574\u5408\u4e0a\u4f20\u7ec4\u4ef6","permalink":"/mdviewer/docs/\u8c37\u7c92\u5b66\u9662\u5728\u7ebf\u6559\u80b2\u9879\u76ee/day06/03-\u524d\u7aef\u6574\u5408\u4e0a\u4f20\u7ec4\u4ef6","draft":false,"unlisted":false,"editUrl":"https://github.com/hello-github-ui/mdviewer/edit/master/docs/\u8c37\u7c92\u5b66\u9662\u5728\u7ebf\u6559\u80b2\u9879\u76ee/day06/03-\u524d\u7aef\u6574\u5408\u4e0a\u4f20\u7ec4\u4ef6.md","tags":[{"inline":true,"label":"\u5c1a\u7845\u8c37","permalink":"/mdviewer/docs/tags/\u5c1a\u7845\u8c37"}],"version":"current","sidebarPosition":3,"frontMatter":{"id":"03-\u524d\u7aef\u6574\u5408\u4e0a\u4f20\u7ec4\u4ef6","title":"03-\u524d\u7aef\u6574\u5408\u4e0a\u4f20\u7ec4\u4ef6","tags":["\u5c1a\u7845\u8c37"]},"sidebar":"tutorialSidebar","previous":{"title":"02-\u540e\u7aef\u96c6\u6210OSS","permalink":"/mdviewer/docs/\u8c37\u7c92\u5b66\u9662\u5728\u7ebf\u6559\u80b2\u9879\u76ee/day06/02-\u540e\u7aef\u96c6\u6210OSS"},"next":{"title":"04-EasyExcel\u8bfb\u5199Excel\u7684\u57fa\u672c\u4f7f\u7528","permalink":"/mdviewer/docs/\u8c37\u7c92\u5b66\u9662\u5728\u7ebf\u6559\u80b2\u9879\u76ee/day06/04-EasyExcel\u8bfb\u5199Excel\u7684\u57fa\u672c\u4f7f\u7528"}}');var t=r(74848),i=r(28453);const c={id:"03-\u524d\u7aef\u6574\u5408\u4e0a\u4f20\u7ec4\u4ef6",title:"03-\u524d\u7aef\u6574\u5408\u4e0a\u4f20\u7ec4\u4ef6",tags:["\u5c1a\u7845\u8c37"]},o=void 0,a={},l=[{value:"1\u3001\u590d\u5236\u5934\u50cf\u4e0a\u4f20\u7ec4\u4ef6",id:"1\u590d\u5236\u5934\u50cf\u4e0a\u4f20\u7ec4\u4ef6",level:2},{value:"2\u3001\u524d\u7aef\u53c2\u8003\u5b9e\u73b0",id:"2\u524d\u7aef\u53c2\u8003\u5b9e\u73b0",level:2},{value:"3\u3001\u524d\u7aef\u6dfb\u52a0\u6587\u4ef6\u4e0a\u4f20\u7ec4\u4ef6",id:"3\u524d\u7aef\u6dfb\u52a0\u6587\u4ef6\u4e0a\u4f20\u7ec4\u4ef6",level:2},{value:"4\u3001\u8bbe\u7f6e\u9ed8\u8ba4\u5934\u50cf",id:"4\u8bbe\u7f6e\u9ed8\u8ba4\u5934\u50cf",level:2},{value:"5\u3001js\u811a\u672c\u5b9e\u73b0\u4e0a\u4f20\u548c\u56fe\u7247\u56de\u663e",id:"5js\u811a\u672c\u5b9e\u73b0\u4e0a\u4f20\u548c\u56fe\u7247\u56de\u663e",level:2}];function d(e){const n={code:"code",h1:"h1",h2:"h2",p:"p",pre:"pre",strong:"strong",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"\u4e00\u3001\u524d\u7aef\u6574\u5408\u56fe\u7247\u4e0a\u4f20\u7ec4\u4ef6"})}),"\n",(0,t.jsx)(n.h2,{id:"1\u590d\u5236\u5934\u50cf\u4e0a\u4f20\u7ec4\u4ef6",children:"1\u3001\u590d\u5236\u5934\u50cf\u4e0a\u4f20\u7ec4\u4ef6"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"\u4ecevue-element-admin\u590d\u5236\u7ec4\u4ef6\uff1a"})}),"\n",(0,t.jsx)(n.p,{children:"vue-element-admin/src/components/ImageCropper"}),"\n",(0,t.jsx)(n.p,{children:"vue-element-admin/src/components/PanThumb"}),"\n",(0,t.jsx)(n.h2,{id:"2\u524d\u7aef\u53c2\u8003\u5b9e\u73b0",children:"2\u3001\u524d\u7aef\u53c2\u8003\u5b9e\u73b0"}),"\n",(0,t.jsx)(n.p,{children:"src/views/components-demo/avatarUpload.vue"}),"\n",(0,t.jsx)(n.h2,{id:"3\u524d\u7aef\u6dfb\u52a0\u6587\u4ef6\u4e0a\u4f20\u7ec4\u4ef6",children:"3\u3001\u524d\u7aef\u6dfb\u52a0\u6587\u4ef6\u4e0a\u4f20\u7ec4\u4ef6"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"src/views/edu/teacher/form.vue"})}),"\n",(0,t.jsx)(n.p,{children:"template\uff1a"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'\x3c!-- \u8bb2\u5e08\u5934\u50cf --\x3e\n<el-form-item label="\u8bb2\u5e08\u5934\u50cf">\n\n    \x3c!-- \u5934\u8854\u7f29\u7565\u56fe --\x3e\n    <pan-thumb :image="teacher.avatar"/>\n    \x3c!-- \u6587\u4ef6\u4e0a\u4f20\u6309\u94ae --\x3e\n    <el-button type="primary" icon="el-icon-upload" @click="imagecropperShow=true">\u66f4\u6362\u5934\u50cf\n    </el-button>\n\n    \x3c!--\nv-show\uff1a\u662f\u5426\u663e\u793a\u4e0a\u4f20\u7ec4\u4ef6\n:key\uff1a\u7c7b\u4f3c\u4e8eid\uff0c\u5982\u679c\u4e00\u4e2a\u9875\u9762\u591a\u4e2a\u56fe\u7247\u4e0a\u4f20\u63a7\u4ef6\uff0c\u53ef\u4ee5\u505a\u533a\u5206\n:url\uff1a\u540e\u53f0\u4e0a\u4f20\u7684url\u5730\u5740\n@close\uff1a\u5173\u95ed\u4e0a\u4f20\u7ec4\u4ef6\n@crop-upload-success\uff1a\u4e0a\u4f20\u6210\u529f\u540e\u7684\u56de\u8c03 --\x3e\n    <image-cropper\n                   v-show="imagecropperShow"\n                   :width="300"\n                   :height="300"\n                   :key="imagecropperKey"\n                   :url="BASE_API+\'/admin/oss/file/upload\'"\n                   field="file"\n                   @close="close"\n                   @crop-upload-success="cropSuccess"/>\n\n</el-form-item>\n'})}),"\n",(0,t.jsx)(n.p,{children:"\u5f15\u5165\u7ec4\u4ef6\u6a21\u5757"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"import ImageCropper from '@/components/ImageCropper'\nimport PanThumb from '@/components/PanThumb'\n"})}),"\n",(0,t.jsx)(n.h2,{id:"4\u8bbe\u7f6e\u9ed8\u8ba4\u5934\u50cf",children:"4\u3001\u8bbe\u7f6e\u9ed8\u8ba4\u5934\u50cf"}),"\n",(0,t.jsx)(n.p,{children:"config/dev.env.js\u4e2d\u6dfb\u52a0\u963f\u91cc\u4e91oss bucket\u5730\u5740"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"OSS_PATH: '\"https://guli-file.oss-cn-beijing.aliyuncs.com\"'\n"})}),"\n",(0,t.jsx)(n.p,{children:"\u7ec4\u4ef6\u4e2d\u521d\u59cb\u5316\u5934\u50cf\u9ed8\u8ba4\u5730\u5740"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"const defaultForm = {\n  ......,\n  avatar: process.env.OSS_PATH + '/avatar/default.jpg'\n}\n"})}),"\n",(0,t.jsx)(n.h2,{id:"5js\u811a\u672c\u5b9e\u73b0\u4e0a\u4f20\u548c\u56fe\u7247\u56de\u663e",children:"5\u3001js\u811a\u672c\u5b9e\u73b0\u4e0a\u4f20\u548c\u56fe\u7247\u56de\u663e"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"export default {\n  components: { ImageCropper, PanThumb },\n  data() {\n    return {\n      //\u5176\u5b83\u6570\u636e\u6a21\u578b\n      ......,\n        \n      BASE_API: process.env.BASE_API, // \u63a5\u53e3API\u5730\u5740\n      imagecropperShow: false, // \u662f\u5426\u663e\u793a\u4e0a\u4f20\u7ec4\u4ef6\n      imagecropperKey: 0 // \u4e0a\u4f20\u7ec4\u4ef6id\n    }\n  },\n    \n  ......,\n    \n  methods: {\n    //\u5176\u4ed6\u51fd\u6570\n    ......,\n\n    // \u4e0a\u4f20\u6210\u529f\u540e\u7684\u56de\u8c03\u51fd\u6570\n    cropSuccess(data) {\n      console.log(data)\n      this.imagecropperShow = false\n      this.teacher.avatar = data.url\n      // \u4e0a\u4f20\u6210\u529f\u540e\uff0c\u91cd\u65b0\u6253\u5f00\u4e0a\u4f20\u7ec4\u4ef6\u65f6\u521d\u59cb\u5316\u7ec4\u4ef6\uff0c\u5426\u5219\u663e\u793a\u4e0a\u4e00\u6b21\u7684\u4e0a\u4f20\u7ed3\u679c\n      this.imagecropperKey = this.imagecropperKey + 1\n    },\n\n    // \u5173\u95ed\u4e0a\u4f20\u7ec4\u4ef6\n    close() {\n      this.imagecropperShow = false\n      // \u4e0a\u4f20\u5931\u8d25\u540e\uff0c\u91cd\u65b0\u6253\u5f00\u4e0a\u4f20\u7ec4\u4ef6\u65f6\u521d\u59cb\u5316\u7ec4\u4ef6\uff0c\u5426\u5219\u663e\u793a\u4e0a\u4e00\u6b21\u7684\u4e0a\u4f20\u7ed3\u679c\n      this.imagecropperKey = this.imagecropperKey + 1\n    }\n  }\n}\n"})}),"\n",(0,t.jsx)(n.h1,{id:"\u4e8c\u6d4b\u8bd5\u6587\u4ef6\u4e0a\u4f20",children:"\u4e8c\u3001\u6d4b\u8bd5\u6587\u4ef6\u4e0a\u4f20"}),"\n",(0,t.jsx)(n.p,{children:"\u524d\u540e\u7aef\u8054\u8c03"})]})}function p(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},28453:(e,n,r)=>{r.d(n,{R:()=>c,x:()=>o});var s=r(96540);const t={},i=s.createContext(t);function c(e){const n=s.useContext(i);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:c(e.components),s.createElement(i.Provider,{value:n},e.children)}}}]);