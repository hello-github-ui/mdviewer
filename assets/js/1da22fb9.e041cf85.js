"use strict";(self.webpackChunkmdviewer=self.webpackChunkmdviewer||[]).push([[6246],{22491:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>o,contentTitle:()=>d,default:()=>l,frontMatter:()=>a,metadata:()=>r,toc:()=>p});const r=JSON.parse('{"id":"\u8c37\u7c92\u5b66\u9662\u5728\u7ebf\u6559\u80b2\u9879\u76ee/day08/01-\u8bfe\u7a0b\u5927\u7eb2\u5217\u8868\u663e\u793a","title":"01-\u8bfe\u7a0b\u5927\u7eb2\u5217\u8868\u663e\u793a","description":"1\u3001\u5b9a\u4e49vo","source":"@site/docs/\u8c37\u7c92\u5b66\u9662\u5728\u7ebf\u6559\u80b2\u9879\u76ee/day08/01-\u8bfe\u7a0b\u5927\u7eb2\u5217\u8868\u663e\u793a.md","sourceDirName":"\u8c37\u7c92\u5b66\u9662\u5728\u7ebf\u6559\u80b2\u9879\u76ee/day08","slug":"/\u8c37\u7c92\u5b66\u9662\u5728\u7ebf\u6559\u80b2\u9879\u76ee/day08/01-\u8bfe\u7a0b\u5927\u7eb2\u5217\u8868\u663e\u793a","permalink":"/mdviewer/docs/\u8c37\u7c92\u5b66\u9662\u5728\u7ebf\u6559\u80b2\u9879\u76ee/day08/01-\u8bfe\u7a0b\u5927\u7eb2\u5217\u8868\u663e\u793a","draft":false,"unlisted":false,"editUrl":"https://github.com/hello-github-ui/mdviewer/edit/master/docs/\u8c37\u7c92\u5b66\u9662\u5728\u7ebf\u6559\u80b2\u9879\u76ee/day08/01-\u8bfe\u7a0b\u5927\u7eb2\u5217\u8868\u663e\u793a.md","tags":[{"inline":true,"label":"\u5c1a\u7845\u8c37","permalink":"/mdviewer/docs/tags/\u5c1a\u7845\u8c37"}],"version":"current","sidebarPosition":1,"frontMatter":{"id":"01-\u8bfe\u7a0b\u5927\u7eb2\u5217\u8868\u663e\u793a","title":"01-\u8bfe\u7a0b\u5927\u7eb2\u5217\u8868\u663e\u793a","tags":["\u5c1a\u7845\u8c37"]},"sidebar":"tutorialSidebar","previous":{"title":"09-\u968f\u5802\u7b14\u8bb0","permalink":"/mdviewer/docs/\u8c37\u7c92\u5b66\u9662\u5728\u7ebf\u6559\u80b2\u9879\u76ee/day07/09-\u968f\u5802\u7b14\u8bb0"},"next":{"title":"02-\u7ae0\u8282\u7ba1\u7406\u540e\u7aef\u63a5\u53e3\u5f00\u53d1","permalink":"/mdviewer/docs/\u8c37\u7c92\u5b66\u9662\u5728\u7ebf\u6559\u80b2\u9879\u76ee/day08/02-\u7ae0\u8282\u7ba1\u7406\u540e\u7aef\u63a5\u53e3\u5f00\u53d1"}}');var i=t(74848),s=t(28453);const a={id:"01-\u8bfe\u7a0b\u5927\u7eb2\u5217\u8868\u663e\u793a",title:"01-\u8bfe\u7a0b\u5927\u7eb2\u5217\u8868\u663e\u793a",tags:["\u5c1a\u7845\u8c37"]},d="\u4e00\u3001\u540e\u7aef\u5b9e\u73b0",o={},p=[{value:"1\u3001\u5b9a\u4e49vo",id:"1\u5b9a\u4e49vo",level:2},{value:"2\u3001\u670d\u52a1\u5c42",id:"2\u670d\u52a1\u5c42",level:2},{value:"3\u3001web\u5c42",id:"3web\u5c42",level:2},{value:"4\u3001Swagger\u6d4b\u8bd5",id:"4swagger\u6d4b\u8bd5",level:2},{value:"1\u3001\u5b9a\u4e49api",id:"1\u5b9a\u4e49api",level:2},{value:"2\u3001\u5b9a\u4e49\u7ec4\u4ef6\u811a\u672c",id:"2\u5b9a\u4e49\u7ec4\u4ef6\u811a\u672c",level:2},{value:"3\u3001\u5b9a\u4e49\u7ec4\u4ef6\u6a21\u677f",id:"3\u5b9a\u4e49\u7ec4\u4ef6\u6a21\u677f",level:2},{value:"4\u3001\u5b9a\u4e49\u6837\u5f0f",id:"4\u5b9a\u4e49\u6837\u5f0f",level:2}];function c(e){const n={code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"\u4e00\u540e\u7aef\u5b9e\u73b0",children:"\u4e00\u3001\u540e\u7aef\u5b9e\u73b0"})}),"\n",(0,i.jsx)(n.h2,{id:"1\u5b9a\u4e49vo",children:"1\u3001\u5b9a\u4e49vo"}),"\n",(0,i.jsx)(n.p,{children:"ChapterVo"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'package com.guli.edu.vo;\n@ApiModel(value = "\u7ae0\u8282\u4fe1\u606f")\n@Data\npublic class ChapterVo implements Serializable {\n\n    private static final long serialVersionUID = 1L;\n\n    private String id;\n    private String title;\n    private List<VideoVo> children = new ArrayList<>();\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:"VideoVo"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'package com.guli.edu.vo;\n@ApiModel(value = "\u8bfe\u65f6\u4fe1\u606f")\n@Data\npublic class VideoVo implements Serializable {\n\n    private static final long serialVersionUID = 1L;\n\n    private String id;\n    private String title;\n    private Boolean free;\n}\n'})}),"\n",(0,i.jsx)(n.h2,{id:"2\u670d\u52a1\u5c42",children:"2\u3001\u670d\u52a1\u5c42"}),"\n",(0,i.jsx)(n.p,{children:"\u63a5\u53e3"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"package com.guli.edu.service;\npublic interface ChapterService extends IService<Chapter> {\n    List<ChapterVo> nestedList(String courseId);\n}\n"})}),"\n",(0,i.jsx)(n.p,{children:"\u5b9e\u73b0"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'package com.guli.edu.service.impl;\n\n@Service\npublic class ChapterServiceImpl extends ServiceImpl<ChapterMapper, Chapter> implements ChapterService {\n\n    @Autowired\n    private VideoService videoService;\n\n    @Override\n    public List<ChapterVo> nestedList(String courseId) {\n\n        //\u6700\u7ec8\u8981\u7684\u5230\u7684\u6570\u636e\u5217\u8868\n        ArrayList<ChapterVo> chapterVoArrayList = new ArrayList<>();\n\n        //\u83b7\u53d6\u7ae0\u8282\u4fe1\u606f\n        QueryWrapper<Chapter> queryWrapper1 = new QueryWrapper<>();\n        queryWrapper1.eq("course_id", courseId);\n        queryWrapper1.orderByAsc("sort", "id");\n        List<Chapter> chapters = baseMapper.selectList(queryWrapper1);\n\n        //\u83b7\u53d6\u8bfe\u65f6\u4fe1\u606f\n        QueryWrapper<Video> queryWrapper2 = new QueryWrapper<>();\n        queryWrapper2.eq("course_id", courseId);\n        queryWrapper2.orderByAsc("sort", "id");\n        List<Video> videos = videoService.list(queryWrapper2);\n\n        //\u586b\u5145\u7ae0\u8282vo\u6570\u636e\n        int count1 = chapters.size();\n        for (int i = 0; i < count1; i++) {\n            Chapter chapter = chapters.get(i);\n\n            //\u521b\u5efa\u7ae0\u8282vo\u5bf9\u8c61\n            ChapterVo chapterVo = new ChapterVo();\n            BeanUtils.copyProperties(chapter, chapterVo);\n            chapterVoArrayList.add(chapterVo);\n\n            //\u586b\u5145\u8bfe\u65f6vo\u6570\u636e\n            ArrayList<VideoVo> videoVoArrayList = new ArrayList<>();\n            int count2 = videos.size();\n            for (int j = 0; j < count2; j++) {\n\n                Video video = videos.get(j);\n                if(chapter.getId().equals(video.getChapterId())){\n\n                    //\u521b\u5efa\u8bfe\u65f6vo\u5bf9\u8c61\n                    VideoVo videoVo = new VideoVo();\n                    BeanUtils.copyProperties(video, videoVo);\n                    videoVoArrayList.add(videoVo);\n                }\n            }\n            chapterVo.setChildren(videoVoArrayList);\n        }\n\n        return chapterVoArrayList;\n    }\n}\n'})}),"\n",(0,i.jsx)(n.h2,{id:"3web\u5c42",children:"3\u3001web\u5c42"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'package com.guli.edu.controller.admin;\n\n@Api(description="\u8bfe\u7a0b\u7ae0\u8282\u7ba1\u7406")\n@CrossOrigin //\u8de8\u57df\n@RestController\n@RequestMapping("/admin/edu/chapter")\npublic class ChapterAdminController {\n\n    @Autowired\n    private ChapterService chapterService;\n    \n    @ApiOperation(value = "\u5d4c\u5957\u7ae0\u8282\u6570\u636e\u5217\u8868")\n    @GetMapping("nested-list/{courseId}")\n    public R nestedListByCourseId(\n            @ApiParam(name = "courseId", value = "\u8bfe\u7a0bID", required = true)\n            @PathVariable String courseId){\n\n        List<ChapterVo> chapterVoList = chapterService.nestedList(courseId);\n        return R.ok().data("items", chapterVoList);\n    }\n}\n'})}),"\n",(0,i.jsx)(n.h2,{id:"4swagger\u6d4b\u8bd5",children:"4\u3001Swagger\u6d4b\u8bd5"}),"\n",(0,i.jsx)(n.h1,{id:"\u4e8c\u524d\u7aef\u5b9e\u73b0",children:"\u4e8c\u3001\u524d\u7aef\u5b9e\u73b0"}),"\n",(0,i.jsx)(n.h2,{id:"1\u5b9a\u4e49api",children:"1\u3001\u5b9a\u4e49api"}),"\n",(0,i.jsx)(n.p,{children:"chapter.js"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"import request from '@/utils/request'\n\nconst api_name = '/admin/edu/chapter'\n\nexport default {\n\n  getNestedTreeList(courseId) {\n    return request({\n      url: `${api_name}/nested-list/${courseId}`,\n      method: 'get'\n    })\n  }\n}\n"})}),"\n",(0,i.jsx)(n.h2,{id:"2\u5b9a\u4e49\u7ec4\u4ef6\u811a\u672c",children:"2\u3001\u5b9a\u4e49\u7ec4\u4ef6\u811a\u672c"}),"\n",(0,i.jsx)(n.p,{children:"\u5b9a\u4e49data"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"courseId: '', // \u6240\u5c5e\u8bfe\u7a0b\nchapterNestedList: [] // \u7ae0\u8282\u5d4c\u5957\u8bfe\u65f6\u5217\u8868\n"})}),"\n",(0,i.jsx)(n.p,{children:"created\u4e2d\u8c03\u7528init\u65b9\u6cd5"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"created() {\n    console.log('chapter created')\n    this.init()\n},\n"})}),"\n",(0,i.jsx)(n.p,{children:"\u5b9a\u4e49\u76f8\u5173methods\u83b7\u53d6\u7ae0\u8282\u548c\u8bfe\u65f6\u5217\u8868"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"init() {\n  if (this.$route.params && this.$route.params.id) {\n    this.courseId = this.$route.params.id\n    // \u6839\u636eid\u83b7\u53d6\u8bfe\u7a0b\u57fa\u672c\u4fe1\u606f\n    this.fetchChapterNestedListByCourseId()\n  }\n},\n\nfetchChapterNestedListByCourseId() {\n  chapter.getNestedTreeList(this.courseId).then(response => {\n    this.chapterNestedList = response.data.items\n  })\n},\n"})}),"\n",(0,i.jsx)(n.h2,{id:"3\u5b9a\u4e49\u7ec4\u4ef6\u6a21\u677f",children:"3\u3001\u5b9a\u4e49\u7ec4\u4ef6\u6a21\u677f"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'<el-button type="text">\u6dfb\u52a0\u7ae0\u8282</el-button>\n\x3c!-- \u7ae0\u8282 --\x3e\n<ul class="chanpterList">\n    <li\n        v-for="chapter in chapterNestedList"\n        :key="chapter.id">\n        <p>\n            {{ chapter.title }}\n\n            <span class="acts">\n                <el-button type="text">\u6dfb\u52a0\u8bfe\u65f6</el-button>\n                <el-button style="" type="text">\u7f16\u8f91</el-button>\n                <el-button type="text">\u5220\u9664</el-button>\n            </span>\n        </p>\n\n        \x3c!-- \u89c6\u9891 --\x3e\n        <ul class="chanpterList videoList">\n            <li\n                v-for="video in chapter.children"\n                :key="video.id">\n                <p>{{ video.title }}\n                    <span class="acts">\n                        <el-button type="text">\u7f16\u8f91</el-button>\n                        <el-button type="text">\u5220\u9664</el-button>\n                    </span>\n                </p>\n            </li>\n        </ul>\n    </li>\n</ul>\n<div>\n    <el-button @click="previous">\u4e0a\u4e00\u6b65</el-button>\n    <el-button :disabled="saveBtnDisabled" type="primary" @click="next">\u4e0b\u4e00\u6b65</el-button>\n</div>\n'})}),"\n",(0,i.jsx)(n.h2,{id:"4\u5b9a\u4e49\u6837\u5f0f",children:"4\u3001\u5b9a\u4e49\u6837\u5f0f"}),"\n",(0,i.jsx)(n.p,{children:"\u5c06\u6837\u5f0f\u7684\u5b9a\u4e49\u653e\u5728\u9875\u9762\u7684\u6700\u540e"}),"\n",(0,i.jsx)(n.p,{children:"scope\u8868\u793a\u8fd9\u91cc\u5b9a\u4e49\u7684\u6837\u5f0f\u53ea\u5728\u5f53\u524d\u9875\u9762\u8303\u56f4\u5185\u751f\u6548\uff0c\u4e0d\u4f1a\u6c61\u67d3\u5230\u5176\u4ed6\u7684\u9875\u9762"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"<style scoped>\n.chanpterList{\n    position: relative;\n    list-style: none;\n    margin: 0;\n    padding: 0;\n}\n.chanpterList li{\n  position: relative;\n}\n.chanpterList p{\n  float: left;\n  font-size: 20px;\n  margin: 10px 0;\n  padding: 10px;\n  height: 70px;\n  line-height: 50px;\n  width: 100%;\n  border: 1px solid #DDD;\n}\n.chanpterList .acts {\n    float: right;\n    font-size: 14px;\n}\n\n.videoList{\n  padding-left: 50px;\n}\n.videoList p{\n  float: left;\n  font-size: 14px;\n  margin: 10px 0;\n  padding: 10px;\n  height: 50px;\n  line-height: 30px;\n  width: 100%;\n  border: 1px dotted #DDD;\n}\n\n</style>\n"})})]})}function l(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>a,x:()=>d});var r=t(96540);const i={},s=r.createContext(i);function a(e){const n=r.useContext(s);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),r.createElement(s.Provider,{value:n},e.children)}}}]);