"use strict";(self.webpackChunkmdviewer=self.webpackChunkmdviewer||[]).push([[4692],{10256:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>o,contentTitle:()=>c,default:()=>u,frontMatter:()=>a,metadata:()=>r,toc:()=>l});const r=JSON.parse('{"id":"\u8c37\u7c92\u5b66\u9662\u5728\u7ebf\u6559\u80b2\u9879\u76ee/day14/05-\u8bfe\u7a0b\u5217\u8868\u9875\u9762","title":"05-\u8bfe\u7a0b\u5217\u8868\u9875\u9762","description":"1\u3001\u8bfe\u7a0b\u5217\u8868","source":"@site/docs/\u8c37\u7c92\u5b66\u9662\u5728\u7ebf\u6559\u80b2\u9879\u76ee/day14/05-\u8bfe\u7a0b\u5217\u8868\u9875\u9762.md","sourceDirName":"\u8c37\u7c92\u5b66\u9662\u5728\u7ebf\u6559\u80b2\u9879\u76ee/day14","slug":"/\u8c37\u7c92\u5b66\u9662\u5728\u7ebf\u6559\u80b2\u9879\u76ee/day14/05-\u8bfe\u7a0b\u5217\u8868\u9875\u9762","permalink":"/mdviewer/docs/\u8c37\u7c92\u5b66\u9662\u5728\u7ebf\u6559\u80b2\u9879\u76ee/day14/05-\u8bfe\u7a0b\u5217\u8868\u9875\u9762","draft":false,"unlisted":false,"editUrl":"https://github.com/hello-github-ui/mdviewer/edit/master/docs/\u8c37\u7c92\u5b66\u9662\u5728\u7ebf\u6559\u80b2\u9879\u76ee/day14/05-\u8bfe\u7a0b\u5217\u8868\u9875\u9762.md","tags":[{"inline":true,"label":"\u5c1a\u7845\u8c37","permalink":"/mdviewer/docs/tags/\u5c1a\u7845\u8c37"}],"version":"current","sidebarPosition":5,"frontMatter":{"id":"05-\u8bfe\u7a0b\u5217\u8868\u9875\u9762","title":"05-\u8bfe\u7a0b\u5217\u8868\u9875\u9762","tags":["\u5c1a\u7845\u8c37"]},"sidebar":"tutorialSidebar","previous":{"title":"04-\u8bfe\u7a0b\u9875\u9762\u9759\u6001\u6548\u679c\u6574\u5408","permalink":"/mdviewer/docs/\u8c37\u7c92\u5b66\u9662\u5728\u7ebf\u6559\u80b2\u9879\u76ee/day14/04-\u8bfe\u7a0b\u9875\u9762\u9759\u6001\u6548\u679c\u6574\u5408"},"next":{"title":"06-\u8bfe\u7a0b\u8be6\u60c5\u9875","permalink":"/mdviewer/docs/\u8c37\u7c92\u5b66\u9662\u5728\u7ebf\u6559\u80b2\u9879\u76ee/day14/06-\u8bfe\u7a0b\u8be6\u60c5\u9875"}}');var i=t(74848),s=t(28453);const a={id:"05-\u8bfe\u7a0b\u5217\u8868\u9875\u9762",title:"05-\u8bfe\u7a0b\u5217\u8868\u9875\u9762",tags:["\u5c1a\u7845\u8c37"]},c="\u4e00\u3001\u8bfe\u7a0b\u540e\u7aef\u63a5\u53e3",o={},l=[{value:"1\u3001\u8bfe\u7a0b\u5217\u8868",id:"1\u8bfe\u7a0b\u5217\u8868",level:2},{value:"\uff082\uff09\u8bfe\u7a0b\u5217\u8868controller",id:"2\u8bfe\u7a0b\u5217\u8868controller",level:2},{value:"\uff083\uff09\u8bfe\u7a0b\u5217\u8868service",id:"3\u8bfe\u7a0b\u5217\u8868service",level:2},{value:"1\u3001\u5b9a\u4e49api",id:"1\u5b9a\u4e49api",level:2},{value:"2\u3001\u9875\u9762\u8c03\u7528\u63a5\u53e3",id:"2\u9875\u9762\u8c03\u7528\u63a5\u53e3",level:2},{value:"1\u3001\u8bfe\u7a0b\u7c7b\u522b\u663e\u793a",id:"1\u8bfe\u7a0b\u7c7b\u522b\u663e\u793a",level:2},{value:"2\u3001\u6392\u5e8f\u65b9\u5f0f\u663e\u793a",id:"2\u6392\u5e8f\u65b9\u5f0f\u663e\u793a",level:2},{value:"3\u3001\u65e0\u6570\u636e\u63d0\u793a",id:"3\u65e0\u6570\u636e\u63d0\u793a",level:2},{value:"4\u3001\u5217\u8868",id:"4\u5217\u8868",level:2},{value:"5\u3001\u5206\u9875\u9875\u9762\u6e32\u67d3",id:"5\u5206\u9875\u9875\u9762\u6e32\u67d3",level:2}];function d(e){const n={code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"\u4e00\u8bfe\u7a0b\u540e\u7aef\u63a5\u53e3",children:"\u4e00\u3001\u8bfe\u7a0b\u540e\u7aef\u63a5\u53e3"})}),"\n",(0,i.jsx)(n.h2,{id:"1\u8bfe\u7a0b\u5217\u8868",children:"1\u3001\u8bfe\u7a0b\u5217\u8868"}),"\n",(0,i.jsx)(n.p,{children:"\uff081\uff09\u8bfe\u7a0b\u5217\u8868vo\u7c7b"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'@ApiModel(value = "\u8bfe\u7a0b\u67e5\u8be2\u5bf9\u8c61", description = "\u8bfe\u7a0b\u67e5\u8be2\u5bf9\u8c61\u5c01\u88c5")\n@Data\npublic class CourseQueryVo implements Serializable {\n    private static final long serialVersionUID = 1L;\n\n    @ApiModelProperty(value = "\u8bfe\u7a0b\u540d\u79f0")\n    private String title;\n\n    @ApiModelProperty(value = "\u8bb2\u5e08id")\n    private String teacherId;\n\n    @ApiModelProperty(value = "\u4e00\u7ea7\u7c7b\u522bid")\n    private String subjectParentId;\n\n    @ApiModelProperty(value = "\u4e8c\u7ea7\u7c7b\u522bid")\n    private String subjectId;\n\n    @ApiModelProperty(value = "\u9500\u91cf\u6392\u5e8f")\n    private String buyCountSort;\n\n    @ApiModelProperty(value = "\u6700\u65b0\u65f6\u95f4\u6392\u5e8f")\n    private String gmtCreateSort;\n\n    @ApiModelProperty(value = "\u4ef7\u683c\u6392\u5e8f")\n    private String priceSort;\n}\n'})}),"\n",(0,i.jsx)(n.h2,{id:"2\u8bfe\u7a0b\u5217\u8868controller",children:"\uff082\uff09\u8bfe\u7a0b\u5217\u8868controller"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'@ApiOperation(value = "\u5206\u9875\u8bfe\u7a0b\u5217\u8868")\n@PostMapping(value = "{page}/{limit}")\npublic R pageList(\n        @ApiParam(name = "page", value = "\u5f53\u524d\u9875\u7801", required = true)\n        @PathVariable Long page,\n\n        @ApiParam(name = "limit", value = "\u6bcf\u9875\u8bb0\u5f55\u6570", required = true)\n        @PathVariable Long limit,\n\n        @ApiParam(name = "courseQuery", value = "\u67e5\u8be2\u5bf9\u8c61", required = false)\n                @RequestBody(required = false) CourseQueryVo courseQuery){\n    Page<EduCourse> pageParam = new Page<EduCourse>(page, limit);\n    Map<String, Object> map = courseService.pageListWeb(pageParam, courseQuery);\n    return  R.ok().data(map);\n}\n'})}),"\n",(0,i.jsx)(n.h2,{id:"3\u8bfe\u7a0b\u5217\u8868service",children:"\uff083\uff09\u8bfe\u7a0b\u5217\u8868service"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'@Override\npublic Map<String, Object> pageListWeb(Page<EduCourse> pageParam, CourseQueryVo courseQuery) {\n        QueryWrapper<EduCourse> queryWrapper = new QueryWrapper<>();\n        if (!StringUtils.isEmpty(courseQuery.getSubjectParentId())) {\n            queryWrapper.eq("subject_parent_id", courseQuery.getSubjectParentId());\n        }\n\n        if (!StringUtils.isEmpty(courseQuery.getSubjectId())) {\n            queryWrapper.eq("subject_id", courseQuery.getSubjectId());\n        }\n\n        if (!StringUtils.isEmpty(courseQuery.getBuyCountSort())) {\n            queryWrapper.orderByDesc("buy_count");\n        }\n\n        if (!StringUtils.isEmpty(courseQuery.getGmtCreateSort())) {\n            queryWrapper.orderByDesc("gmt_create");\n        }\n\n        if (!StringUtils.isEmpty(courseQuery.getPriceSort())) {\n            queryWrapper.orderByDesc("price");\n        }\n\n        baseMapper.selectPage(pageParam, queryWrapper);\n\n        List<EduCourse> records = pageParam.getRecords();\n        long current = pageParam.getCurrent();\n        long pages = pageParam.getPages();\n        long size = pageParam.getSize();\n        long total = pageParam.getTotal();\n        boolean hasNext = pageParam.hasNext();\n        boolean hasPrevious = pageParam.hasPrevious();\n\n        Map<String, Object> map = new HashMap<String, Object>();\n        map.put("items", records);\n        map.put("current", current);\n        map.put("pages", pages);\n        map.put("size", size);\n        map.put("total", total);\n        map.put("hasNext", hasNext);\n        map.put("hasPrevious", hasPrevious);\n\n        return map;\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:"\u4e8c**\u3001\u8bfe\u7a0b\u5217\u8868\u524d\u7aef**"}),"\n",(0,i.jsx)(n.h2,{id:"1\u5b9a\u4e49api",children:"1\u3001\u5b9a\u4e49api"}),"\n",(0,i.jsx)(n.p,{children:"api/course.js"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"import request from '@/utils/request'\nexport default {\n  getPageList(page, limit, searchObj) {\n    return request({\n      url: `/eduservice/edu/course/${page}/${limit}`,\n      method: 'post',\n      data: searchObj\n    })\n  },\n  // \u83b7\u53d6\u8bfe\u7a0b\u4e8c\u7ea7\u5206\u7c7b\n  getNestedTreeList2() {\n    return request({\n      url: `/eduservice/edu/course/list2`,\n      method: 'get'\n    })\n  }\n}\n"})}),"\n",(0,i.jsx)(n.h2,{id:"2\u9875\u9762\u8c03\u7528\u63a5\u53e3",children:"2\u3001\u9875\u9762\u8c03\u7528\u63a5\u53e3"}),"\n",(0,i.jsx)(n.p,{children:"pages/course/index.vue"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'<script>\nimport course from \'@/api/course\'\n\nexport default {\n\n  data () {\n    return {\n      page:1,\n      data:{},\n      subjectNestedList: [], // \u4e00\u7ea7\u5206\u7c7b\u5217\u8868\n      subSubjectList: [], // \u4e8c\u7ea7\u5206\u7c7b\u5217\u8868\n      searchObj: {}, // \u67e5\u8be2\u8868\u5355\u5bf9\u8c61\n      oneIndex:-1,\n      twoIndex:-1,\n      buyCountSort:"",\n      gmtCreateSort:"",\n      priceSort:""\n    }\n  },\n\n  //\u52a0\u8f7d\u5b8c\u6e32\u67d3\u65f6\n  created () {\n    //\u83b7\u53d6\u8bfe\u7a0b\u5217\u8868\n    this.initCourse()\n\n    //\u83b7\u53d6\u5206\u7c7b\n    this.initSubject()\n  },\n\n  methods: {\n    //\u67e5\u8be2\u8bfe\u7a0b\u5217\u8868\n    initCourse(){\n      course.getPageList(1, 8,this.searchObj).then(response => {\n        this.data = response.data.data\n      })\n    },\n    //\u67e5\u8be2\u6240\u6709\u4e00\u7ea7\u5206\u7c7b\n    initSubject(){\n      //debugger\n      course.getNestedTreeList2().then(response => {\n        this.subjectNestedList = response.data.data.items\n      })\n    },\n    \n    //\u70b9\u51fb\u4e00\u7ea7\u5206\u7c7b\uff0c\u663e\u793a\u5bf9\u5e94\u7684\u4e8c\u7ea7\u5206\u7c7b\uff0c\u67e5\u8be2\u6570\u636e\n    searchOne(subjectParentId, index) {\n      //debugger\n      this.oneIndex = index\n      this.twoIndex = -1\n\n      this.searchObj.subjectId = "";\n      this.subSubjectList = [];\n\n      this.searchObj.subjectParentId = subjectParentId;\n      this.gotoPage(this.page)\n\n      for (let i = 0; i < this.subjectNestedList.length; i++) {\n        if (this.subjectNestedList[i].id === subjectParentId) {\n          this.subSubjectList = this.subjectNestedList[i].children\n        }\n      }\n    },\n\n    //\u70b9\u51fb\u4e8c\u7ea7\u5206\u7c7b\uff0c\u67e5\u8be2\u6570\u636e\n    searchTwo(subjectId, index) {\n      this.twoIndex = index\n      this.searchObj.subjectId = subjectId;\n      this.gotoPage(this.page)\n    },\n    //\u8d2d\u4e70\u91cf\u67e5\u8be2\n    searchBuyCount() {\n      this.buyCountSort = "1";\n      this.gmtCreateSort = "";\n      this.priceSort = "";\n      this.searchObj.buyCountSort = this.buyCountSort;\n      this.searchObj.gmtCreateSort = this.gmtCreateSort;\n      this.searchObj.priceSort = this.priceSort;\n      this.gotoPage(this.page)\n    },\n    //\u66f4\u65b0\u65f6\u95f4\u67e5\u8be2\n    searchGmtCreate() {\n      debugger\n      this.buyCountSort = "";\n      this.gmtCreateSort = "1";\n      this.priceSort = "";\n      this.searchObj.buyCountSort = this.buyCountSort;\n      this.searchObj.gmtCreateSort = this.gmtCreateSort;\n      this.searchObj.priceSort = this.priceSort;\n      this.gotoPage(this.page)\n    },\n    //\u4ef7\u683c\u67e5\u8be2\n    searchPrice() {\n      this.buyCountSort = "";\n      this.gmtCreateSort = "";\n      this.priceSort = "1";\n      this.searchObj.buyCountSort = this.buyCountSort;\n      this.searchObj.gmtCreateSort = this.gmtCreateSort;\n      this.searchObj.priceSort = this.priceSort;\n      this.gotoPage(this.page)\n    },\n    //\u5206\u9875\u67e5\u8be2\n    gotoPage(page) {\n      this.page = page\n      course.getPageList(page, 8, this.searchObj).then(response => {\n        this.data = response.data.data\n      })\n    }\n  }\n}\n<\/script>\n<style scoped>\n  .active {\n    background: #bdbdbd;\n  }\n  .hide {\n    display: none;\n  }\n  .show {\n    display: block;\n  }\n</style>\n\n'})}),"\n",(0,i.jsx)(n.h1,{id:"\u4e09\u8bfe\u7a0b\u5217\u8868\u6e32\u67d3",children:"\u4e09\u3001\u8bfe\u7a0b\u5217\u8868\u6e32\u67d3"}),"\n",(0,i.jsx)(n.h2,{id:"1\u8bfe\u7a0b\u7c7b\u522b\u663e\u793a",children:"1\u3001\u8bfe\u7a0b\u7c7b\u522b\u663e\u793a"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'<section class="c-s-dl">\n  <dl>\n    <dt>\n      <span class="c-999 fsize14">\u8bfe\u7a0b\u7c7b\u522b</span>\n    </dt>\n    <dd class="c-s-dl-li">\n      <ul class="clearfix">\n        <li>\n          <a title="\u5168\u90e8" href="javascript:void(0);" @click="searchOne(\'\')">\u5168\u90e8</a>\n        </li>\n        <li v-for="(item,index) in subjectNestedList" v-bind:key="index" :class="{active:oneIndex==index}">\n          <a :title="item.title" href="javascript:void(0);" @click="searchOne(item.id, index)">{{item.title}}</a>\n        </li>\n      </ul>\n    </dd>\n  </dl>\n  <dl>\n    <dt>\n      <span class="c-999 fsize14"/>\n    </dt>\n    <dd class="c-s-dl-li">\n      <ul class="clearfix">\n        <li v-for="(item,index) in subSubjectList" v-bind:key="index" :class="{active:twoIndex==index}">\n          <a :title="item.title" href="javascript:void(0);" @click="searchTwo(item.id, index)">{{item.title}}</a>\n        </li>\n      </ul>\n    </dd>\n  </dl>\n  <div class="clear"/>\n</section>\n'})}),"\n",(0,i.jsx)(n.h2,{id:"2\u6392\u5e8f\u65b9\u5f0f\u663e\u793a",children:"2\u3001\u6392\u5e8f\u65b9\u5f0f\u663e\u793a"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'<section class="fl">\n  <ol class="js-tap clearfix">\n    <li :class="{\'current bg-orange\':buyCountSort!=\'\'}">\n      <a title="\u9500\u91cf" href="javascript:void(0);" @click="searchBuyCount()">\u9500\u91cf\n      <span :class="{hide:buyCountSort==\'\'}">\u2193</span>\n      </a>\n    </li>\n    <li :class="{\'current bg-orange\':gmtCreateSort!=\'\'}">\n      <a title="\u6700\u65b0" href="javascript:void(0);" @click="searchGmtCreate()">\u6700\u65b0\n      <span :class="{hide:gmtCreateSort==\'\'}">\u2193</span>\n      </a>\n    </li>\n    <li :class="{\'current bg-orange\':priceSort!=\'\'}">\n      <a title="\u4ef7\u683c" href="javascript:void(0);" @click="searchPrice()">\u4ef7\u683c&nbsp;\n        <span :class="{hide:priceSort==\'\'}">\u2193</span>\n      </a>\n    </li>\n  </ol>\n</section>\n'})}),"\n",(0,i.jsx)(n.h2,{id:"3\u65e0\u6570\u636e\u63d0\u793a",children:"3\u3001\u65e0\u6570\u636e\u63d0\u793a"}),"\n",(0,i.jsx)(n.p,{children:'\u6dfb\u52a0\uff1av-if="data.total==0"'}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'\x3c!-- /\u65e0\u6570\u636e\u63d0\u793a \u5f00\u59cb--\x3e\n<section class="no-data-wrap" v-if="data.total==0">\n    <em class="icon30 no-data-ico">&nbsp;</em>\n    <span class="c-666 fsize14 ml10 vam">\u6ca1\u6709\u76f8\u5173\u6570\u636e\uff0c\u5c0f\u7f16\u6b63\u5728\u52aa\u529b\u6574\u7406\u4e2d...</span>\n</section>\n\x3c!-- /\u65e0\u6570\u636e\u63d0\u793a \u7ed3\u675f--\x3e\n'})}),"\n",(0,i.jsx)(n.h2,{id:"4\u5217\u8868",children:"4\u3001\u5217\u8868"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'\x3c!-- \u6570\u636e\u5217\u8868 \u5f00\u59cb--\x3e\n<article v-if="data.total>0" class="comm-course-list">\n    <ul id="bna" class="of">\n        <li v-for="item in data.items" :key="item.id">\n            <div class="cc-l-wrap">\n                <section class="course-img">\n                    <img :src="item.cover" class="img-responsive" alt="\u542c\u529b\u53e3\u8bed">\n                    <div class="cc-mask">\n                        <a :href="\'/course/\'+item.id" title="\u5f00\u59cb\u5b66\u4e60" class="comm-btn c-btn-1">\u5f00\u59cb\u5b66\u4e60</a>\n                    </div>\n                </section>\n                <h3 class="hLh30 txtOf mt10">\n                    <a :href="\'/course/\'+item.id" :title="item.title" class="course-title fsize18 c-333">{{ item.title }}</a>\n                </h3>\n                <section class="mt10 hLh20 of">\n                    <span v-if="Number(item.price) === 0" class="fr jgTag bg-green">\n                        <i class="c-fff fsize12 f-fA">\u514d\u8d39</i>\n                    </span>\n                    <span class="fl jgAttr c-ccc f-fA">\n                        <i class="c-999 f-fA">{{ item.viewCount }}\u4eba\u5b66\u4e60</i>\n                        |\n                        <i class="c-999 f-fA">9634\u8bc4\u8bba</i>\n                    </span>\n                </section>\n            </div>\n        </li>\n    </ul>\n    <div class="clear"/>\n</article>\n\x3c!-- /\u6570\u636e\u5217\u8868 \u7ed3\u675f--\x3e\n'})}),"\n",(0,i.jsx)(n.h2,{id:"5\u5206\u9875\u9875\u9762\u6e32\u67d3",children:"5\u3001\u5206\u9875\u9875\u9762\u6e32\u67d3"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'<div>\n  <div class="paging">\n    \x3c!-- undisable\u8fd9\u4e2aclass\u662f\u5426\u5b58\u5728\uff0c\u53d6\u51b3\u4e8e\u6570\u636e\u5c5e\u6027hasPrevious --\x3e\n    <a\n      :class="{undisable: !data.hasPrevious}"\n      href="#"\n      title="\u9996\u9875"\n      @click.prevent="gotoPage(1)">\u9996</a>\n    <a\n      :class="{undisable: !data.hasPrevious}"\n      href="#"\n      title="\u524d\u4e00\u9875"\n      @click.prevent="gotoPage(data.current-1)">&lt;</a>\n    <a\n      v-for="page in data.pages"\n      :key="page"\n      :class="{current: data.current == page, undisable: data.current == page}"\n      :title="\'\u7b2c\'+page+\'\u9875\'"\n      href="#"\n      @click.prevent="gotoPage(page)">{{ page }}</a>\n    <a\n      :class="{undisable: !data.hasNext}"\n      href="#"\n      title="\u540e\u4e00\u9875"\n      @click.prevent="gotoPage(data.current+1)">&gt;</a>\n    <a\n      :class="{undisable: !data.hasNext}"\n      href="#"\n      title="\u672b\u9875"\n      @click.prevent="gotoPage(data.pages)">\u672b</a>\n    <div class="clear"/>\n  </div>\n</div>\n'})})]})}function u(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>a,x:()=>c});var r=t(96540);const i={},s=r.createContext(i);function a(e){const n=r.useContext(s);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),r.createElement(s.Provider,{value:n},e.children)}}}]);