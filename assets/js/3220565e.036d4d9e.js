"use strict";(self.webpackChunkmdviewer=self.webpackChunkmdviewer||[]).push([[6841],{22826:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>d,contentTitle:()=>a,default:()=>u,frontMatter:()=>i,metadata:()=>s,toc:()=>p});const s=JSON.parse('{"id":"\u8c37\u7c92\u5b66\u9662\u5728\u7ebf\u6559\u80b2\u9879\u76ee/day01/06-MyBatisPlus\u6761\u4ef6\u6784\u9020\u5668","title":"06-MyBatisPlus\u6761\u4ef6\u6784\u9020\u5668","description":"img","source":"@site/docs/\u8c37\u7c92\u5b66\u9662\u5728\u7ebf\u6559\u80b2\u9879\u76ee/day01/06-MyBatisPlus\u6761\u4ef6\u6784\u9020\u5668.md","sourceDirName":"\u8c37\u7c92\u5b66\u9662\u5728\u7ebf\u6559\u80b2\u9879\u76ee/day01","slug":"/\u8c37\u7c92\u5b66\u9662\u5728\u7ebf\u6559\u80b2\u9879\u76ee/day01/06-MyBatisPlus\u6761\u4ef6\u6784\u9020\u5668","permalink":"/mdviewer/docs/\u8c37\u7c92\u5b66\u9662\u5728\u7ebf\u6559\u80b2\u9879\u76ee/day01/06-MyBatisPlus\u6761\u4ef6\u6784\u9020\u5668","draft":false,"unlisted":false,"editUrl":"https://github.com/hello-github-ui/mdviewer/edit/master/docs/\u8c37\u7c92\u5b66\u9662\u5728\u7ebf\u6559\u80b2\u9879\u76ee/day01/06-MyBatisPlus\u6761\u4ef6\u6784\u9020\u5668.md","tags":[{"inline":true,"label":"\u5c1a\u7845\u8c37","permalink":"/mdviewer/docs/tags/\u5c1a\u7845\u8c37"}],"version":"current","sidebarPosition":6,"frontMatter":{"id":"06-MyBatisPlus\u6761\u4ef6\u6784\u9020\u5668","title":"06-MyBatisPlus\u6761\u4ef6\u6784\u9020\u5668","tags":["\u5c1a\u7845\u8c37"]},"sidebar":"tutorialSidebar","previous":{"title":"05-MyBatisPlus\u7684CRUD\u63a5\u53e3","permalink":"/mdviewer/docs/\u8c37\u7c92\u5b66\u9662\u5728\u7ebf\u6559\u80b2\u9879\u76ee/day01/05-MyBatisPlus\u7684CRUD\u63a5\u53e3"},"next":{"title":"07-\u968f\u5802\u7b14\u8bb0","permalink":"/mdviewer/docs/\u8c37\u7c92\u5b66\u9662\u5728\u7ebf\u6559\u80b2\u9879\u76ee/day01/07-\u968f\u5802\u7b14\u8bb0"}}');var t=r(74848),l=r(28453);const i={id:"06-MyBatisPlus\u6761\u4ef6\u6784\u9020\u5668",title:"06-MyBatisPlus\u6761\u4ef6\u6784\u9020\u5668",tags:["\u5c1a\u7845\u8c37"]},a="\u4e00\u3001wapper\u4ecb\u7ecd",d={},p=[{value:"<strong>1\u3001ge\u3001gt\u3001le\u3001lt\u3001isNull\u3001isNotNull</strong>",id:"1gegtleltisnullisnotnull",level:2},{value:"<strong>2\u3001eq\u3001ne</strong>",id:"2eqne",level:2},{value:"<strong>3\u3001between\u3001notBetween</strong>",id:"3betweennotbetween",level:2},{value:"<strong>4\u3001allEq</strong>",id:"4alleq",level:2},{value:"<strong>5\u3001like\u3001notLike\u3001likeLeft\u3001likeRight</strong>",id:"5likenotlikelikeleftlikeright",level:2},{value:"<strong>6\u3001in\u3001notIn\u3001inSql\u3001notinSql\u3001exists\u3001notExists</strong>",id:"6innotininsqlnotinsqlexistsnotexists",level:2},{value:"<strong>7\u3001or\u3001and</strong>",id:"7orand",level:2},{value:"<strong>8\u3001\u5d4c\u5957or\u3001\u5d4c\u5957and</strong>",id:"8\u5d4c\u5957or\u5d4c\u5957and",level:2},{value:"<strong>9\u3001orderBy\u3001orderByDesc\u3001orderByAsc</strong>",id:"9orderbyorderbydescorderbyasc",level:2},{value:"<strong>10\u3001last</strong>",id:"10last",level:2},{value:"**11\u3001**\u6307\u5b9a\u8981\u67e5\u8be2\u7684\u5217",id:"11\u6307\u5b9a\u8981\u67e5\u8be2\u7684\u5217",level:2},{value:"<strong>12\u3001set\u3001setSql</strong>",id:"12setsetsql",level:2}];function c(e){const n={code:"code",h1:"h1",h2:"h2",header:"header",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"\u4e00wapper\u4ecb\u7ecd",children:(0,t.jsx)(n.strong,{children:"\u4e00\u3001wapper\u4ecb\u7ecd"})})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"img",src:r(70226).A+"",width:"915",height:"386"})}),"\n",(0,t.jsx)(n.p,{children:"Wrapper \uff1a \u6761\u4ef6\u6784\u9020\u62bd\u8c61\u7c7b\uff0c\u6700\u9876\u7aef\u7236\u7c7b"}),"\n",(0,t.jsx)(n.p,{children:"AbstractWrapper \uff1a \u7528\u4e8e\u67e5\u8be2\u6761\u4ef6\u5c01\u88c5\uff0c\u751f\u6210 sql \u7684 where \u6761\u4ef6"}),"\n",(0,t.jsx)(n.p,{children:"QueryWrapper \uff1a Entity \u5bf9\u8c61\u5c01\u88c5\u64cd\u4f5c\u7c7b\uff0c\u4e0d\u662f\u7528lambda\u8bed\u6cd5"}),"\n",(0,t.jsx)(n.p,{children:"UpdateWrapper \uff1a Update \u6761\u4ef6\u5c01\u88c5\uff0c\u7528\u4e8eEntity\u5bf9\u8c61\u66f4\u65b0\u64cd\u4f5c"}),"\n",(0,t.jsx)(n.p,{children:"AbstractLambdaWrapper \uff1a Lambda \u8bed\u6cd5\u4f7f\u7528 Wrapper\u7edf\u4e00\u5904\u7406\u89e3\u6790 lambda \u83b7\u53d6 column\u3002"}),"\n",(0,t.jsx)(n.p,{children:"LambdaQueryWrapper \uff1a\u770b\u540d\u79f0\u4e5f\u80fd\u660e\u767d\u5c31\u662f\u7528\u4e8eLambda\u8bed\u6cd5\u4f7f\u7528\u7684\u67e5\u8be2Wrapper"}),"\n",(0,t.jsx)(n.p,{children:"LambdaUpdateWrapper \uff1a Lambda \u66f4\u65b0\u5c01\u88c5Wrapper"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"@RunWith(SpringRunner.class)\n@SpringBootTest\npublic class QueryWrapperTests {\n    \n    @Autowired\n    private UserMapper userMapper;\n}\n"})}),"\n",(0,t.jsx)(n.h1,{id:"\u4e8cabstractwrapper",children:"\u4e8c\u3001AbstractWrapper"}),"\n",(0,t.jsxs)(n.p,{children:["**\n****\u6ce8\u610f\uff1a**\u4ee5\u4e0b\u6761\u4ef6\u6784\u9020\u5668\u7684\u65b9\u6cd5\u5165\u53c2\u4e2d\u7684 ",(0,t.jsx)(n.code,{children:"column "}),"\u5747\u8868\u793a\u6570\u636e\u5e93\u5b57\u6bb5"]}),"\n",(0,t.jsx)(n.h2,{id:"1gegtleltisnullisnotnull",children:(0,t.jsx)(n.strong,{children:"1\u3001ge\u3001gt\u3001le\u3001lt\u3001isNull\u3001isNotNull"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'@Test\npublic void testDelete() {\n\n    QueryWrapper<User> queryWrapper = new QueryWrapper<>();\n    queryWrapper\n        .isNull("name")\n        .ge("age", 12)\n        .isNotNull("email");\n    int result = userMapper.delete(queryWrapper);\n    System.out.println("delete return count = " + result);\n}\n'})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:"UPDATE user SET deleted=1 WHERE deleted=0 AND name IS NULL AND age >= ? AND email IS NOT NULL\n"})}),"\n",(0,t.jsx)(n.h2,{id:"2eqne",children:(0,t.jsx)(n.strong,{children:"2\u3001eq\u3001ne"})}),"\n",(0,t.jsx)(n.p,{children:"**\u6ce8\u610f\uff1a**seletOne\u8fd4\u56de\u7684\u662f\u4e00\u6761\u5b9e\u4f53\u8bb0\u5f55\uff0c\u5f53\u51fa\u73b0\u591a\u6761\u65f6\u4f1a\u62a5\u9519"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'@Test\npublic void testSelectOne() {\n\n    QueryWrapper<User> queryWrapper = new QueryWrapper<>();\n    queryWrapper.eq("name", "Tom");\n\n    User user = userMapper.selectOne(queryWrapper);\n    System.out.println(user);\n}\n'})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:"SELECT id,name,age,email,create_time,update_time,deleted,version FROM user WHERE deleted=0 AND name = ? \n"})}),"\n",(0,t.jsx)(n.h2,{id:"3betweennotbetween",children:(0,t.jsx)(n.strong,{children:"3\u3001between\u3001notBetween"})}),"\n",(0,t.jsx)(n.p,{children:"\u5305\u542b\u5927\u5c0f\u8fb9\u754c"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'@Test\npublic void testSelectCount() {\n\n    QueryWrapper<User> queryWrapper = new QueryWrapper<>();\n    queryWrapper.between("age", 20, 30);\n\n    Integer count = userMapper.selectCount(queryWrapper);\n    System.out.println(count);\n}\n'})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:"SELECT COUNT(1) FROM user WHERE deleted=0 AND age BETWEEN ? AND ? \n"})}),"\n",(0,t.jsx)(n.h2,{id:"4alleq",children:(0,t.jsx)(n.strong,{children:"4\u3001allEq"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'@Test\npublic void testSelectList() {\n\n    QueryWrapper<User> queryWrapper = new QueryWrapper<>();\n    Map<String, Object> map = new HashMap<>();\n    map.put("id", 2);\n    map.put("name", "Jack");\n    map.put("age", 20);\n\n    queryWrapper.allEq(map);\n    List<User> users = userMapper.selectList(queryWrapper);\n\n    users.forEach(System.out::println);\n}\n'})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:"SELECT id,name,age,email,create_time,update_time,deleted,version \n\nFROM user WHERE deleted=0 AND name = ? AND id = ? AND age = ? \n"})}),"\n",(0,t.jsx)(n.h2,{id:"5likenotlikelikeleftlikeright",children:(0,t.jsx)(n.strong,{children:"5\u3001like\u3001notLike\u3001likeLeft\u3001likeRight"})}),"\n",(0,t.jsx)(n.p,{children:"selectMaps\u8fd4\u56deMap\u96c6\u5408\u5217\u8868"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'@Test\npublic void testSelectMaps() {\n\n    QueryWrapper<User> queryWrapper = new QueryWrapper<>();\n    queryWrapper\n        .notLike("name", "e")\n        .likeRight("email", "t");\n\n    List<Map<String, Object>> maps = userMapper.selectMaps(queryWrapper);//\u8fd4\u56de\u503c\u662fMap\u5217\u8868\n    maps.forEach(System.out::println);\n}\n'})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:"SELECT id,name,age,email,create_time,update_time,deleted,version \n\nFROM user WHERE deleted=0 AND name NOT LIKE ? AND email LIKE ? \n"})}),"\n",(0,t.jsx)(n.h2,{id:"6innotininsqlnotinsqlexistsnotexists",children:(0,t.jsx)(n.strong,{children:"6\u3001in\u3001notIn\u3001inSql\u3001notinSql\u3001exists\u3001notExists"})}),"\n",(0,t.jsx)(n.p,{children:"in\u3001notIn\uff1a"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'notIn("age",{1,2,3})---\x3eage not in (1,2,3)notIn("age", 1, 2, 3)---\x3eage not in (1,2,3)\n'})}),"\n",(0,t.jsx)(n.p,{children:"inSql\u3001notinSql\uff1a\u53ef\u4ee5\u5b9e\u73b0\u5b50\u67e5\u8be2"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\u4f8b: ",(0,t.jsx)(n.code,{children:'inSql("age", "1,2,3,4,5,6")'}),"---\x3e",(0,t.jsx)(n.code,{children:"age in (1,2,3,4,5,6)"})]}),"\n",(0,t.jsxs)(n.li,{children:["\u4f8b: ",(0,t.jsx)(n.code,{children:'inSql("id", "select id from table where id < 3")'}),"---\x3e",(0,t.jsx)(n.code,{children:"id in (select id from table where id < 3)"})]}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'@Test\npublic void testSelectObjs() {\n\n    QueryWrapper<User> queryWrapper = new QueryWrapper<>();\n    //queryWrapper.in("id", 1, 2, 3);\n    queryWrapper.inSql("id", "select id from user where id < 3");\n\n    List<Object> objects = userMapper.selectObjs(queryWrapper);//\u8fd4\u56de\u503c\u662fObject\u5217\u8868\n    objects.forEach(System.out::println);\n}\n'})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:"SELECT id,name,age,email,create_time,update_time,deleted,version \n\nFROM user WHERE deleted=0 AND id IN (select id from user where id < 3) \n"})}),"\n",(0,t.jsx)(n.h2,{id:"7orand",children:(0,t.jsx)(n.strong,{children:"7\u3001or\u3001and"})}),"\n",(0,t.jsx)(n.p,{children:"**\u6ce8\u610f\uff1a**\u8fd9\u91cc\u4f7f\u7528\u7684\u662f UpdateWrapper"}),"\n",(0,t.jsxs)(n.p,{children:["\u4e0d\u8c03\u7528",(0,t.jsx)(n.code,{children:"or"}),"\u5219\u9ed8\u8ba4\u4e3a\u4f7f\u7528 ",(0,t.jsx)(n.code,{children:"and "}),"\u8fde"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'@Test\npublic void testUpdate1() {\n\n    //\u4fee\u6539\u503c\n    User user = new User();\n    user.setAge(99);\n    user.setName("Andy");\n\n    //\u4fee\u6539\u6761\u4ef6\n    UpdateWrapper<User> userUpdateWrapper = new UpdateWrapper<>();\n    userUpdateWrapper\n        .like("name", "h")\n        .or()\n        .between("age", 20, 30);\n\n    int result = userMapper.update(user, userUpdateWrapper);\n\n    System.out.println(result);\n}\n'})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:"UPDATE user SET name=?, age=?, update_time=? WHERE deleted=0 AND name LIKE ? OR age BETWEEN ? AND ?\n"})}),"\n",(0,t.jsx)(n.h2,{id:"8\u5d4c\u5957or\u5d4c\u5957and",children:(0,t.jsx)(n.strong,{children:"8\u3001\u5d4c\u5957or\u3001\u5d4c\u5957and"})}),"\n",(0,t.jsx)(n.p,{children:"\u8fd9\u91cc\u4f7f\u7528\u4e86lambda\u8868\u8fbe\u5f0f\uff0cor\u4e2d\u7684\u8868\u8fbe\u5f0f\u6700\u540e\u7ffb\u8bd1\u6210sql\u65f6\u4f1a\u88ab\u52a0\u4e0a\u5706\u62ec\u53f7"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'@Test\npublic void testUpdate2() {\n\n\n    //\u4fee\u6539\u503c\n    User user = new User();\n    user.setAge(99);\n    user.setName("Andy");\n\n    //\u4fee\u6539\u6761\u4ef6\n    UpdateWrapper<User> userUpdateWrapper = new UpdateWrapper<>();\n    userUpdateWrapper\n        .like("name", "h")\n        .or(i -> i.eq("name", "\u674e\u767d").ne("age", 20));\n\n    int result = userMapper.update(user, userUpdateWrapper);\n\n    System.out.println(result);\n}\n'})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:"UPDATE user SET name=?, age=?, update_time=? \n\nWHERE deleted=0 AND name LIKE ? \n\nOR ( name = ? AND age <> ? ) \n"})}),"\n",(0,t.jsx)(n.h2,{id:"9orderbyorderbydescorderbyasc",children:(0,t.jsx)(n.strong,{children:"9\u3001orderBy\u3001orderByDesc\u3001orderByAsc"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'@Test\npublic void testSelectListOrderBy() {\n\n    QueryWrapper<User> queryWrapper = new QueryWrapper<>();\n    queryWrapper.orderByDesc("id");\n\n    List<User> users = userMapper.selectList(queryWrapper);\n    users.forEach(System.out::println);\n}\n'})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:"SELECT id,name,age,email,create_time,update_time,deleted,version \n\nFROM user WHERE deleted=0 ORDER BY id DESC \n"})}),"\n",(0,t.jsx)(n.h2,{id:"10last",children:(0,t.jsx)(n.strong,{children:"10\u3001last"})}),"\n",(0,t.jsx)(n.p,{children:"\u76f4\u63a5\u62fc\u63a5\u5230 sql \u7684\u6700\u540e"}),"\n",(0,t.jsx)(n.p,{children:"**\u6ce8\u610f\uff1a**\u53ea\u80fd\u8c03\u7528\u4e00\u6b21,\u591a\u6b21\u8c03\u7528\u4ee5\u6700\u540e\u4e00\u6b21\u4e3a\u51c6 \u6709sql\u6ce8\u5165\u7684\u98ce\u9669,\u8bf7\u8c28\u614e\u4f7f\u7528"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'@Test\npublic void testSelectListLast() {\n\n    QueryWrapper<User> queryWrapper = new QueryWrapper<>();\n    queryWrapper.last("limit 1");\n\n    List<User> users = userMapper.selectList(queryWrapper);\n    users.forEach(System.out::println);\n}\n'})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:"SELECT id,name,age,email,create_time,update_time,deleted,version \n\nFROM user WHERE deleted=0 limit 1 \n"})}),"\n",(0,t.jsx)(n.h2,{id:"11\u6307\u5b9a\u8981\u67e5\u8be2\u7684\u5217",children:"**11\u3001**\u6307\u5b9a\u8981\u67e5\u8be2\u7684\u5217"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'@Test\npublic void testSelectListColumn() {\n\n    QueryWrapper<User> queryWrapper = new QueryWrapper<>();\n    queryWrapper.select("id", "name", "age");\n\n    List<User> users = userMapper.selectList(queryWrapper);\n    users.forEach(System.out::println);\n}\n'})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:"SELECT id,name,age FROM user WHERE deleted=0 \n"})}),"\n",(0,t.jsx)(n.h2,{id:"12setsetsql",children:(0,t.jsx)(n.strong,{children:"12\u3001set\u3001setSql"})}),"\n",(0,t.jsx)(n.p,{children:"\u6700\u7ec8\u7684sql\u4f1a\u5408\u5e76 user.setAge()\uff0c\u4ee5\u53ca userUpdateWrapper.set()  \u548c setSql() \u4e2d \u7684\u5b57\u6bb5"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'@Test\npublic void testUpdateSet() {\n\n    //\u4fee\u6539\u503c\n    User user = new User();\n    user.setAge(99);\n\n    //\u4fee\u6539\u6761\u4ef6\n    UpdateWrapper<User> userUpdateWrapper = new UpdateWrapper<>();\n    userUpdateWrapper\n        .like("name", "h")\n        .set("name", "\u8001\u674e\u5934")//\u9664\u4e86\u53ef\u4ee5\u67e5\u8be2\u8fd8\u53ef\u4ee5\u4f7f\u7528set\u8bbe\u7f6e\u4fee\u6539\u7684\u5b57\u6bb5\n        .setSql(" email = \'123@qq.com\'");//\u53ef\u4ee5\u6709\u5b50\u67e5\u8be2\n\n    int result = userMapper.update(user, userUpdateWrapper);\n}\n'})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:"UPDATE user SET age=?, update_time=?, name=?, email = '123@qq.com' WHERE deleted=0 AND name LIKE ? \n"})})]})}function u(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}},28453:(e,n,r)=>{r.d(n,{R:()=>i,x:()=>a});var s=r(96540);const t={},l=s.createContext(t);function i(e){const n=s.useContext(l);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:i(e.components),s.createElement(l.Provider,{value:n},e.children)}},70226:(e,n,r)=>{r.d(n,{A:()=>s});const s=r.p+"assets/images/27b56b5e-39a6-42ba-b7ed-4f109b6ad7bf-50057add6aed436f6b8212217f0c12bc.png"}}]);