"use strict";(self.webpackChunkmdviewer=self.webpackChunkmdviewer||[]).push([[5934],{28453:(e,n,r)=>{r.d(n,{R:()=>t,x:()=>c});var i=r(96540);const d={},s=i.createContext(d);function t(e){const n=i.useContext(s);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(d):e.components||d:t(e.components),i.createElement(s.Provider,{value:n},e.children)}},56513:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>o,contentTitle:()=>c,default:()=>u,frontMatter:()=>t,metadata:()=>i,toc:()=>l});const i=JSON.parse('{"id":"\u8c37\u7c92\u5b66\u9662\u5728\u7ebf\u6559\u80b2\u9879\u76ee/day09/02-\u5220\u9664\u8bfe\u7a0b","title":"02-\u5220\u9664\u8bfe\u7a0b","description":"1\u3001web\u5c42","source":"@site/docs/\u8c37\u7c92\u5b66\u9662\u5728\u7ebf\u6559\u80b2\u9879\u76ee/day09/02-\u5220\u9664\u8bfe\u7a0b.md","sourceDirName":"\u8c37\u7c92\u5b66\u9662\u5728\u7ebf\u6559\u80b2\u9879\u76ee/day09","slug":"/\u8c37\u7c92\u5b66\u9662\u5728\u7ebf\u6559\u80b2\u9879\u76ee/day09/02-\u5220\u9664\u8bfe\u7a0b","permalink":"/mdviewer/docs/\u8c37\u7c92\u5b66\u9662\u5728\u7ebf\u6559\u80b2\u9879\u76ee/day09/02-\u5220\u9664\u8bfe\u7a0b","draft":false,"unlisted":false,"editUrl":"https://github.com/hello-github-ui/mdviewer/edit/master/docs/\u8c37\u7c92\u5b66\u9662\u5728\u7ebf\u6559\u80b2\u9879\u76ee/day09/02-\u5220\u9664\u8bfe\u7a0b.md","tags":[{"inline":true,"label":"\u5c1a\u7845\u8c37","permalink":"/mdviewer/docs/tags/\u5c1a\u7845\u8c37"}],"version":"current","sidebarPosition":2,"frontMatter":{"id":"02-\u5220\u9664\u8bfe\u7a0b","title":"02-\u5220\u9664\u8bfe\u7a0b","tags":["\u5c1a\u7845\u8c37"]},"sidebar":"tutorialSidebar","previous":{"title":"01-\u8bfe\u7a0b\u5217\u8868\u7684\u663e\u793a","permalink":"/mdviewer/docs/\u8c37\u7c92\u5b66\u9662\u5728\u7ebf\u6559\u80b2\u9879\u76ee/day09/01-\u8bfe\u7a0b\u5217\u8868\u7684\u663e\u793a"},"next":{"title":"03-\u89c6\u9891\u70b9\u64ad\u7b80\u4ecb","permalink":"/mdviewer/docs/\u8c37\u7c92\u5b66\u9662\u5728\u7ebf\u6559\u80b2\u9879\u76ee/day09/03-\u89c6\u9891\u70b9\u64ad\u7b80\u4ecb"}}');var d=r(74848),s=r(28453);const t={id:"02-\u5220\u9664\u8bfe\u7a0b",title:"02-\u5220\u9664\u8bfe\u7a0b",tags:["\u5c1a\u7845\u8c37"]},c="\u4e00\u3001\u540e\u7aef\u5b9e\u73b0",o={},l=[{value:"1\u3001web\u5c42",id:"1web\u5c42",level:2},{value:"2\u3001service\u5c42",id:"2service\u5c42",level:2},{value:"1\u3001\u5b9a\u4e49api",id:"1\u5b9a\u4e49api",level:2},{value:"2\u3001\u4fee\u6539\u5220\u9664\u6309\u94ae",id:"2\u4fee\u6539\u5220\u9664\u6309\u94ae",level:2},{value:"3\u3001\u7f16\u5199\u5220\u9664\u65b9\u6cd5",id:"3\u7f16\u5199\u5220\u9664\u65b9\u6cd5",level:2}];function a(e){const n={code:"code",em:"em",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",strong:"strong",...(0,s.R)(),...e.components};return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(n.header,{children:(0,d.jsx)(n.h1,{id:"\u4e00\u540e\u7aef\u5b9e\u73b0",children:"\u4e00\u3001\u540e\u7aef\u5b9e\u73b0"})}),"\n",(0,d.jsx)(n.h2,{id:"1web\u5c42",children:"1\u3001web\u5c42"}),"\n",(0,d.jsx)(n.p,{children:"\u5b9a\u4e49\u5220\u9664api\u65b9\u6cd5\uff1aCourseAdminController.java"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{children:'@ApiOperation(value = "\u6839\u636eID\u5220\u9664\u8bfe\u7a0b")\n@DeleteMapping("{id}")\npublic R removeById(\n    @ApiParam(name = "id", value = "\u8bfe\u7a0bID", required = true)\n    @PathVariable String id){\n\n    boolean result = courseService.removeCourseById(id);\n    if(result){\n        return R.ok();\n    }else{\n        return R.error().message("\u5220\u9664\u5931\u8d25");\n    }\n}\n'})}),"\n",(0,d.jsx)(n.h2,{id:"2service\u5c42",children:"2\u3001service\u5c42"}),"\n",(0,d.jsx)(n.p,{children:"\u5982\u679c\u7528\u6237\u786e\u5b9a\u5220\u9664\uff0c\u5219\u9996\u5148\u5220\u9664video\u8bb0\u5f55\uff0c\u7136\u540e\u5220\u9664chapter\u8bb0\u5f55\uff0c\u6700\u540e\u5220\u9664Course\u8bb0\u5f55"}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"2.1\u3001\u5728VideoService\u4e2d\u5b9a\u4e49\u6839\u636ecourseId\u5220\u9664video\u4e1a\u52a1\u65b9\u6cd5"})}),"\n",(0,d.jsx)(n.p,{children:"\u63a5\u53e3"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{children:"boolean removeByCourseId(String courseId);\n"})}),"\n",(0,d.jsx)(n.p,{children:"\u5b9e\u73b0"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{children:'@Override\npublic boolean removeByCourseId(String courseId) {\n    QueryWrapper<Video> queryWrapper = new QueryWrapper<>();\n    queryWrapper.eq("course_id", courseId);\n    Integer count = baseMapper.delete(queryWrapper);\n    return null != count && count > 0;\n}\n'})}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsxs)(n.strong,{children:[(0,d.jsx)(n.em,{children:"*2.2\u3001*"}),"\u5728ChapterService\u4e2d\u5b9a\u4e49\u6839\u636ecourseId\u5220\u9664chapter\u4e1a\u52a1\u65b9\u6cd5"]})}),"\n",(0,d.jsx)(n.p,{children:"\u63a5\u53e3"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{children:"boolean removeByCourseId(String courseId);\n"})}),"\n",(0,d.jsx)(n.p,{children:"\u5b9e\u73b0"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{children:'@Override\npublic boolean removeByCourseId(String courseId) {\n    QueryWrapper<Chapter> queryWrapper = new QueryWrapper<>();\n    queryWrapper.eq("course_id", courseId);\n    Integer count = baseMapper.delete(queryWrapper);\n    return null != count && count > 0;\n}\n'})}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsxs)(n.strong,{children:[(0,d.jsx)(n.em,{children:"*2.3\u3001*"}),"\u5220\u9664\u5f53\u524dcourse\u8bb0\u5f55"]})}),"\n",(0,d.jsx)(n.p,{children:"\u63a5\u53e3\uff1aCourseService.java"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{children:"boolean removeCourseById(String id);\n"})}),"\n",(0,d.jsx)(n.p,{children:"\u5b9e\u73b0\uff1aCourseServiceImpl.java"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{children:"@Override\npublic boolean removeCourseById(String id) {\n\n    //\u6839\u636eid\u5220\u9664\u6240\u6709\u89c6\u9891\n    videoService.removeByCourseId(id);\n\n    //\u6839\u636eid\u5220\u9664\u6240\u6709\u7ae0\u8282\n    chapterService.removeByCourseId(id);\n\n    Integer result = baseMapper.deleteById(id);\n    return null != result && result > 0;\n}\n"})}),"\n",(0,d.jsx)(n.h1,{id:""}),"\n",(0,d.jsx)(n.h1,{id:"\u4e8c\u524d\u7aef\u5b9e\u73b0",children:"\u4e8c\u3001\u524d\u7aef\u5b9e\u73b0"}),"\n",(0,d.jsx)(n.h2,{id:"1\u5b9a\u4e49api",children:"1\u3001\u5b9a\u4e49api"}),"\n",(0,d.jsx)(n.p,{children:"course.js\u4e2d\u6dfb\u52a0\u5220\u9664\u65b9\u6cd5"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{children:"removeById(id) {\n    return request({\n        url: `${api_name}/${id}`,\n        method: 'delete'\n    })\n}\n"})}),"\n",(0,d.jsx)(n.h2,{id:"2\u4fee\u6539\u5220\u9664\u6309\u94ae",children:"2\u3001\u4fee\u6539\u5220\u9664\u6309\u94ae"}),"\n",(0,d.jsx)(n.p,{children:"src/api/edu/course.js \u5220\u9664\u6309\u94ae\u6ce8\u518cclick\u4e8b\u4ef6"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{children:'<el-button type="text" size="mini" icon="el-icon-delete" @click="removeDataById(scope.row.id)">\u5220\u9664</el-button>\n'})}),"\n",(0,d.jsx)(n.h2,{id:"3\u7f16\u5199\u5220\u9664\u65b9\u6cd5",children:"3\u3001\u7f16\u5199\u5220\u9664\u65b9\u6cd5"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{children:"removeDataById(id) {\n    // debugger\n    this.$confirm('\u6b64\u64cd\u4f5c\u5c06\u6c38\u4e45\u5220\u9664\u8be5\u8bfe\u7a0b\uff0c\u4ee5\u53ca\u8be5\u8bfe\u7a0b\u4e0b\u7684\u7ae0\u8282\u548c\u89c6\u9891\uff0c\u662f\u5426\u7ee7\u7eed?', '\u63d0\u793a', {\n        confirmButtonText: '\u786e\u5b9a',\n        cancelButtonText: '\u53d6\u6d88',\n        type: 'warning'\n    }).then(() => {\n        return course.removeById(id)\n    }).then(() => {\n        this.fetchData()\n        this.$message({\n            type: 'success',\n            message: '\u5220\u9664\u6210\u529f!'\n        })\n    }).catch((response) => { // \u5931\u8d25\n        if (response === 'cancel') {\n            this.$message({\n                type: 'info',\n                message: '\u5df2\u53d6\u6d88\u5220\u9664'\n            })\n        }\n    })\n}\n"})})]})}function u(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,d.jsx)(n,{...e,children:(0,d.jsx)(a,{...e})}):a(e)}}}]);