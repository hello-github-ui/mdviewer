"use strict";(self.webpackChunkmdviewer=self.webpackChunkmdviewer||[]).push([[5032],{28453:(e,n,t)=>{t.d(n,{R:()=>l,x:()=>a});var i=t(96540);const r={},s=i.createContext(r);function l(e){const n=i.useContext(s);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),i.createElement(s.Provider,{value:n},e.children)}},78727:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>p,frontMatter:()=>l,metadata:()=>i,toc:()=>o});const i=JSON.parse('{"id":"\u8c37\u7c92\u5b66\u9662\u5728\u7ebf\u6559\u80b2\u9879\u76ee/day09/01-\u8bfe\u7a0b\u5217\u8868\u7684\u663e\u793a","title":"01-\u8bfe\u7a0b\u5217\u8868\u7684\u663e\u793a","description":"1\u3001\u5b9a\u4e49\u641c\u7d22\u5bf9\u8c61","source":"@site/docs/\u8c37\u7c92\u5b66\u9662\u5728\u7ebf\u6559\u80b2\u9879\u76ee/day09/01-\u8bfe\u7a0b\u5217\u8868\u7684\u663e\u793a.md","sourceDirName":"\u8c37\u7c92\u5b66\u9662\u5728\u7ebf\u6559\u80b2\u9879\u76ee/day09","slug":"/\u8c37\u7c92\u5b66\u9662\u5728\u7ebf\u6559\u80b2\u9879\u76ee/day09/01-\u8bfe\u7a0b\u5217\u8868\u7684\u663e\u793a","permalink":"/mdviewer/docs/\u8c37\u7c92\u5b66\u9662\u5728\u7ebf\u6559\u80b2\u9879\u76ee/day09/01-\u8bfe\u7a0b\u5217\u8868\u7684\u663e\u793a","draft":false,"unlisted":false,"editUrl":"https://github.com/hello-github-ui/mdviewer/edit/master/docs/\u8c37\u7c92\u5b66\u9662\u5728\u7ebf\u6559\u80b2\u9879\u76ee/day09/01-\u8bfe\u7a0b\u5217\u8868\u7684\u663e\u793a.md","tags":[{"inline":true,"label":"\u5c1a\u7845\u8c37","permalink":"/mdviewer/docs/tags/\u5c1a\u7845\u8c37"}],"version":"current","sidebarPosition":1,"frontMatter":{"id":"01-\u8bfe\u7a0b\u5217\u8868\u7684\u663e\u793a","title":"01-\u8bfe\u7a0b\u5217\u8868\u7684\u663e\u793a","tags":["\u5c1a\u7845\u8c37"]},"sidebar":"tutorialSidebar","previous":{"title":"08-\u968f\u5802\u7b14\u8bb0","permalink":"/mdviewer/docs/\u8c37\u7c92\u5b66\u9662\u5728\u7ebf\u6559\u80b2\u9879\u76ee/day08/08-\u968f\u5802\u7b14\u8bb0"},"next":{"title":"02-\u5220\u9664\u8bfe\u7a0b","permalink":"/mdviewer/docs/\u8c37\u7c92\u5b66\u9662\u5728\u7ebf\u6559\u80b2\u9879\u76ee/day09/02-\u5220\u9664\u8bfe\u7a0b"}}');var r=t(74848),s=t(28453);const l={id:"01-\u8bfe\u7a0b\u5217\u8868\u7684\u663e\u793a",title:"01-\u8bfe\u7a0b\u5217\u8868\u7684\u663e\u793a",tags:["\u5c1a\u7845\u8c37"]},a="\u4e00\u3001\u540e\u7aef\u5b9e\u73b0",c={},o=[{value:"1\u3001\u5b9a\u4e49\u641c\u7d22\u5bf9\u8c61",id:"1\u5b9a\u4e49\u641c\u7d22\u5bf9\u8c61",level:2},{value:"2\u3001\u5b9a\u4e49service\u65b9\u6cd5",id:"2\u5b9a\u4e49service\u65b9\u6cd5",level:2},{value:"3\u3001\u5b9a\u4e49web\u5c42\u65b9\u6cd5",id:"3\u5b9a\u4e49web\u5c42\u65b9\u6cd5",level:2},{value:"1\u3001\u5b9a\u4e49api",id:"1\u5b9a\u4e49api",level:2},{value:"2\u3001\u7ec4\u4ef6\u4e2d\u7684js",id:"2\u7ec4\u4ef6\u4e2d\u7684js",level:2},{value:"3\u3001\u7ec4\u4ef6\u6a21\u677f",id:"3\u7ec4\u4ef6\u6a21\u677f",level:2},{value:"4\u3001css\u7684\u5b9a\u4e49",id:"4css\u7684\u5b9a\u4e49",level:2}];function d(e){const n={code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"\u4e00\u540e\u7aef\u5b9e\u73b0",children:"\u4e00\u3001\u540e\u7aef\u5b9e\u73b0"})}),"\n",(0,r.jsx)(n.h2,{id:"1\u5b9a\u4e49\u641c\u7d22\u5bf9\u8c61",children:"1\u3001\u5b9a\u4e49\u641c\u7d22\u5bf9\u8c61"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:'CourseQuery\n\npackage com.guli.edu.query;\n@ApiModel(value = "Course\u67e5\u8be2\u5bf9\u8c61", description = "\u8bfe\u7a0b\u67e5\u8be2\u5bf9\u8c61\u5c01\u88c5")\n@Data\npublic class CourseQuery implements Serializable {\n\n    private static final long serialVersionUID = 1L;\n\n    @ApiModelProperty(value = "\u8bfe\u7a0b\u540d\u79f0")\n    private String title;\n\n    @ApiModelProperty(value = "\u8bb2\u5e08id")\n    private String teacherId;\n\n    @ApiModelProperty(value = "\u4e00\u7ea7\u7c7b\u522bid")\n    private String subjectParentId;\n\n    @ApiModelProperty(value = "\u4e8c\u7ea7\u7c7b\u522bid")\n    private String subjectId;\n\n}\n'})}),"\n",(0,r.jsx)(n.h2,{id:"2\u5b9a\u4e49service\u65b9\u6cd5",children:"2\u3001\u5b9a\u4e49service\u65b9\u6cd5"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:'\u63a5\u53e3\n\nvoid pageQuery(Page<Course> pageParam, CourseQuery courseQuery);\n\u5b9e\u73b0\n@Override\npublic void pageQuery(Page<Course> pageParam, CourseQuery courseQuery) {\n\n    QueryWrapper<Course> queryWrapper = new QueryWrapper<>();\n    queryWrapper.orderByDesc("gmt_create");\n\n    if (courseQuery == null){\n        baseMapper.selectPage(pageParam, queryWrapper);\n        return;\n    }\n\n    String title = courseQuery.getTitle();\n    String teacherId = courseQuery.getTeacherId();\n    String subjectParentId = courseQuery.getSubjectParentId();\n    String subjectId = courseQuery.getSubjectId();\n\n    if (!StringUtils.isEmpty(title)) {\n        queryWrapper.like("title", title);\n    }\n\n    if (!StringUtils.isEmpty(teacherId) ) {\n        queryWrapper.eq("teacher_id", teacherId);\n    }\n\n    if (!StringUtils.isEmpty(subjectParentId)) {\n        queryWrapper.ge("subject_parent_id", subjectParentId);\n    }\n\n    if (!StringUtils.isEmpty(subjectId)) {\n        queryWrapper.ge("subject_id", subjectId);\n    }\n\n    baseMapper.selectPage(pageParam, queryWrapper);\n}\n'})}),"\n",(0,r.jsx)(n.h2,{id:"3\u5b9a\u4e49web\u5c42\u65b9\u6cd5",children:"3\u3001\u5b9a\u4e49web\u5c42\u65b9\u6cd5"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:'@ApiOperation(value = "\u5206\u9875\u8bfe\u7a0b\u5217\u8868")\n@GetMapping("{page}/{limit}")\npublic R pageQuery(\n        @ApiParam(name = "page", value = "\u5f53\u524d\u9875\u7801", required = true)\n        @PathVariable Long page,\n\n        @ApiParam(name = "limit", value = "\u6bcf\u9875\u8bb0\u5f55\u6570", required = true)\n        @PathVariable Long limit,\n\n        @ApiParam(name = "courseQuery", value = "\u67e5\u8be2\u5bf9\u8c61", required = false)\n                CourseQuery courseQuery){\n\n    Page<Course> pageParam = new Page<>(page, limit);\n\n    courseService.pageQuery(pageParam, courseQuery);\n    List<Course> records = pageParam.getRecords();\n\n    long total = pageParam.getTotal();\n\n    return  R.ok().data("total", total).data("rows", records);\n}\n'})}),"\n",(0,r.jsx)(n.h1,{id:"\u4e8c\u524d\u7aef\u5206\u9875\u67e5\u8be2\u5217\u8868",children:"\u4e8c\u3001\u524d\u7aef\u5206\u9875\u67e5\u8be2\u5217\u8868"}),"\n",(0,r.jsx)(n.h2,{id:"1\u5b9a\u4e49api",children:"1\u3001\u5b9a\u4e49api"}),"\n",(0,r.jsx)(n.p,{children:"course.js"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"getPageList(page, limit, searchObj) {\n  return request({\n    url: `${api_name}/${page}/${limit}`,\n    method: 'get',\n    params: searchObj\n  })\n},\n"})}),"\n",(0,r.jsx)(n.h2,{id:"2\u7ec4\u4ef6\u4e2d\u7684js",children:"2\u3001\u7ec4\u4ef6\u4e2d\u7684js"}),"\n",(0,r.jsx)(n.p,{children:"src/views/edu/list.vue"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"<script>\nimport course from '@/api/edu/course'\nimport teacher from '@/api/edu/teacher'\nimport subject from '@/api/edu/subject'\n\nexport default {\n\n  data() {\n    return {\n      listLoading: true, // \u662f\u5426\u663e\u793aloading\u4fe1\u606f\n      list: null, // \u6570\u636e\u5217\u8868\n      total: 0, // \u603b\u8bb0\u5f55\u6570\n      page: 1, // \u9875\u7801\n      limit: 10, // \u6bcf\u9875\u8bb0\u5f55\u6570\n      searchObj: {\n        subjectParentId: '',\n        subjectId: '',\n        title: '',\n        teacherId: ''\n      }, // \u67e5\u8be2\u6761\u4ef6\n      teacherList: [], // \u8bb2\u5e08\u5217\u8868\n      subjectNestedList: [], // \u4e00\u7ea7\u5206\u7c7b\u5217\u8868\n      subSubjectList: [] // \u4e8c\u7ea7\u5206\u7c7b\u5217\u8868,\n    }\n  },\n\n  created() { // \u5f53\u9875\u9762\u52a0\u8f7d\u65f6\u83b7\u53d6\u6570\u636e\n    this.fetchData()\n    // \u521d\u59cb\u5316\u5206\u7c7b\u5217\u8868\n    this.initSubjectList()\n    // \u83b7\u53d6\u8bb2\u5e08\u5217\u8868\n    this.initTeacherList()\n  },\n\n  methods: {\n    fetchData(page = 1) { // \u8c03\u7528api\u5c42\u83b7\u53d6\u6570\u636e\u5e93\u4e2d\u7684\u6570\u636e\n      console.log('\u52a0\u8f7d\u5217\u8868')\n      // \u5f53\u70b9\u51fb\u5206\u9875\u7ec4\u4ef6\u7684\u5207\u6362\u6309\u94ae\u7684\u65f6\u5019\uff0c\u4f1a\u4f20\u8f93\u4e00\u4e2a\u5f53\u524d\u9875\u7801\u7684\u53c2\u6570page\n      // \u89e3\u51b3\u5206\u9875\u65e0\u6548\u95ee\u9898\n      this.page = page\n      this.listLoading = true\n      course.getPageList(this.page, this.limit, this.searchObj).then(response => {\n        // debugger \u8bbe\u7f6e\u65ad\u70b9\u8c03\u8bd5\n        if (response.success === true) {\n          this.list = response.data.rows\n          this.total = response.data.total\n        }\n        this.listLoading = false\n      })\n    },\n\n    initTeacherList() {\n      teacher.getList().then(response => {\n        this.teacherList = response.data.items\n      })\n    },\n\n    initSubjectList() {\n      subject.getNestedTreeList().then(response => {\n        this.subjectNestedList = response.data.items\n      })\n    },\n\n    subjectLevelOneChanged(value) {\n      for (let i = 0; i < this.subjectNestedList.length; i++) {\n        if (this.subjectNestedList[i].id === value) {\n          this.subSubjectList = this.subjectNestedList[i].children\n          this.searchObj.subjectId = ''\n        }\n      }\n    },\n\n    resetData() {\n      this.searchObj = {}\n      this.subSubjectList = [] // \u4e8c\u7ea7\u5206\u7c7b\u5217\u8868\n      this.fetchData()\n    }\n  }\n}\n<\/script>\n"})}),"\n",(0,r.jsx)(n.h2,{id:"3\u7ec4\u4ef6\u6a21\u677f",children:"3\u3001\u7ec4\u4ef6\u6a21\u677f"}),"\n",(0,r.jsx)(n.p,{children:"\u67e5\u8be2\u8868\u5355"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:'\x3c!--\u67e5\u8be2\u8868\u5355--\x3e\n<el-form :inline="true" class="demo-form-inline">\n\n  \x3c!-- \u6240\u5c5e\u5206\u7c7b\uff1a\u7ea7\u8054\u4e0b\u62c9\u5217\u8868 --\x3e\n  \x3c!-- \u4e00\u7ea7\u5206\u7c7b --\x3e\n  <el-form-item label="\u8bfe\u7a0b\u7c7b\u522b">\n    <el-select\n      v-model="searchObj.subjectParentId"\n      placeholder="\u8bf7\u9009\u62e9"\n      @change="subjectLevelOneChanged">\n      <el-option\n        v-for="subject in subjectNestedList"\n        :key="subject.id"\n        :label="subject.title"\n        :value="subject.id"/>\n    </el-select>\n\n    \x3c!-- \u4e8c\u7ea7\u5206\u7c7b --\x3e\n    <el-select v-model="searchObj.subjectId" placeholder="\u8bf7\u9009\u62e9">\n      <el-option\n        v-for="subject in subSubjectList"\n        :key="subject.id"\n        :label="subject.title"\n        :value="subject.id"/>\n    </el-select>\n  </el-form-item>\n\n  \x3c!-- \u6807\u9898 --\x3e\n  <el-form-item>\n    <el-input v-model="searchObj.title" placeholder="\u8bfe\u7a0b\u6807\u9898"/>\n  </el-form-item>\n  \x3c!-- \u8bb2\u5e08 --\x3e\n  <el-form-item>\n    <el-select\n      v-model="searchObj.teacherId"\n      placeholder="\u8bf7\u9009\u62e9\u8bb2\u5e08">\n      <el-option\n        v-for="teacher in teacherList"\n        :key="teacher.id"\n        :label="teacher.name"\n        :value="teacher.id"/>\n    </el-select>\n  </el-form-item>\n\n  <el-button type="primary" icon="el-icon-search" @click="fetchData()">\u67e5\u8be2</el-button>\n  <el-button type="default" @click="resetData()">\u6e05\u7a7a</el-button>\n</el-form>\n'})}),"\n",(0,r.jsx)(n.p,{children:"\u8868\u683c\u548c\u5206\u9875"}),"\n",(0,r.jsx)(n.p,{children:'\u8868\u683c\u6dfb\u52a0\u4e86 row-class-name="myClassList" \u6837\u5f0f\u5b9a\u4e49'}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:'\x3c!-- \u8868\u683c --\x3e\n<el-table\n  v-loading="listLoading"\n  :data="list"\n  element-loading-text="\u6570\u636e\u52a0\u8f7d\u4e2d"\n  border\n  fit\n  highlight-current-row\n  row-class-name="myClassList">\n\n  <el-table-column\n    label="\u5e8f\u53f7"\n    width="70"\n    align="center">\n    <template slot-scope="scope">\n      {{ (page - 1) * limit + scope.$index + 1 }}\n    </template>\n  </el-table-column>\n\n  <el-table-column label="\u8bfe\u7a0b\u4fe1\u606f" width="470" align="center">\n    <template slot-scope="scope">\n      <div class="info">\n        <div class="pic">\n          <img :src="scope.row.cover" alt="scope.row.title" width="150px">\n        </div>\n        <div class="title">\n          <a href="">{{ scope.row.title }}</a>\n          <p>{{ scope.row.lessonNum }}\u8bfe\u65f6</p>\n        </div>\n      </div>\n\n    </template>\n  </el-table-column>\n\n  <el-table-column label="\u521b\u5efa\u65f6\u95f4" align="center">\n    <template slot-scope="scope">\n      {{ scope.row.gmtCreate.substr(0, 10) }}\n    </template>\n  </el-table-column>\n  <el-table-column label="\u53d1\u5e03\u65f6\u95f4" align="center">\n    <template slot-scope="scope">\n      {{ scope.row.gmtModified.substr(0, 10) }}\n    </template>\n  </el-table-column>\n  <el-table-column label="\u4ef7\u683c" width="100" align="center" >\n    <template slot-scope="scope">\n      {{ Number(scope.row.price) === 0 ? \'\u514d\u8d39\' :\n      \'\xa5\' + scope.row.price.toFixed(2) }}\n    </template>\n  </el-table-column>\n  <el-table-column prop="buyCount" label="\u4ed8\u8d39\u5b66\u5458" width="100" align="center" >\n    <template slot-scope="scope">\n      {{ scope.row.buyCount }}\u4eba\n    </template>\n  </el-table-column>\n\n  <el-table-column label="\u64cd\u4f5c" width="150" align="center">\n    <template slot-scope="scope">\n      <router-link :to="\'/edu/course/info/\'+scope.row.id">\n        <el-button type="text" size="mini" icon="el-icon-edit">\u7f16\u8f91\u8bfe\u7a0b\u4fe1\u606f</el-button>\n      </router-link>\n      <router-link :to="\'/edu/course/chapter/\'+scope.row.id">\n        <el-button type="text" size="mini" icon="el-icon-edit">\u7f16\u8f91\u8bfe\u7a0b\u5927\u7eb2</el-button>\n      </router-link>\n      <el-button type="text" size="mini" icon="el-icon-delete">\u5220\u9664</el-button>\n    </template>\n  </el-table-column>\n</el-table>\n\n\x3c!-- \u5206\u9875 --\x3e\n<el-pagination\n  :current-page="page"\n  :page-size="limit"\n  :total="total"\n  style="padding: 30px 0; text-align: center;"\n  layout="total, prev, pager, next, jumper"\n  @current-change="fetchData"\n/>\n'})}),"\n",(0,r.jsx)(n.h2,{id:"4css\u7684\u5b9a\u4e49",children:"4\u3001css\u7684\u5b9a\u4e49"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"<style scoped>\n.myClassList .info {\n    width: 450px;\n    overflow: hidden;\n}\n.myClassList .info .pic {\n    width: 150px;\n    height: 90px;\n    overflow: hidden;\n    float: left;\n}\n.myClassList .info .pic a {\n    display: block;\n    width: 100%;\n    height: 100%;\n    margin: 0;\n    padding: 0;\n}\n.myClassList .info .pic img {\n    display: block;\n    width: 100%;\n}\n.myClassList td .info .title {\n    width: 280px;\n    float: right;\n    height: 90px;\n}\n.myClassList td .info .title a {\n    display: block;\n    height: 48px;\n    line-height: 24px;\n    overflow: hidden;\n    color: #00baf2;\n    margin-bottom: 12px;\n}\n.myClassList td .info .title p {\n    line-height: 20px;\n    margin-top: 5px;\n    color: #818181;\n}\n</style>\n"})})]})}function p(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}}}]);