"use strict";(self.webpackChunkmdviewer=self.webpackChunkmdviewer||[]).push([[9718],{28453:(e,n,t)=>{t.d(n,{R:()=>a,x:()=>s});var l=t(96540);const i={},r=l.createContext(i);function a(e){const n=l.useContext(r);return l.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),l.createElement(r.Provider,{value:n},e.children)}},62780:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>s,default:()=>h,frontMatter:()=>a,metadata:()=>l,toc:()=>o});const l=JSON.parse('{"id":"\u8c37\u7c92\u5b66\u9662\u5728\u7ebf\u6559\u80b2\u9879\u76ee/day05/03-\u8bb2\u5e08\u7ba1\u7406\u5217\u8868\u7ec4\u4ef6","title":"03-\u8bb2\u5e08\u7ba1\u7406\u5217\u8868\u7ec4\u4ef6","description":"1\u3001\u5b9a\u4e49api","source":"@site/docs/\u8c37\u7c92\u5b66\u9662\u5728\u7ebf\u6559\u80b2\u9879\u76ee/day05/03-\u8bb2\u5e08\u7ba1\u7406\u5217\u8868\u7ec4\u4ef6.md","sourceDirName":"\u8c37\u7c92\u5b66\u9662\u5728\u7ebf\u6559\u80b2\u9879\u76ee/day05","slug":"/\u8c37\u7c92\u5b66\u9662\u5728\u7ebf\u6559\u80b2\u9879\u76ee/day05/03-\u8bb2\u5e08\u7ba1\u7406\u5217\u8868\u7ec4\u4ef6","permalink":"/mdviewer/docs/\u8c37\u7c92\u5b66\u9662\u5728\u7ebf\u6559\u80b2\u9879\u76ee/day05/03-\u8bb2\u5e08\u7ba1\u7406\u5217\u8868\u7ec4\u4ef6","draft":false,"unlisted":false,"editUrl":"https://github.com/hello-github-ui/mdviewer/edit/master/docs/\u8c37\u7c92\u5b66\u9662\u5728\u7ebf\u6559\u80b2\u9879\u76ee/day05/03-\u8bb2\u5e08\u7ba1\u7406\u5217\u8868\u7ec4\u4ef6.md","tags":[{"inline":true,"label":"\u5c1a\u7845\u8c37","permalink":"/mdviewer/docs/tags/\u5c1a\u7845\u8c37"}],"version":"current","sidebarPosition":3,"frontMatter":{"id":"03-\u8bb2\u5e08\u7ba1\u7406\u5217\u8868\u7ec4\u4ef6","title":"03-\u8bb2\u5e08\u7ba1\u7406\u5217\u8868\u7ec4\u4ef6","tags":["\u5c1a\u7845\u8c37"]},"sidebar":"tutorialSidebar","previous":{"title":"02-\u4f7f\u7528nginx\u914d\u7f6e\u540e\u53f0\u591a\u670d\u52a1\u5668api","permalink":"/mdviewer/docs/\u8c37\u7c92\u5b66\u9662\u5728\u7ebf\u6559\u80b2\u9879\u76ee/day05/02-\u4f7f\u7528nginx\u914d\u7f6e\u540e\u53f0\u591a\u670d\u52a1\u5668api"},"next":{"title":"04-\u8bb2\u5e08\u7ba1\u7406\u8868\u5355\u7ec4\u4ef6","permalink":"/mdviewer/docs/\u8c37\u7c92\u5b66\u9662\u5728\u7ebf\u6559\u80b2\u9879\u76ee/day05/04-\u8bb2\u5e08\u7ba1\u7406\u8868\u5355\u7ec4\u4ef6"}}');var i=t(74848),r=t(28453);const a={id:"03-\u8bb2\u5e08\u7ba1\u7406\u5217\u8868\u7ec4\u4ef6",title:"03-\u8bb2\u5e08\u7ba1\u7406\u5217\u8868\u7ec4\u4ef6",tags:["\u5c1a\u7845\u8c37"]},s="\u4e00\u3001\u5206\u9875\u5217\u8868",d={},o=[{value:"1\u3001\u5b9a\u4e49api",id:"1\u5b9a\u4e49api",level:2},{value:"2\u3001\u521d\u59cb\u5316vue\u7ec4\u4ef6",id:"2\u521d\u59cb\u5316vue\u7ec4\u4ef6",level:2},{value:"4\u3001\u5b9a\u4e49methods",id:"4\u5b9a\u4e49methods",level:2},{value:"5\u3001\u8868\u683c\u6e32\u67d3",id:"5\u8868\u683c\u6e32\u67d3",level:2},{value:"8\u3001\u6d4b\u8bd5",id:"8\u6d4b\u8bd5",level:2},{value:"1\u3001\u5b9a\u4e49api",id:"1\u5b9a\u4e49api-1",level:2},{value:"2\u3001\u5b9a\u4e49methods",id:"2\u5b9a\u4e49methods",level:2}];function c(e){const n={code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",strong:"strong",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"\u4e00\u5206\u9875\u5217\u8868",children:"\u4e00\u3001\u5206\u9875\u5217\u8868"})}),"\n",(0,i.jsx)(n.h2,{id:"1\u5b9a\u4e49api",children:"1\u3001\u5b9a\u4e49api"}),"\n",(0,i.jsx)(n.p,{children:"\u521b\u5efa\u6587\u4ef6 src/api/edu/teacher.js"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"import request from '@/utils/request'\n\nconst api_name = '/admin/edu/teacher'\nexport default {\n\n  getPageList(page, limit, searchObj) {\n    return request({\n      url: `${api_name}/${page}/${limit}`,\n      method: 'get',\n      data: searchObj\n    })\n  }\n}\n"})}),"\n",(0,i.jsx)(n.h2,{id:"2\u521d\u59cb\u5316vue\u7ec4\u4ef6",children:"2\u3001\u521d\u59cb\u5316vue\u7ec4\u4ef6"}),"\n",(0,i.jsx)(n.p,{children:"src/views/edu/teacher/list.vue"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"<template>\n  <div class=\"app-container\">\n    \u8bb2\u5e08\u5217\u8868\n  </div>\n</template>\n\n<script>\nimport teacher from '@/api/edu/teacher'\nexport default {\n\n  data() {// \u5b9a\u4e49\u6570\u636e\n      return {}\n  },\n    \n  created() { // \u5f53\u9875\u9762\u52a0\u8f7d\u65f6\u83b7\u53d6\u6570\u636e\n    this.fetchData()\n  },\n    \n  methods: {\n    fetchData() { // \u8c03\u7528api\u5c42\u83b7\u53d6\u6570\u636e\u5e93\u4e2d\u7684\u6570\u636e\n      console.log('\u52a0\u8f7d\u5217\u8868')\n    }\n  }\n}\n<\/script>\n"})}),"\n",(0,i.jsx)(n.h1,{id:""}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"3\u3001\u5b9a\u4e49data"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"  data() {\n    return {\n      listLoading: true, // \u662f\u5426\u663e\u793aloading\u4fe1\u606f\n      list: null, // \u6570\u636e\u5217\u8868\n      total: 0, // \u603b\u8bb0\u5f55\u6570\n      page: 1, // \u9875\u7801\n      limit: 10, // \u6bcf\u9875\u8bb0\u5f55\u6570\n      searchObj: {}// \u67e5\u8be2\u6761\u4ef6\n    }\n  },\n"})}),"\n",(0,i.jsx)(n.h2,{id:"4\u5b9a\u4e49methods",children:"4\u3001\u5b9a\u4e49methods"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"  methods: {\n    fetchData(page = 1) { // \u8c03\u7528api\u5c42\u83b7\u53d6\u6570\u636e\u5e93\u4e2d\u7684\u6570\u636e\n      console.log('\u52a0\u8f7d\u5217\u8868')\n      this.page = page\n      this.listLoading = true\n      teacher.getPageList(this.page, this.limit, this.searchObj).then(response => {\n        // debugger \u8bbe\u7f6e\u65ad\u70b9\u8c03\u8bd5\n        if (response.success === true) {\n          this.list = response.data.rows\n          this.total = response.data.total\n        }\n        this.listLoading = false\n      })\n    }\n  }\n"})}),"\n",(0,i.jsx)(n.h2,{id:"5\u8868\u683c\u6e32\u67d3",children:"5\u3001\u8868\u683c\u6e32\u67d3"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'    \x3c!-- \u8868\u683c --\x3e\n    <el-table\n      v-loading="listLoading"\n      :data="list"\n      element-loading-text="\u6570\u636e\u52a0\u8f7d\u4e2d"\n      border\n      fit\n      highlight-current-row>\n\n      <el-table-column\n        label="\u5e8f\u53f7"\n        width="70"\n        align="center">\n        <template slot-scope="scope">\n          {{ (page - 1) * limit + scope.$index + 1 }}\n        </template>\n      </el-table-column>\n\n      <el-table-column prop="name" label="\u540d\u79f0" width="80" />\n\n      <el-table-column label="\u5934\u8854" width="80">\n        <template slot-scope="scope">\n          {{ scope.row.level===1?\'\u9ad8\u7ea7\u8bb2\u5e08\':\'\u9996\u5e2d\u8bb2\u5e08\' }}\n        </template>\n      </el-table-column>\n\n      <el-table-column prop="intro" label="\u8d44\u5386" />\n\n      <el-table-column prop="gmtCreate" label="\u6dfb\u52a0\u65f6\u95f4" width="160"/>\n\n      <el-table-column prop="sort" label="\u6392\u5e8f" width="60" />\n\n      <el-table-column label="\u64cd\u4f5c" width="200" align="center">\n        <template slot-scope="scope">\n          <router-link :to="\'/edu/teacher/edit/\'+scope.row.id">\n            <el-button type="primary" size="mini" icon="el-icon-edit">\u4fee\u6539</el-button>\n          </router-link>\n          <el-button type="danger" size="mini" icon="el-icon-delete" @click="removeDataById(scope.row.id)">\u5220\u9664</el-button>\n        </template>\n      </el-table-column>\n    </el-table>\n'})}),"\n",(0,i.jsx)(n.p,{children:"6\u3001\u5206\u9875\u7ec4\u4ef6"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'   \x3c!-- \u5206\u9875 --\x3e\n    <el-pagination\n      :current-page="page"\n      :page-size="limit"\n      :total="total"\n      style="padding: 30px 0; text-align: center;"\n      layout="total, prev, pager, next, jumper"\n      @current-change="fetchData"\n    />\n'})}),"\n",(0,i.jsx)(n.p,{children:"7\u3001\u9876\u90e8\u67e5\u8be2\u8868\u5355"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"\u6ce8\u610f\uff1a"})}),"\n",(0,i.jsx)(n.p,{children:"element-ui\u7684 date-picker\u7ec4\u4ef6\u9ed8\u8ba4\u7ed1\u5b9a\u7684\u65f6\u95f4\u503c\u662f\u9ed8\u8ba4\u4e16\u754c\u6807\u51c6\u65f6\u95f4\uff0c\u548c\u4e2d\u56fd\u65f6\u95f4\u5dee8\u5c0f\u65f6"}),"\n",(0,i.jsxs)(n.p,{children:['\u8bbe\u7f6e value-format="yyyy-MM-dd HH:mm',":ss",'" \u6539\u53d8\u7ed1\u5b9a\u7684\u503c']}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'    \x3c!--\u67e5\u8be2\u8868\u5355--\x3e\n    <el-form :inline="true" class="demo-form-inline">\n      <el-form-item>\n        <el-input v-model="searchObj.name" placeholder="\u8bb2\u5e08\u540d"/>\n      </el-form-item>\n\n      <el-form-item>\n        <el-select v-model="searchObj.level" clearable placeholder="\u8bb2\u5e08\u5934\u8854">\n          <el-option :value="1" label="\u9ad8\u7ea7\u8bb2\u5e08"/>\n          <el-option :value="2" label="\u9996\u5e2d\u8bb2\u5e08"/>\n        </el-select>\n      </el-form-item>\n\n      <el-form-item label="\u6dfb\u52a0\u65f6\u95f4">\n        <el-date-picker\n          v-model="searchObj.begin"\n          type="datetime"\n          placeholder="\u9009\u62e9\u5f00\u59cb\u65f6\u95f4"\n          value-format="yyyy-MM-dd HH:mm:ss"\n          default-time="00:00:00"\n        />\n      </el-form-item>\n      <el-form-item>\n        <el-date-picker\n          v-model="searchObj.end"\n          type="datetime"\n          placeholder="\u9009\u62e9\u622a\u6b62\u65f6\u95f4"\n          value-format="yyyy-MM-dd HH:mm:ss"\n          default-time="00:00:00"\n        />\n      </el-form-item>\n\n      <el-button type="primary" icon="el-icon-search" @click="fetchData()">\u67e5\u8be2</el-button>\n      <el-button type="default" @click="resetData()">\u6e05\u7a7a</el-button>\n    </el-form>\n'})}),"\n",(0,i.jsx)(n.p,{children:"\u6e05\u7a7a\u65b9\u6cd5"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"resetData() {\n    this.searchObj = {}\n    this.fetchData()\n}\n"})}),"\n",(0,i.jsx)(n.h2,{id:"8\u6d4b\u8bd5",children:"8\u3001\u6d4b\u8bd5"}),"\n",(0,i.jsx)(n.h1,{id:"\u4e8c\u5220\u9664",children:"\u4e8c\u3001\u5220\u9664"}),"\n",(0,i.jsx)(n.h2,{id:"1\u5b9a\u4e49api-1",children:"1\u3001\u5b9a\u4e49api"}),"\n",(0,i.jsx)(n.p,{children:"src/api/edu/teacher.js"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"removeById(teacherId) {\n    return request({\n        url: `${api_name}/${teacherId}`,\n        method: 'delete'\n    })\n}\n"})}),"\n",(0,i.jsx)(n.h2,{id:"2\u5b9a\u4e49methods",children:"2\u3001\u5b9a\u4e49methods"}),"\n",(0,i.jsx)(n.p,{children:"src/views/edu/teacher/list.vue"}),"\n",(0,i.jsx)(n.p,{children:"\u4f7f\u7528MessageBox \u5f39\u6846\u7ec4\u4ef6"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"removeDataById(id) {\n    // debugger\n    // console.log(memberId)\n    this.$confirm('\u6b64\u64cd\u4f5c\u5c06\u6c38\u4e45\u5220\u9664\u8be5\u8bb0\u5f55, \u662f\u5426\u7ee7\u7eed?', '\u63d0\u793a', {\n        confirmButtonText: '\u786e\u5b9a',\n        cancelButtonText: '\u53d6\u6d88',\n        type: 'warning'\n    }).then(() => {\n        return teacher.removeById(id)\n    }).then(() => {\n        this.fetchData()\n        this.$message({\n            type: 'success',\n            message: '\u5220\u9664\u6210\u529f!'\n        })\n    }).catch((response) => { // \u5931\u8d25\n        if (response === 'cancel') {\n            this.$message({\n                type: 'info',\n                message: '\u5df2\u53d6\u6d88\u5220\u9664'\n            })\n        } else {\n            this.$message({\n                type: 'error',\n                message: '\u5220\u9664\u5931\u8d25'\n            })\n        }\n    })\n}\n"})})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}}}]);