"use strict";(self.webpackChunkmdviewer=self.webpackChunkmdviewer||[]).push([[5770],{17249:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>l,contentTitle:()=>r,default:()=>h,frontMatter:()=>s,metadata:()=>d,toc:()=>a});const d=JSON.parse('{"id":"\u8c37\u7c92\u5b66\u9662\u5728\u7ebf\u6559\u80b2\u9879\u76ee/day08/05-\u8bfe\u65f6\u7ba1\u7406\u524d\u7aef\u5f00\u53d1","title":"05-\u8bfe\u65f6\u7ba1\u7406\u524d\u7aef\u5f00\u53d1","description":"\u521b\u5efavideo.js","source":"@site/docs/\u8c37\u7c92\u5b66\u9662\u5728\u7ebf\u6559\u80b2\u9879\u76ee/day08/05-\u8bfe\u65f6\u7ba1\u7406\u524d\u7aef\u5f00\u53d1.md","sourceDirName":"\u8c37\u7c92\u5b66\u9662\u5728\u7ebf\u6559\u80b2\u9879\u76ee/day08","slug":"/\u8c37\u7c92\u5b66\u9662\u5728\u7ebf\u6559\u80b2\u9879\u76ee/day08/05-\u8bfe\u65f6\u7ba1\u7406\u524d\u7aef\u5f00\u53d1","permalink":"/mdviewer/docs/\u8c37\u7c92\u5b66\u9662\u5728\u7ebf\u6559\u80b2\u9879\u76ee/day08/05-\u8bfe\u65f6\u7ba1\u7406\u524d\u7aef\u5f00\u53d1","draft":false,"unlisted":false,"editUrl":"https://github.com/hello-github-ui/mdviewer/edit/master/docs/\u8c37\u7c92\u5b66\u9662\u5728\u7ebf\u6559\u80b2\u9879\u76ee/day08/05-\u8bfe\u65f6\u7ba1\u7406\u524d\u7aef\u5f00\u53d1.md","tags":[{"inline":true,"label":"\u5c1a\u7845\u8c37","permalink":"/mdviewer/docs/tags/\u5c1a\u7845\u8c37"}],"version":"current","sidebarPosition":5,"frontMatter":{"id":"05-\u8bfe\u65f6\u7ba1\u7406\u524d\u7aef\u5f00\u53d1","title":"05-\u8bfe\u65f6\u7ba1\u7406\u524d\u7aef\u5f00\u53d1","tags":["\u5c1a\u7845\u8c37"]},"sidebar":"tutorialSidebar","previous":{"title":"04-\u8bfe\u65f6\u7ba1\u7406\u540e\u7aef\u5f00\u53d1","permalink":"/mdviewer/docs/\u8c37\u7c92\u5b66\u9662\u5728\u7ebf\u6559\u80b2\u9879\u76ee/day08/04-\u8bfe\u65f6\u7ba1\u7406\u540e\u7aef\u5f00\u53d1"},"next":{"title":"06-\u8bfe\u7a0b\u6700\u7ec8\u53d1\u5e03\u524d\u7aef","permalink":"/mdviewer/docs/\u8c37\u7c92\u5b66\u9662\u5728\u7ebf\u6559\u80b2\u9879\u76ee/day08/06-\u8bfe\u7a0b\u6700\u7ec8\u53d1\u5e03\u524d\u7aef"}}');var t=i(74848),o=i(28453);const s={id:"05-\u8bfe\u65f6\u7ba1\u7406\u524d\u7aef\u5f00\u53d1",title:"05-\u8bfe\u65f6\u7ba1\u7406\u524d\u7aef\u5f00\u53d1",tags:["\u5c1a\u7845\u8c37"]},r="\u4e00\u3001\u5b9a\u4e49api",l={},a=[{value:"1\u3001\u5b9a\u4e49data\u6570\u636e",id:"1\u5b9a\u4e49data\u6570\u636e",level:2},{value:"2\u3001\u6dfb\u52a0\u8bfe\u65f6\u6309\u94ae",id:"2\u6dfb\u52a0\u8bfe\u65f6\u6309\u94ae",level:2},{value:"3\u3001\u8bfe\u65f6\u8868\u5355dialog",id:"3\u8bfe\u65f6\u8868\u5355dialog",level:2},{value:"4\u3001\u6dfb\u52a0\u8bfe\u65f6methods",id:"4\u6dfb\u52a0\u8bfe\u65f6methods",level:2},{value:"1\u3001\u7f16\u8f91\u8bfe\u65f6\u6309\u94ae",id:"1\u7f16\u8f91\u8bfe\u65f6\u6309\u94ae",level:2},{value:"2\u3001\u5b9a\u4e49\u7f16\u8f91\u65b9\u6cd5",id:"2\u5b9a\u4e49\u7f16\u8f91\u65b9\u6cd5",level:2},{value:"3\u3001\u5b9a\u4e49\u66f4\u65b0\u65b9\u6cd5",id:"3\u5b9a\u4e49\u66f4\u65b0\u65b9\u6cd5",level:2},{value:"1\u3001\u6309\u94ae",id:"1\u6309\u94ae",level:2},{value:"2\u3001\u5b9a\u4e49\u5220\u9664\u65b9\u6cd5",id:"2\u5b9a\u4e49\u5220\u9664\u65b9\u6cd5",level:2}];function c(e){const n={code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,o.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"\u4e00\u5b9a\u4e49api",children:"\u4e00\u3001\u5b9a\u4e49api"})}),"\n",(0,t.jsx)(n.p,{children:"\u521b\u5efavideo.js"}),"\n",(0,t.jsx)(n.p,{children:"\u53c2\u8003course.js"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"import request from '@/utils/request'\n\nconst api_name = '/admin/edu/video'\n\nexport default {\n\n  saveVideoInfo(videoInfo) {\n    return request({\n      url: `${api_name}/save-video-info`,\n      method: 'post',\n      data: videoInfo\n    })\n  },\n\n  getVideoInfoById(id) {\n    return request({\n      url: `${api_name}/video-info/${id}`,\n      method: 'get'\n    })\n  },\n\n  updateVideoInfoById(videoInfo) {\n    return request({\n      url: `${api_name}/update-video-info/${videoInfo.id}`,\n      method: 'put',\n      data: videoInfo\n    })\n  },\n\n  removeById(id) {\n    return request({\n      url: `${api_name}/${id}`,\n      method: 'delete'\n    })\n  }\n}\n"})}),"\n",(0,t.jsx)(n.h1,{id:"\u4e8c\u65b0\u589e\u8bfe\u65f6\u9875\u9762\u529f\u80fd",children:"\u4e8c\u3001\u65b0\u589e\u8bfe\u65f6\u9875\u9762\u529f\u80fd"}),"\n",(0,t.jsx)(n.h2,{id:"1\u5b9a\u4e49data\u6570\u636e",children:"1\u3001\u5b9a\u4e49data\u6570\u636e"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"saveVideoBtnDisabled: false, // \u8bfe\u65f6\u6309\u94ae\u662f\u5426\u7981\u7528\ndialogVideoFormVisible: false, // \u662f\u5426\u663e\u793a\u8bfe\u65f6\u8868\u5355\nchapterId: '', // \u8bfe\u65f6\u6240\u5728\u7684\u7ae0\u8282id\nvideo: {// \u8bfe\u65f6\u5bf9\u8c61\n  title: '',\n  sort: 0,\n  free: 0,\n  videoSourceId: ''\n},\n"})}),"\n",(0,t.jsx)(n.h2,{id:"2\u6dfb\u52a0\u8bfe\u65f6\u6309\u94ae",children:"2\u3001\u6dfb\u52a0\u8bfe\u65f6\u6309\u94ae"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'<el-button type="text" @click="dialogVideoFormVisible = true; chapterId = chapter.id">\u6dfb\u52a0\u8bfe\u65f6</el-button>\n'})}),"\n",(0,t.jsx)(n.h2,{id:"3\u8bfe\u65f6\u8868\u5355dialog",children:"3\u3001\u8bfe\u65f6\u8868\u5355dialog"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'\x3c!-- \u6dfb\u52a0\u548c\u4fee\u6539\u8bfe\u65f6\u8868\u5355 --\x3e\n<el-dialog :visible.sync="dialogVideoFormVisible" title="\u6dfb\u52a0\u8bfe\u65f6">\n  <el-form :model="video" label-width="120px">\n    <el-form-item label="\u8bfe\u65f6\u6807\u9898">\n      <el-input v-model="video.title"/>\n    </el-form-item>\n    <el-form-item label="\u8bfe\u65f6\u6392\u5e8f">\n      <el-input-number v-model="video.sort" :min="0" controls-position="right"/>\n    </el-form-item>\n    <el-form-item label="\u662f\u5426\u514d\u8d39">\n      <el-radio-group v-model="video.free">\n        <el-radio :label="true">\u514d\u8d39</el-radio>\n        <el-radio :label="false">\u9ed8\u8ba4</el-radio>\n      </el-radio-group>\n    </el-form-item>\n    <el-form-item label="\u4e0a\u4f20\u89c6\u9891">\n      \x3c!-- TODO --\x3e\n    </el-form-item>\n  </el-form>\n  <div slot="footer" class="dialog-footer">\n    <el-button @click="dialogVideoFormVisible = false">\u53d6 \u6d88</el-button>\n    <el-button :disabled="saveVideoBtnDisabled" type="primary" @click="saveOrUpdateVideo">\u786e \u5b9a</el-button>\n  </div>\n</el-dialog>\n'})}),"\n",(0,t.jsx)(n.h2,{id:"4\u6dfb\u52a0\u8bfe\u65f6methods",children:"4\u3001\u6dfb\u52a0\u8bfe\u65f6methods"}),"\n",(0,t.jsx)(n.p,{children:"\u5f15\u5165video\u6a21\u5757"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"import video from '@/api/edu/video'\n"})}),"\n",(0,t.jsx)(n.p,{children:"\u65b9\u6cd5\u7684\u5b9a\u4e49"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"saveOrUpdateVideo() {\n  this.saveVideoBtnDisabled = true\n  if (!this.video.id) {\n    this.saveDataVideo()\n  } else {\n    this.updateDataVideo()\n  }\n},\n\nsaveDataVideo() {\n  this.video.courseId = this.courseId\n  this.video.chapterId = this.chapterId\n  video.saveVideoInfo(this.video).then(response => {\n    this.$message({\n      type: 'success',\n      message: '\u4fdd\u5b58\u6210\u529f!'\n    })\n    this.helpSaveVideo()\n  })\n},\n\nupdateDataVideo() {\n\n},\n\nhelpSaveVideo() {\n  this.dialogVideoFormVisible = false// \u5982\u679c\u4fdd\u5b58\u6210\u529f\u5219\u5173\u95ed\u5bf9\u8bdd\u6846\n  this.fetchChapterNestedListByCourseId()// \u5237\u65b0\u5217\u8868\n  this.video.title = ''// \u91cd\u7f6e\u7ae0\u8282\u6807\u9898\n  this.video.sort = 0// \u91cd\u7f6e\u7ae0\u8282\u6807\u9898\n  this.video.videoSourceId = ''// \u91cd\u7f6e\u89c6\u9891\u8d44\u6e90id\n  this.saveVideoBtnDisabled = false\n},\n"})}),"\n",(0,t.jsx)(n.h1,{id:"\u4e09\u4fee\u6539\u8bfe\u65f6\u4fe1\u606f",children:"\u4e09\u3001\u4fee\u6539\u8bfe\u65f6\u4fe1\u606f"}),"\n",(0,t.jsx)(n.h2,{id:"1\u7f16\u8f91\u8bfe\u65f6\u6309\u94ae",children:"1\u3001\u7f16\u8f91\u8bfe\u65f6\u6309\u94ae"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'<el-button type="text" @click="editVideo(video.id)">\u7f16\u8f91</el-button>\n'})}),"\n",(0,t.jsx)(n.h2,{id:"2\u5b9a\u4e49\u7f16\u8f91\u65b9\u6cd5",children:"2\u3001\u5b9a\u4e49\u7f16\u8f91\u65b9\u6cd5"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"editVideo(videoId) {\n  this.dialogVideoFormVisible = true\n  video.getVideoInfoById(videoId).then(response => {\n    this.video = response.data.item\n  })\n},\n"})}),"\n",(0,t.jsx)(n.h2,{id:"3\u5b9a\u4e49\u66f4\u65b0\u65b9\u6cd5",children:"3\u3001\u5b9a\u4e49\u66f4\u65b0\u65b9\u6cd5"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"updateDataVideo() {\n  video.updateVideoInfoById(this.video).then(response => {\n    this.$message({\n      type: 'success',\n      message: '\u4fee\u6539\u6210\u529f!'\n    })\n    this.helpSaveVideo()\n  })\n},\n"})}),"\n",(0,t.jsx)(n.h1,{id:"\u56db\u5220\u9664\u8bfe\u65f6",children:"\u56db\u3001\u5220\u9664\u8bfe\u65f6"}),"\n",(0,t.jsx)(n.h2,{id:"1\u6309\u94ae",children:"1\u3001\u6309\u94ae"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'<el-button type="text" @click="removeVideo(video.id)">\u5220\u9664</el-button>\n'})}),"\n",(0,t.jsx)(n.h2,{id:"2\u5b9a\u4e49\u5220\u9664\u65b9\u6cd5",children:"2\u3001\u5b9a\u4e49\u5220\u9664\u65b9\u6cd5"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"removeVideo(videoId) {\n  this.$confirm('\u6b64\u64cd\u4f5c\u5c06\u6c38\u4e45\u5220\u9664\u8be5\u8bb0\u5f55, \u662f\u5426\u7ee7\u7eed?', '\u63d0\u793a', {\n    confirmButtonText: '\u786e\u5b9a',\n    cancelButtonText: '\u53d6\u6d88',\n    type: 'warning'\n  }).then(() => {\n    return video.removeById(videoId)\n  }).then(() => {\n    this.fetchChapterNestedListByCourseId()// \u5237\u65b0\u5217\u8868\n    this.$message({\n      type: 'success',\n      message: '\u5220\u9664\u6210\u529f!'\n    })\n  }).catch((response) => { // \u5931\u8d25\n    if (response === 'cancel') {\n      this.$message({\n        type: 'info',\n        message: '\u5df2\u53d6\u6d88\u5220\u9664'\n      })\n    }\n  })\n}\n"})})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}},28453:(e,n,i)=>{i.d(n,{R:()=>s,x:()=>r});var d=i(96540);const t={},o=d.createContext(t);function s(e){const n=d.useContext(o);return d.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:s(e.components),d.createElement(o.Provider,{value:n},e.children)}}}]);