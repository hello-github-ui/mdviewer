"use strict";(self.webpackChunkmdviewer=self.webpackChunkmdviewer||[]).push([[2993],{6378:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>p,contentTitle:()=>c,default:()=>m,frontMatter:()=>a,metadata:()=>i,toc:()=>l});const i=JSON.parse('{"id":"\u4e2a\u4eba\u535a\u5ba2/Spring AOP\u5b66\u4e60\uff08\u4e8c\uff09","title":"Spring AOP\u5b66\u4e60\uff08\u4e8c\uff09","description":"\u524d\u8a00","source":"@site/docs/\u4e2a\u4eba\u535a\u5ba2/Spring AOP\u5b66\u4e60\uff08\u4e8c\uff09.md","sourceDirName":"\u4e2a\u4eba\u535a\u5ba2","slug":"/\u4e2a\u4eba\u535a\u5ba2/Spring AOP\u5b66\u4e60\uff08\u4e8c\uff09","permalink":"/mdviewer/docs/\u4e2a\u4eba\u535a\u5ba2/Spring AOP\u5b66\u4e60\uff08\u4e8c\uff09","draft":false,"unlisted":false,"editUrl":"https://github.com/hello-github-ui/mdviewer/edit/master/docs/\u4e2a\u4eba\u535a\u5ba2/Spring AOP\u5b66\u4e60\uff08\u4e8c\uff09.md","tags":[{"inline":true,"label":"\u4e2a\u4eba\u535a\u5ba2","permalink":"/mdviewer/docs/tags/\u4e2a\u4eba\u535a\u5ba2"}],"version":"current","frontMatter":{"id":"Spring AOP\u5b66\u4e60\uff08\u4e8c\uff09","title":"Spring AOP\u5b66\u4e60\uff08\u4e8c\uff09","tags":["\u4e2a\u4eba\u535a\u5ba2"]},"sidebar":"tutorialSidebar","previous":{"title":"Socket\u7f16\u7a0b\u5b66\u4e60-\u4e8c","permalink":"/mdviewer/docs/\u4e2a\u4eba\u535a\u5ba2/Socket\u7f16\u7a0b\u5b66\u4e60-\u4e8c"},"next":{"title":"SpringBoot\u7a0b\u5e8f\u7684\u90e8\u7f72\u53ca\u8fd0\u884c","permalink":"/mdviewer/docs/\u4e2a\u4eba\u535a\u5ba2/SpringBoot\u7a0b\u5e8f\u7684\u90e8\u7f72\u53ca\u8fd0\u884c"}}');var o=t(74848),r=t(28453);const a={id:"Spring AOP\u5b66\u4e60\uff08\u4e8c\uff09",title:"Spring AOP\u5b66\u4e60\uff08\u4e8c\uff09",tags:["\u4e2a\u4eba\u535a\u5ba2"]},c=void 0,p={},l=[{value:"\u524d\u8a00",id:"\u524d\u8a00",level:2},{value:"\u5b9a\u4e49\u6ce8\u89e3",id:"\u5b9a\u4e49\u6ce8\u89e3",level:2},{value:"\u5b9a\u4e49\u5207\u9762Aspect",id:"\u5b9a\u4e49\u5207\u9762aspect",level:2},{value:"\u539f\u5148\u7684\u4e1a\u52a1\u4ee3\u7801\u5c42",id:"\u539f\u5148\u7684\u4e1a\u52a1\u4ee3\u7801\u5c42",level:2},{value:"\u8c03\u7528",id:"\u8c03\u7528",level:2},{value:"\u8fd0\u884c\u7ed3\u679c",id:"\u8fd0\u884c\u7ed3\u679c",level:2}];function s(e){const n={blockquote:"blockquote",code:"code",h2:"h2",img:"img",p:"p",pre:"pre",...(0,r.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.h2,{id:"\u524d\u8a00",children:"\u524d\u8a00"}),"\n",(0,o.jsx)(n.p,{children:"\u6211\u4eec\u901a\u5e38\u5728\u5b9e\u9645\u5f00\u53d1\u4e2d\u6709\u8fd9\u6837\u7684\u9700\u6c42\u573a\u666f\uff1a\u6211\u9700\u8981\u5728\u4e0d\u6539\u52a8\u539f\u5148\u7684\u4e1a\u52a1\u4ee3\u7801\u573a\u666f\u4e0b\uff0c\u5b9e\u73b0\u4e00\u4e9b\u989d\u5916\u7684\u529f\u80fd\uff0c\u6bd4\u5982\u6211\u8ba1\u7b97\u4e00\u4e0b\u6267\u884c\u67d0\u4e9b\u4ee3\u7801\u8017\u65f6\u591a\u4e45\u554a\uff0c\u6211\u589e\u52a0\u4e00\u4e9b\u989d\u5916\u7684\u65e5\u5fd7\u8f93\u51fa\u554a\uff0c\u7b49\u7b49\u3002\u3002\u3002\n\u90a3\u4e48\u6211\u4eec\u600e\u4e48\u5b9e\u73b0\u5462\uff1f\u8fd9\u4e2a\u65f6\u5019\u5c31\u53ef\u4ee5\u7528\u5230\u6211\u4eec\u7684 AOP \u4e86\u3002\n\u800c AOP \u7684\u5207\u9762\u5462\uff0c\u53ef\u4ee5\u662f\u67d0\u4e2a\u7c7b\u4e0b\u9762\u7684\u67d0\u4e2a\u65b9\u6cd5\uff0c\u4e5f\u53ef\u4ee5\u662f\u67d0\u4e2a\u5305\u4e0b\u9762\u7684\u6240\u6709\u65b9\u6cd5\uff0c\u8fd8\u53ef\u4ee5\u662f\u51e1\u662f\u4f7f\u7528\u5230\u67d0\u4e2a\u6ce8\u89e3\u7684\u5730\u65b9\u7b49\uff0c\u4e0b\u9762\u5462\u6211\u4eec\u5c31\u8ba9 AOP \u53bb\u5207\u51e1\u662f\u4f7f\u7528\u4e86\u67d0\u4e2a\u6ce8\u89e3\u7684\u5730\u65b9"}),"\n",(0,o.jsx)(n.h2,{id:"\u5b9a\u4e49\u6ce8\u89e3",children:"\u5b9a\u4e49\u6ce8\u89e3"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:"package com.example.springaopdemo.annotation;\n\nimport java.lang.annotation.ElementType;\nimport java.lang.annotation.Retention;\nimport java.lang.annotation.RetentionPolicy;\nimport java.lang.annotation.Target;\n\n@Target(ElementType.METHOD)\n@Retention(RetentionPolicy.RUNTIME)\npublic @interface CalculateExecuteTime{\n    // \u8be5\u6ce8\u89e3\u6ca1\u6709\u81ea\u8eab\u5c5e\u6027\u7684\u5b9a\u4e49\n}\n"})}),"\n",(0,o.jsx)(n.h2,{id:"\u5b9a\u4e49\u5207\u9762aspect",children:"\u5b9a\u4e49\u5207\u9762Aspect"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:'package com.example.springaopdemo.aspect;\n\nimport org.aspectj.lang.ProceedingJoinPoint;\nimport org.aspectj.lang.annotation.Around;\nimport org.aspectj.lang.annotation.Aspect;\nimport org.springframework.stereotype.Component;\n\n/**\n * \u5207\u9762\uff1a\u901a\u8fc7 @Aspect \u6765\u6ce8\u89e3 \u5207\u9762\n */\n@Aspect\n@Component\npublic class CalculateExecuteTimeAspect{\n\n    // \u5728\u8fde\u63a5\u70b9\u5904\u8981\u771f\u6b63\u6267\u884c\u7684\u4ee3\u7801\uff0c\u5373\u4f60\u8981\u5b9e\u73b0\u7684\u989d\u5916\u529f\u80fd\uff0c\u6b64\u5904\u662f\u4e00\u4e2a\u8ba1\u7b97\u8017\u65f6\u7684\u529f\u80fd\n    // @Around \u73af\u7ed5\u4e0a\u9762\u7684\u81ea\u5b9a\u4e49\u6ce8\u89e3\n    @Around("@annotation(com.example.springaopdemo.annotation.CalculateExecuteTime)")\n    public Object logExecutionTime(ProceedingJoinPoint joinPoint) throws Throwable {\n\n        long start = System.currentTimeMillis();\n        Object proceed = joinPoint.proceed();   // \u539f\u4e1a\u52a1\u4ee3\u7801\u7ee7\u7eed\u539f\u6765\u7684\u8c03\u7528\u6267\u884c\n        long executionTime = System.currentTimeMillis() - start;\n        System.out.println(joinPoint.getSignature() + " \u6267\u884c\u4e86 " + executionTime + "ms");\n        return proceed;\n    }\n}\n'})}),"\n",(0,o.jsx)(n.h2,{id:"\u539f\u5148\u7684\u4e1a\u52a1\u4ee3\u7801\u5c42",children:"\u539f\u5148\u7684\u4e1a\u52a1\u4ee3\u7801\u5c42"}),"\n",(0,o.jsx)(n.p,{children:"\u8fd9\u91cc\u6211\u4eec\u6a21\u62df\u4e00\u4e0b\u539f\u5148\u7684\u4e1a\u52a1\u4ee3\u7801\uff0c\u5e76\u5728\u6b64\u5904\u4f7f\u7528\u5230\u4e0a\u9762\u7684\u81ea\u5b9a\u4e49\u6ce8\u89e3"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:'package com.example.springaopdemo.test;\n\nimport com.example.springaopdemo.annotation.CalculateExecuteTime;\nimport org.springframework.stereotype.Service;\nimport java.util.Hashtable;\nimport java.util.Map;\n\n@Service\npublic class TestService {\n\n    @CalculateExecuteTime   // \u53ea\u9700\u8981\u5728\u539f\u5148\u7684\u4e1a\u52a1\u4ee3\u7801\u4e0a\u9762\u4f7f\u7528\u4e0a\u9762\u7684\u81ea\u5b9a\u4e49\u6ce8\u89e3\u5373\u53ef\n    public void share(){\n        Map<String, Object> map = new Hashtable<>();\n        for (int i = 0; i < 100000; i++) {\n            map.put(i + "", i + 1);\n        }\n    }\n}\n'})}),"\n",(0,o.jsx)(n.h2,{id:"\u8c03\u7528",children:"\u8c03\u7528"}),"\n",(0,o.jsx)(n.p,{children:"\u56e0\u4e3a\u6211\u4eec\u8fd9\u91cc\u6ca1\u6709\u4e00\u4e2a\u5b8c\u6574\u7684dao\uff0cservice\uff0ccontroller\u5c42\u4e1a\u52a1\u4ee3\u7801\uff0c\u6240\u4ee5\u53ea\u80fd\u91c7\u7528\u5982\u4e0b\u65b9\u5f0f\u6d4b\u8bd5\u4e00\u4e0b\u6548\u679c\n\u5728\u6211\u4eec\u7684spring boot \u542f\u52a8\u7c7b\u4e2d\u83b7\u53d6  service bean\u6765\u8c03\u7528"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:"package com.example.springaopdemo;\n\nimport com.example.springaopdemo.test.TestService;\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\nimport org.springframework.context.ApplicationContext;\n\n@SpringBootApplication\npublic class SpringAopDemoApplication {\n\n    public static void main(String[] args) {\n        ApplicationContext applicationContext = SpringApplication.run(SpringAopDemoApplication.class, args);\n        TestService testService = applicationContext.getBean(TestService.class);\n        testService.share();\n    }\n\n}\n"})}),"\n",(0,o.jsx)(n.h2,{id:"\u8fd0\u884c\u7ed3\u679c",children:"\u8fd0\u884c\u7ed3\u679c"}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.img,{src:"https://img.imgdb.cn/item/606970d48322e6675c50da2f.jpg",alt:""})}),"\n",(0,o.jsxs)(n.blockquote,{children:["\n",(0,o.jsx)(n.p,{children:"\u53ef\u4ee5\u770b\u5230\u6b63\u5982\u6211\u4eec\u9884\u671f\u7684\u90a3\u6837\uff0c\u8f93\u51fa\u4e86\u539f\u5148\u4e1a\u52a1\u4ee3\u7801\u7684\u6267\u884c\u8017\u65f6\u65f6\u95f4"}),"\n"]})]})}function m(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(s,{...e})}):s(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>a,x:()=>c});var i=t(96540);const o={},r=i.createContext(o);function a(e){const n=i.useContext(r);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:a(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);