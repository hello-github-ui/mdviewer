<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-Vue3入门到实战/Vue3快速上手" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.8.1">
<title data-rh="true">1. Vue3简介 | 我的文档站</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://hello-github-ui.github.io/mdviewer/docs/Vue3入门到实战/Vue3快速上手"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="1. Vue3简介 | 我的文档站"><meta data-rh="true" name="description" content="- 2020年9月18日，Vue.js发布版3.0版本，代号：One Piece（n"><meta data-rh="true" property="og:description" content="- 2020年9月18日，Vue.js发布版3.0版本，代号：One Piece（n"><link data-rh="true" rel="icon" href="/mdviewer/system/logo.png"><link data-rh="true" rel="canonical" href="https://hello-github-ui.github.io/mdviewer/docs/Vue3入门到实战/Vue3快速上手"><link data-rh="true" rel="alternate" href="https://hello-github-ui.github.io/mdviewer/docs/Vue3入门到实战/Vue3快速上手" hreflang="en"><link data-rh="true" rel="alternate" href="https://hello-github-ui.github.io/mdviewer/docs/Vue3入门到实战/Vue3快速上手" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://USTSQRVOIC-dsn.algolia.net" crossorigin="anonymous"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"1. Vue3简介","item":"https://hello-github-ui.github.io/mdviewer/docs/Vue3入门到实战/Vue3快速上手"}]}</script><link rel="search" type="application/opensearchdescription+xml" title="我的文档站" href="/mdviewer/opensearch.xml"><link rel="stylesheet" href="/mdviewer/assets/css/styles.8ce03ad6.css">
<script src="/mdviewer/assets/js/runtime~main.78c6fca7.js" defer="defer"></script>
<script src="/mdviewer/assets/js/main.1e668351.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t="light";var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",e||t),document.documentElement.setAttribute("data-theme-choice",e||t)}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><a class="navbar__brand" href="/mdviewer/"></a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search (Command+K)"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><button style="position:fixed;top:75px;left:240px;z-index:1000;width:32px;height:32px;background:#fff;border:1px solid #eee;border-radius:50%;cursor:pointer;transition:left 0.3s;color:green" aria-label="收起侧边栏">&lt;</button><div class="sidebar-expanded" style="height:100%"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/mdviewer/docs/AI/AI">AI</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/mdviewer/docs/Docker教程/使用docker-desktop安装AlmaLinux8教程">Docker教程</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/mdviewer/docs/Git教程/Git Tutorial">Git教程</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/mdviewer/docs/Python基础/虚拟环境/01-搭建虚拟环境">Python基础</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/mdviewer/docs/Vue3入门到实战/TypeScript极速梳理">Vue3入门到实战</a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/mdviewer/docs/Vue3入门到实战/TypeScript极速梳理">Typesecirpt 极速梳理</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/mdviewer/docs/Vue3入门到实战/Vue3快速上手">1. Vue3简介</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/mdviewer/docs/intro">关于本站</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/mdviewer/docs/个人博客/AlmaLinux8安装PostgreSQL">个人博客</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/mdviewer/docs/书签/01-收藏的网站">书签</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/mdviewer/docs/油猴脚本开发教程/51CTO网站解除禁止复制">油猴脚本开发教程</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/mdviewer/docs/谷粒学院在线教育项目/day01/01-在线教育行业介绍">谷粒学院在线教育项目</a></div></li></ul></nav></div></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/mdviewer/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Vue3入门到实战</span></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">1. Vue3简介</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>1. Vue3简介</h1></header>
<ul>
<li>2020年9月18日，<code>Vue.js</code>发布版<code>3.0</code>版本，代号：<code>One Piece</code>（n</li>
<li>经历了：<a href="https://github.com/vuejs/core/commits/main" target="_blank" rel="noopener noreferrer">4800+次提交</a>、<a href="https://github.com/vuejs/rfcs/tree/master/active-rfcs" target="_blank" rel="noopener noreferrer">40+个RFC</a>、<a href="https://github.com/vuejs/vue-next/pulls?q=is%3Apr+is%3Amerged+-author%3Aapp%2Fdependabot-preview+" target="_blank" rel="noopener noreferrer">600+次PR</a>、<a href="https://github.com/vuejs/core/graphs/contributors" target="_blank" rel="noopener noreferrer">300+贡献者</a></li>
<li>官方发版地址：<a href="https://github.com/vuejs/core/releases/tag/v3.0.0" target="_blank" rel="noopener noreferrer">Release v3.0.0 One Piece · vuejs/core</a></li>
<li>截止2023年10月，最新的公开版本为：<code>3.3.4</code></li>
</ul>
<p><img decoding="async" loading="lazy" src="/mdviewer/assets/images/1695089947298-161c1b47-eb86-42fb-b1f8-d6a4fcab8ee2-0268f88ebbd4683cf37f270922267725.png" width="1851" height="1096" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="11-性能的提升">1.1. 【性能的提升】<a href="#11-性能的提升" class="hash-link" aria-label="Direct link to 1.1. 【性能的提升】" title="Direct link to 1.1. 【性能的提升】">​</a></h2>
<ul>
<li>
<p>打包大小减少<code>41%</code>。</p>
</li>
<li>
<p>初次渲染快<code>55%</code>, 更新渲染快<code>133%</code>。</p>
</li>
<li>
<p>内存减少<code>54%</code>。</p>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="12-源码的升级">1.2.【 源码的升级】<a href="#12-源码的升级" class="hash-link" aria-label="Direct link to 1.2.【 源码的升级】" title="Direct link to 1.2.【 源码的升级】">​</a></h2>
<ul>
<li>
<p>使用<code>Proxy</code>代替<code>defineProperty</code>实现响应式。</p>
</li>
<li>
<p>重写虚拟<code>DOM</code>的实现和<code>Tree-Shaking</code>。</p>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="13-拥抱typescript">1.3. 【拥抱TypeScript】<a href="#13-拥抱typescript" class="hash-link" aria-label="Direct link to 1.3. 【拥抱TypeScript】" title="Direct link to 1.3. 【拥抱TypeScript】">​</a></h2>
<ul>
<li><code>Vue3</code>可以更好的支持<code>TypeScript</code>。</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="14-新的特性">1.4. 【新的特性】<a href="#14-新的特性" class="hash-link" aria-label="Direct link to 1.4. 【新的特性】" title="Direct link to 1.4. 【新的特性】"> ​</a></h2>
<ol>
<li>
<p><code>Composition API</code>（组合<code>API</code>）：</p>
<ul>
<li>
<p><code>setup</code></p>
</li>
<li>
<p><code>ref</code>与<code>reactive</code></p>
</li>
<li>
<p><code>computed</code>与<code>watch</code></p>
<p>......</p>
</li>
</ul>
</li>
<li>
<p>新的内置组件：</p>
<ul>
<li>
<p><code>Fragment</code></p>
</li>
<li>
<p><code>Teleport</code></p>
</li>
<li>
<p><code>Suspense</code></p>
<p>......</p>
</li>
</ul>
</li>
<li>
<p>其他改变：</p>
<ul>
<li>
<p>新的生命周期钩子</p>
</li>
<li>
<p><code>data</code> 选项应始终被声明为一个函数</p>
</li>
<li>
<p>移除<code>keyCode</code>支持作为<code> v-on</code> 的修饰符</p>
<p>......</p>
</li>
</ul>
</li>
</ol>
<h1>2. 创建Vue3工程</h1>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="21-基于-vue-cli-创建">2.1. 【基于 vue-cli 创建】<a href="#21-基于-vue-cli-创建" class="hash-link" aria-label="Direct link to 2.1. 【基于 vue-cli 创建】" title="Direct link to 2.1. 【基于 vue-cli 创建】">​</a></h2>
<p>点击查看<a href="https://cli.vuejs.org/zh/guide/creating-a-project.html#vue-create" target="_blank" rel="noopener noreferrer">官方文档</a></p>
<blockquote>
<p>备注：目前<code>vue-cli</code>已处于维护模式，官方推荐基于 <code>Vite</code> 创建项目。</p>
</blockquote>
<div class="language-powershell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-powershell codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">## 查看@vue/cli版本，确保@vue/cli版本在4.5.0以上</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">vue --version</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">## 安装或者升级你的@vue/cli </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">npm install -g @vue/cli</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">## 执行创建命令</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">vue create vue_test</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">##  随后选择3.x</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">##  Choose a version of Vue.js that you want to start the project with (Use arrow keys)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">##  &gt; 3.x</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">##    2.x</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">## 启动</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">cd vue_test</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">npm run serve</span><br></span></code></pre></div></div>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="22-基于-vite-创建推荐">2.2. 【基于 vite 创建】(推荐)<a href="#22-基于-vite-创建推荐" class="hash-link" aria-label="Direct link to 2.2. 【基于 vite 创建】(推荐)" title="Direct link to 2.2. 【基于 vite 创建】(推荐)">​</a></h2>
<p><code>vite</code> 是新一代前端  构建工具，官网地址：<a href="https://vitejs.cn/" target="_blank" rel="noopener noreferrer">https://vitejs.cn</a>，<code>vite</code>的优势如下：</p>
<ul>
<li>轻量快速的热重载（<code>HMR</code>），能实现极速的服务启动。</li>
<li>对 <code>TypeScript</code>、<code>JSX</code>、<code>CSS</code> 等支持开箱即用。</li>
<li>真正的按需编译，不再等待整个应用编译完成。</li>
<li><code>webpack</code>构建 与 <code>vite</code>构建对比图如下：
<img decoding="async" loading="lazy" src="/mdviewer/assets/images/1683167182037-71c78210-8217-4e7d-9a83-e463035efbbe-90e1f3dcc61d168ef10034a0c0acf30f.png" width="1798" height="1003" class="img_ev3q">
<img decoding="async" loading="lazy" src="/mdviewer/assets/images/1683167204081-582dc237-72bc-499e-9589-2cdfd452e62f-c8eb0c61c4b0240d92afa97d4f362049.png" width="1789" height="1007" class="img_ev3q"></li>
</ul>
<ul>
<li>具体操作如下（点击查看<a href="https://cn.vuejs.org/guide/quick-start.html#creating-a-vue-application" target="_blank" rel="noopener noreferrer">官方文档</a>）</li>
</ul>
<div class="language-powershell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-powershell codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">## 1.创建命令</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">npm create vue@latest</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">## 2.具体配置</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">## 配置项目名称</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">√ Project name: vue3_test</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">## 是否添加TypeScript支持</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">√ Add TypeScript?  Yes</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">## 是否添加JSX支持</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">√ Add JSX Support?  No</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">## 是否添加路由环境</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">√ Add Vue Router for Single Page Application development?  No</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">## 是否添加pinia环境</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">√ Add Pinia for state management?  No</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">## 是否添加单元测试</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">√ Add Vitest for Unit Testing?  No</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">## 是否添加端到端测试方案</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">√ Add an End-to-End Testing Solution? » No</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">## 是否添加ESLint语法检查</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">√ Add ESLint for code quality?  Yes</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">## 是否添加Prettiert代码格式化</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">√ Add Prettier for code formatting?  No</span><br></span></code></pre></div></div>
<p>自己动手编写一个App组件</p>
<div class="language-vue codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-vue codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;template&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &lt;div class=&quot;app&quot;&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &lt;h1&gt;你好啊！&lt;/h1&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &lt;/div&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;/template&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;script lang=&quot;ts&quot;&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  export default {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    name:&#x27;App&#x27; //组件名</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;/script&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;style&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  .app {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    background-color: #ddd;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    box-shadow: 0 0 10px;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    border-radius: 10px;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    padding: 20px;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;/style&gt;</span><br></span></code></pre></div></div>
<p>安装官方推荐的<code>vscode</code>插件：</p>
<p><img decoding="async" loading="lazy" src="/mdviewer/assets/images/volar-d5a5487af2f8dd24ad1bac1f3744d8b1.png" width="910" height="238" class="img_ev3q"></p>
<p><img decoding="async" loading="lazy" src="/mdviewer/assets/images/image-20231218085906380-d99bc51f7ac66b283b59a0a5eabda322.png" width="1088" height="279" class="img_ev3q"></p>
<p>总结：</p>
<ul>
<li><code>Vite</code> 项目中，<code>index.html</code> 是项目的入口文件，在项目最外层。</li>
<li>加载<code>index.html</code>后，<code>Vite</code> 解析 <code>&lt;script type=&quot;module&quot; src=&quot;xxx&quot;&gt;</code> 指向的<code>JavaScript</code>。</li>
<li><code>Vue3</code>**中是通过 **<code>createApp</code> 函数创建一个应用实例。</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="23-一个简单的效果">2.3. 【一个简单的效果】<a href="#23-一个简单的效果" class="hash-link" aria-label="Direct link to 2.3. 【一个简单的效果】" title="Direct link to 2.3. 【一个简单的效果】">​</a></h2>
<p><code>Vue3</code>向下兼容<code>Vue2</code>语法，且<code>Vue3</code>中的模板中可以没有根标签</p>
<div class="language-vue codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-vue codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;template&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &lt;div class=&quot;person&quot;&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &lt;h2&gt;姓名：{{name}}&lt;/h2&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &lt;h2&gt;年龄：{{age}}&lt;/h2&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &lt;button @click=&quot;changeName&quot;&gt;修改名字&lt;/button&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &lt;button @click=&quot;changeAge&quot;&gt;年龄+1&lt;/button&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &lt;button @click=&quot;showTel&quot;&gt;点我查看联系方式&lt;/button&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &lt;/div&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;/template&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;script lang=&quot;ts&quot;&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  export default {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    name:&#x27;App&#x27;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    data() {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      return {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        name:&#x27;张三&#x27;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        age:18,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        tel:&#x27;13888888888&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    methods:{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      changeName(){</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        this.name = &#x27;zhang-san&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      },</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      changeAge(){</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        this.age += 1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      },</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      showTel(){</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        alert(this.tel)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;/script&gt;</span><br></span></code></pre></div></div>
<h1>3. Vue3核心语法</h1>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="31--optionsapi-与-compositionapi">3.1.  【OptionsAPI 与 CompositionAPI】<a href="#31--optionsapi-与-compositionapi" class="hash-link" aria-label="Direct link to 3.1.  【OptionsAPI 与 CompositionAPI】" title="Direct link to 3.1.  【OptionsAPI 与 CompositionAPI】">​</a></h2>
<ul>
<li><code>Vue2</code>的<code>API</code>设计是<code>Options</code>（配置）风格的。</li>
<li><code>Vue3</code>的<code>API</code>设计是<code>Composition</code>（组合）风格的。</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="options-api-的弊端">Options API 的弊端<a href="#options-api-的弊端" class="hash-link" aria-label="Direct link to Options API 的弊端" title="Direct link to Options API 的弊端">​</a></h3>
<p><code>Options</code>类型的 <code>API</code>，数据、方法、计算属性等，是分散在：<code>data</code>、<code>methods</code>、<code>computed</code>中的，若想新增或者修改一个需求，就需要分别修改：<code>data</code>、<code>methods</code>、<code>computed</code>，不便于维护和复用。</p>
<p><img decoding="async" loading="lazy" src="/mdviewer/assets/images/1696662197101-55d2b251-f6e5-47f4-b3f1-d8531bbf9279-a525745756c1cc4c67b05fc0ee80eda9.gif" width="324" height="601" class="img_ev3q">
<img decoding="async" loading="lazy" src="/mdviewer/assets/images/1696662200734-1bad8249-d7a2-423e-a3c3-ab4c110628be-5f6f77b9ca523838f4b86789e272836f.gif" width="410" height="601" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="composition-api-的优势">Composition API 的优势<a href="#composition-api-的优势" class="hash-link" aria-label="Direct link to Composition API 的优势" title="Direct link to Composition API 的优势">​</a></h3>
<p>可以用函数的方式，更加优雅的组织代码，让相关功能的代码更加有序的组织在一起。</p>
<p><img decoding="async" loading="lazy" src="/mdviewer/assets/images/1696662249851-db6403a1-acb5-481a-88e0-e1e34d2ef53a-dc08806389701afe6893fea316d6ba97.gif" width="592" height="502" class="img_ev3q">
<img decoding="async" loading="lazy" src="/mdviewer/assets/images/1696662256560-7239b9f9-a770-43c1-9386-6cc12ef1e9c0-4899dfcc3698d7bbed6b36114aadd770.gif" width="689" height="561" class="img_ev3q"></p>
<blockquote>
<p>说明：以上四张动图原创作者：大帅老猿</p>
</blockquote>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="32-拉开序幕的-setup">3.2. 【拉开序幕的 setup】<a href="#32-拉开序幕的-setup" class="hash-link" aria-label="Direct link to 3.2. 【拉开序幕的 setup】" title="Direct link to 3.2. 【拉开序幕的 setup】">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="setup-概述">setup 概述<a href="#setup-概述" class="hash-link" aria-label="Direct link to setup 概述" title="Direct link to setup 概述">​</a></h3>
<p><code>setup</code>是<code>Vue3</code>中一个新的配置项，值是一个函数，它是 <code>Composition API</code> <strong>“表演的舞台</strong><em><strong>”</strong></em>，组件中所用到的：数据、方法、计算属性、监视......等等，均配置在<code>setup</code>中。</p>
<p>特点如下：</p>
<ul>
<li><code>setup</code>函数返回的对象中的内容，可直接在模板中使用。</li>
<li><code>setup</code>中访问<code>this</code>是<code>undefined</code>。</li>
<li><code>setup</code>函数会在<code>beforeCreate</code>之前调用，它是“领先”所有钩子执行的。</li>
</ul>
<div class="language-vue codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-vue codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;template&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &lt;div class=&quot;person&quot;&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &lt;h2&gt;姓名：{{name}}&lt;/h2&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &lt;h2&gt;年龄：{{age}}&lt;/h2&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &lt;button @click=&quot;changeName&quot;&gt;修改名字&lt;/button&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &lt;button @click=&quot;changeAge&quot;&gt;年龄+1&lt;/button&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &lt;button @click=&quot;showTel&quot;&gt;点我查看联系方式&lt;/button&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &lt;/div&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;/template&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;script lang=&quot;ts&quot;&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  export default {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    name:&#x27;Person&#x27;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    setup(){</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      // 数据，原来写在data中（注意：此时的name、age、tel数据都不是响应式数据）</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      let name = &#x27;张三&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      let age = 18</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      let tel = &#x27;13888888888&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      // 方法，原来写在methods中</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      function changeName(){</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        name = &#x27;zhang-san&#x27; //注意：此时这么修改name页面是不变化的</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        console.log(name)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      function changeAge(){</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        age += 1 //注意：此时这么修改age页面是不变化的</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        console.log(age)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      function showTel(){</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        alert(tel)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      // 返回一个对象，对象中的内容，模板中可以直接使用</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      return {name,age,tel,changeName,changeAge,showTel}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;/script&gt;</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="setup-的返回值">setup 的返回值<a href="#setup-的返回值" class="hash-link" aria-label="Direct link to setup 的返回值" title="Direct link to setup 的返回值">​</a></h3>
<ul>
<li>若返回一个<strong>对象</strong>：则对象中的：属性、方法等，在模板中均可以直接使用**（重点关注）。**</li>
<li>若返回一个<strong>函数</strong>：则可以自定义渲染内容，代码如下：</li>
</ul>
<div class="language-jsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-jsx codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">setup</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword control-flow" style="font-style:italic">return</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token arrow operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;你好啊！&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="setup-与-options-api-的关系">setup 与 Options API 的关系<a href="#setup-与-options-api-的关系" class="hash-link" aria-label="Direct link to setup 与 Options API 的关系" title="Direct link to setup 与 Options API 的关系">​</a></h3>
<ul>
<li><code>Vue2</code> 的配置（<code>data</code>、<code>methos</code>......）中<strong>可以访问到</strong> <code>setup</code>中的属性、方法。</li>
<li>但在<code>setup</code>中<strong>不能访问到</strong><code>Vue2</code>的配置（<code>data</code>、<code>methos</code>......）。</li>
<li>如果与<code>Vue2</code>冲突，则<code>setup</code>优先。</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="setup-语法糖">setup 语法糖<a href="#setup-语法糖" class="hash-link" aria-label="Direct link to setup 语法糖" title="Direct link to setup 语法糖">​</a></h3>
<p><code>setup</code>函数有一个语法糖，这个语法糖，可以让我们把<code>setup</code>独立出去，代码如下：</p>
<div class="language-vue codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-vue codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;template&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &lt;div class=&quot;person&quot;&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &lt;h2&gt;姓名：{{name}}&lt;/h2&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &lt;h2&gt;年龄：{{age}}&lt;/h2&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &lt;button @click=&quot;changName&quot;&gt;修改名字&lt;/button&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &lt;button @click=&quot;changAge&quot;&gt;年龄+1&lt;/button&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &lt;button @click=&quot;showTel&quot;&gt;点我查看联系方式&lt;/button&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &lt;/div&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;/template&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;script lang=&quot;ts&quot;&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  export default {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    name:&#x27;Person&#x27;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;/script&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;!-- 下面的写法是setup语法糖 --&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;script setup lang=&quot;ts&quot;&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  console.log(this) //undefined</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  // 数据（注意：此时的name、age、tel都不是响应式数据）</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  let name = &#x27;张三&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  let age = 18</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  let tel = &#x27;13888888888&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  // 方法</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  function changName(){</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    name = &#x27;李四&#x27;//注意：此时这么修改name页面是不变化的</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  function changAge(){</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    console.log(age)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    age += 1 //注意：此时这么修改age页面是不变化的</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  function showTel(){</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    alert(tel)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;/script&gt;</span><br></span></code></pre></div></div>
<p>扩展：上述代码，还需要编写一个不写<code>setup</code>的<code>script</code>标签，去指定组件名字，比较麻烦，我们可以借助<code>vite</code>中的插件简化</p>
<ol>
<li>第一步：<code>npm i vite-plugin-vue-setup-extend -D</code></li>
<li>第二步：<code>vite.config.ts</code></li>
</ol>
<div class="language-jsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-jsx codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token keyword module" style="font-style:italic">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token imports"> defineConfig </span><span class="token imports punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token keyword module" style="font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;vite&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword module" style="font-style:italic">import</span><span class="token plain"> </span><span class="token imports maybe-class-name">VueSetupExtend</span><span class="token plain"> </span><span class="token keyword module" style="font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;vite-plugin-vue-setup-extend&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword module" style="font-style:italic">export</span><span class="token plain"> </span><span class="token keyword module" style="font-style:italic">default</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">defineConfig</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token literal-property property">plugins</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:rgb(130, 170, 255)">VueSetupExtend</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><br></span></code></pre></div></div>
<ol start="3">
<li>第三步：<code>&lt;script setup lang=&quot;ts&quot; name=&quot;Person&quot;&gt;</code></li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="33-ref-创建基本类型的响应式数据">3.3. 【ref 创建：基本类型的响应式数据】<a href="#33-ref-创建基本类型的响应式数据" class="hash-link" aria-label="Direct link to 3.3. 【ref 创建：基本类型的响应式数据】" title="Direct link to 3.3. 【ref 创建：基本类型的响应式数据】">​</a></h2>
<ul>
<li>**作用：**定义响应式变量。</li>
<li><strong>语法：</strong><code>let xxx = ref(初始值)</code>。</li>
<li>**返回值：**一个<code>RefImpl</code>的实例对象，简称<code>ref对象</code>或<code>ref</code>，<code>ref</code>对象的<code>value</code><strong>属性是响应式的</strong>。</li>
<li><strong>注意点：</strong>
<ul>
<li><code>JS</code>中操作数据需要：<code>xxx.value</code>，但模板中不需要<code>.value</code>，直接使用即可。</li>
<li>对于<code>let name = ref(&#x27;张三&#x27;)</code>来说，<code>name</code>不是响应式的，<code>name.value</code>是响应式的。</li>
</ul>
</li>
</ul>
<div class="language-vue codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-vue codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;template&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &lt;div class=&quot;person&quot;&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &lt;h2&gt;姓名：{{name}}&lt;/h2&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &lt;h2&gt;年龄：{{age}}&lt;/h2&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &lt;button @click=&quot;changeName&quot;&gt;修改名字&lt;/button&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &lt;button @click=&quot;changeAge&quot;&gt;年龄+1&lt;/button&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &lt;button @click=&quot;showTel&quot;&gt;点我查看联系方式&lt;/button&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &lt;/div&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;/template&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;script setup lang=&quot;ts&quot; name=&quot;Person&quot;&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  import {ref} from &#x27;vue&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  // name和age是一个RefImpl的实例对象，简称ref对象，它们的value属性是响应式的。</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  let name = ref(&#x27;张三&#x27;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  let age = ref(18)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  // tel就是一个普通的字符串，不是响应式的</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  let tel = &#x27;13888888888&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  function changeName(){</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    // JS中操作ref对象时候需要.value</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    name.value = &#x27;李四&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    console.log(name.value)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    // 注意：name不是响应式的，name.value是响应式的，所以如下代码并不会引起页面的更新。</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    // name = ref(&#x27;zhang-san&#x27;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  function changeAge(){</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    // JS中操作ref对象时候需要.value</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    age.value += 1 </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    console.log(age.value)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  function showTel(){</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    alert(tel)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;/script&gt;</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="34-reactive-创建对象类型的响应式数据">3.4. 【reactive 创建：对象类型的响应式数据】<a href="#34-reactive-创建对象类型的响应式数据" class="hash-link" aria-label="Direct link to 3.4. 【reactive 创建：对象类型的响应式数据】" title="Direct link to 3.4. 【reactive 创建：对象类型的响应式数据】">​</a></h2>
<ul>
<li><strong>作用：<strong>定义一个</strong>响应式对象</strong>（基本类型不要用它，要用<code>ref</code>，否则报错）</li>
<li><strong>语法：</strong><code>let 响应式对象= reactive(源对象)</code>。</li>
<li>**返回值：**一个<code>Proxy</code>的实例对象，简称：响应式对象。</li>
<li><strong>注意点：</strong><code>reactive</code>定义的响应式数据是“深层次”的。</li>
</ul>
<div class="language-vue codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-vue codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;template&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &lt;div class=&quot;person&quot;&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &lt;h2&gt;汽车信息：一台{{ car.brand }}汽车，价值{{ car.price }}万&lt;/h2&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &lt;h2&gt;游戏列表：&lt;/h2&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &lt;ul&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      &lt;li v-for=&quot;g in games&quot; :key=&quot;g.id&quot;&gt;{{ g.name }}&lt;/li&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &lt;/ul&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &lt;h2&gt;测试：{{obj.a.b.c.d}}&lt;/h2&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &lt;button @click=&quot;changeCarPrice&quot;&gt;修改汽车价格&lt;/button&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &lt;button @click=&quot;changeFirstGame&quot;&gt;修改第一游戏&lt;/button&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &lt;button @click=&quot;test&quot;&gt;测试&lt;/button&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &lt;/div&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;/template&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;script lang=&quot;ts&quot; setup name=&quot;Person&quot;&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">import { reactive } from &#x27;vue&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// 数据</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">let car = reactive({ brand: &#x27;奔驰&#x27;, price: 100 })</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">let games = reactive([</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  { id: &#x27;ahsgdyfa01&#x27;, name: &#x27;英雄联盟&#x27; },</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  { id: &#x27;ahsgdyfa02&#x27;, name: &#x27;王者荣耀&#x27; },</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  { id: &#x27;ahsgdyfa03&#x27;, name: &#x27;原神&#x27; }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">])</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">let obj = reactive({</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  a:{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    b:{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      c:{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        d:666</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">})</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">function changeCarPrice() {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  car.price += 10</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">function changeFirstGame() {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  games[0].name = &#x27;流星蝴蝶剑&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">function test(){</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  obj.a.b.c.d = 999</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;/script&gt;</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="35-ref-创建对象类型的响应式数据">3.5. 【ref 创建：对象类型的响应式数据】<a href="#35-ref-创建对象类型的响应式数据" class="hash-link" aria-label="Direct link to 3.5. 【ref 创建：对象类型的响应式数据】" title="Direct link to 3.5. 【ref 创建：对象类型的响应式数据】">​</a></h2>
<ul>
<li>其实<code>ref</code>接收的数据可以是：<strong>基本类型</strong>、<strong>对象类型</strong>。</li>
<li>若<code>ref</code>接收的是对象类型，内部其实也是调用了<code>reactive</code>函数。</li>
</ul>
<div class="language-vue codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-vue codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;template&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &lt;div class=&quot;person&quot;&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &lt;h2&gt;汽车信息：一台{{ car.brand }}汽车，价值{{ car.price }}万&lt;/h2&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &lt;h2&gt;游戏列表：&lt;/h2&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &lt;ul&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      &lt;li v-for=&quot;g in games&quot; :key=&quot;g.id&quot;&gt;{{ g.name }}&lt;/li&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &lt;/ul&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &lt;h2&gt;测试：{{obj.a.b.c.d}}&lt;/h2&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &lt;button @click=&quot;changeCarPrice&quot;&gt;修改汽车价格&lt;/button&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &lt;button @click=&quot;changeFirstGame&quot;&gt;修改第一游戏&lt;/button&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &lt;button @click=&quot;test&quot;&gt;测试&lt;/button&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &lt;/div&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;/template&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;script lang=&quot;ts&quot; setup name=&quot;Person&quot;&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">import { ref } from &#x27;vue&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// 数据</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">let car = ref({ brand: &#x27;奔驰&#x27;, price: 100 })</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">let games = ref([</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  { id: &#x27;ahsgdyfa01&#x27;, name: &#x27;英雄联盟&#x27; },</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  { id: &#x27;ahsgdyfa02&#x27;, name: &#x27;王者荣耀&#x27; },</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  { id: &#x27;ahsgdyfa03&#x27;, name: &#x27;原神&#x27; }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">])</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">let obj = ref({</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  a:{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    b:{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      c:{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        d:666</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">})</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">console.log(car)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">function changeCarPrice() {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  car.value.price += 10</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">function changeFirstGame() {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  games.value[0].name = &#x27;流星蝴蝶剑&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">function test(){</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  obj.value.a.b.c.d = 999</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;/script&gt;</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="36-ref-对比-reactive">3.6. 【ref 对比 reactive】<a href="#36-ref-对比-reactive" class="hash-link" aria-label="Direct link to 3.6. 【ref 对比 reactive】" title="Direct link to 3.6. 【ref 对比 reactive】">​</a></h2>
<p>宏观角度看：</p>
<blockquote>
<ol>
<li>
<p><code>ref</code>用来定义：<strong>基本类型数据</strong>、<strong>对象类型数据</strong>；</p>
</li>
<li>
<p><code>reactive</code>用来定义：<strong>对象类型数据</strong>。</p>
</li>
</ol>
</blockquote>
<ul>
<li>区别：</li>
</ul>
<blockquote>
<ol>
<li>
<p><code>ref</code>创建的变量必须使用<code>.value</code>（可以使用<code>volar</code>插件自动添加<code>.value</code>）。</p>
<p><img decoding="async" loading="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAlUAAAB7CAIAAADSXeKKAAAACXBIWXMAABJ0AAASdAHeZh94AAAAEXRFWHRTb2Z0d2FyZQBTbmlwYXN0ZV0Xzt0AACAASURBVHic7d15WFNn2j/wm5wkbIdASDQQIQmLLGELJC5FoShWujItVRxQaWvbS1uHC6cznU6nfdtf27Hv5ThztbTVMnahrX21KsWt1kKroGIrNSyCyGJZwhIWCUtMCIQk/P449kxERZaoU3N//oKTnOc8OTnkm2c7OIhEIkAIIYTsDONOVwAhhBC6AzD/EEII2SPMP4QQQvYI8w8hhJA9wvxDCCFkjzD/EEII2SPMP4QQQvYI8w8hhJA9wvxDCCFkjzD/EEII2SPMP4QQQvYI8w8hhJA9wvxDCCFkjzD/EEII2SPMP4QQQvYI8w8hhJA9wvxDCCFkjzD/EEII2SPMP4QQQvYI8w8hhJA9wvxDCCFkjzD/EEII2SPMP4QQQvYI8w8hhJA9wvxDCCFkjzD/EEII2SPMP4QQQvYI8w8hhJA9wvxDCCFkjzD/EEII2SPMP4QQQvYI8w8hhJA9wvxDCCFkjzD/0Ay9sqe0tLS0dM+rd7oiCCE0FUybl8jn81944QWBQGA2mw8ePHjkyBGbH2IyhEJhVlYWn8+vrKx8//3370gdpuWVPaXJkqs3GYd0vao65bfZm/c22PZgijf3b0sSAuiU7yZu3D3+0awvS9PnAuiU2Ykbd9n2wAghdKfZvv0nlUo9PT0BgCCIqKgogiCmWkJMTMwrr7zy5ptvCoVCm1fvdiJJcs2aNf/6179WrFgxk3LYLqQwVJH8p52n8ras8J3Srskvbt/z7bFvt6Vd/2HlR8oWAADSb0HyNQ9mKfwAADTVBRh+CKG7j+3zLyoqisVi9fX1mUwmgUAQHBw81RICAwP9/f0dHR1tXrfbjMPhREREeHh4MBhTPs8thxdcsWLjSx8equ40AgDbNyHrX6/ETqGYCIVcwiNvfCbbcqtUAAC8oCXjA3CTIogJAJr6Y4emWnmEEPrvZ+P8E4vFYrHYYrFUVlbqdDpXV1e5XG7bQ9idNmXxZ5ufefTpnHM6AGCL739ukw2bxerc0gYAAF7wkkeueiBLEQQAoKn/7rDtjoYQQv81bDz+FxMT4+7urtfrz549KxKJPDw8AgMDSZLU6XTUE15//XWRSGQ9JhceHr5hwwYWi7Vv376urq4NGzY4OzsDAJ/Pf+uttwCgoKBg7969ALB48eIHH3yQz+cTBGE2mwcHB0+cOHH06FGz2TyZumVmZspkst7e3sOHDy9fvtzLy8vBwaGnp2fPnj1VVVXUc8Ydoqur69NPP21paQEAoVCYmpo6d+5cJycn6qH8/PzKykoAWLZs2cqVKwHgm2++iYqKEovFKpVqcHBQJpNRxSYlJSUlJfX29u7YsWPVqlV+fn6VlZU5OTmTrDkAADTkvvXd0q9WBDHZQYqVANkAACBM2vTiugcUEg82AIDJqOtrOb3zrdf2NgDAK3tLk8XUvqRiU2npJgDVoQWpm8eVq95b1ZASFMTkBScmw2G6qXel81Nd+X8FIExan7XmYYXEk2QzAQCMAy1FO/742tfq61QzbduxTQoSWg4tWEUfKX37sSw5edXRfVe8+D+r7w8VkmwAAF2n8tCHm7MLrlcgQgjdGrZs/xEEERoaymAwenp6Ghsb6+rqLBbL7Nmz6Ri4KZPJNDQ0ZDQaAcBsNhsMBoPBMDo6CgDp6ekZGRkCgQAADAYDAHh6eiYnJz/99NNTqiRJkmlpaQKBYHR01MHBwcvLa/Xq1dRA4/Lly9esWSMQCIxGY0dHx8jICJfLJUkSAMRicVZWVkREBEEQnZ2dRqNxzpw5Tz311LjW7eLFi/38/BgMBkEQw8PDBoOBSjij0WgwGEZGRry9vYVCIYPBEIlE1GuZgratdR0AAOAdlA4AIEzfvvPNtFiJBxtMRuOQEZhscnZQ0p8+3LlJAQDGIaNxyHhlX6Pxql+vLlbZDDCuC/RK56e6+qAS4Kl16xKCZpNg1Gl6dEYTsD0kSS+888qCqVX/P3zTt3384oooIcnQaVRqnRFIb0X6q++8EjfdAhFCaOps2f6TSqXe3t4Wi6W+vt5sNtfX1yckJJAkGRYWVlJSMpkS6urq/vKXv6SmpiYlJfX392dnZ6vVagCIi4tbvHgxg8E4f/78F198odFoeDxeRkZGWFhYZGSkQqFQKpWTrKSjo+O5c+c++uij0dHR1atXx8XFcbnc6OhotVotl8tZLFZnZ+c//vEPrVZLEERcXFxfXx9BEGlpaXw+v6OjIycnR61WczicTZs2icXipKQkqgkIAEwm093dPT8//7vvvqNij56DWlRURDVhSZKMj4/38/NrbW3t7u6e6hlu7tWBmKR+Fm7a8pycBDCqT2S/9Je8BgAIXbHlrawEXzLodxueeveZrU/Gbb0ym1Sn3H6d6Z207FPVK+ZGsHnBSx6AQ0cB6M7PtupDpQAAlxsLtr71Wl4tAADEbdn/zwQhU6L4nQJKJ3varQiz/vc5hQdAZ/HWzJfy2gAg9s28d5J8JcnrX8w9tRXbgAih28OW7T+ZTObs7Dw8PNzQ0AAA9fX1Go0GAPz9/Wc4k1Mmkzk6Og4MDOTn51NlajSagoICvV7v7OwcFhY2+aIGBwe/+eab4eFhs9msVCoNBgNBEK6urgBAtTs5HE5MTAwAmM3m4uJitVotlUrnzJljMplOnjxJ5bFWq62rqwMAHo8nEonowktLS48cOTJBr6ZOp3v77befffbZbdu2TaXz8wqOI/vXH4VPxQaxAaCtaDMVfgBQm/fS50oNALgEL1o/lXL/rawfAgBecGISANCdny2VOUoAgM3PpP8afgBwal9DJwAAxyNoqvUHAPB9KnYuG0Cn3EOFHwD8+FplCwDAnOBrJ6EihNAtYrP2H5/PDw0NdXBwuHTp0oULFwCAagJSo4BRUVFUckwPtaBCo9GoVCp6Y319fX9/P0mSHA5n8kWZTKaRkRHq54GBAYPBQIUfABQXF/v4+HA4nLVr16akpJw9e/bgwYNarVYgELDZbCaTmZaWlpZ21UoCR0dHeneTydTW1jbt1zgJCj8eGwDgsq4BEhbxAAA0LaevaoIdPtu8KZZHst1mTanknNMXV0dEsXnS+5OgoIDq/DQ1KD+/8pYJ5emr1y5VzObxvflsNps9k6tmsZAP8J8hSWsubrwZFIwQQlNis/yjl/2JxeIdO3ZcdQwmUyqVHj16dIaHoNpnt05ZWVlLS0tycnJ0dLSrq2tCQkJ4ePj27dupR6k5L9RgJM1gMNBTe265uJVB3gBXMo98CgAARowam5Sde6Z+XVQEmxd8/wMQQnV+Nlf9XxsAgGLTzi1pQSQAGI26AbX6Mrh5S3guMzygUaNSXzaN29iCnZ8IodvGZvlHLfszm83jUorFYjGZTJFIJJVKqXYh/Nqeo3h7e7NYrIkLHxgYEIlEfD6fx+NR/Z8A4O/v7+7uDgBardZWr0Kj0eTm5ubm5iYlJSUnJ/P5/OXLl5eWlo6OjrLZbKp789q9AgMDbVWBG/JdseVPCUIAMLac3n0IQKjpzwIShKIlQlD+JzbiovxIADBevjTF8j89XrU6QkHyghPf5PsBgLH6ylBc0urlQSSArix77fO71AAAii0HtiXcJP/4wjSAKyOOwpDZ5H8eKdFoNwEJoD626pl/T7GSCCFkO7YZ/6OW/QFAe3t7VlbWH6wUFhZaLBYXF5fQ0FAA6OvrA4DZs2cvWrQIAIRCYVxcHJN5nRgmSdLX98rNTmpqakwm06xZs9LT052cnACAx+M9/PDDbm5uer3+3LlzNnkVKSkp9BHPnz+v1+sBgMViNTU1aTQagiDuvfdeei6rk5PTunXrHnvsscmU7OPjQ90HhyTJv/3tbx999NHGjRsne2ec0NinXt62/7MXE7wBQNdwIHtzKQCoD1FjZnOT3/l/SVcGV0NXbMmK5QGArur4VdFCCiNuumh+V0G1BgB40YuETICh+tNXSuCxHQEARnRXGmdB6zYovG9cTIm6FwCAjEzKooYHYzO3LLK+Z03boeo2AGBHpHyclUSPCget+Mf+j1++WR0RQsh2bNP+o5b9WSyWmpqacdM6ysvLY2NjPTw8IiMjCwoKKisrQ0NDnZycnnjiibS0NDab3d/fPzw8bB2B1L1jnJycnn766YyMjKKiov379wcHB8tkMplM9t577xmNRjabTRAENSeFnoE5QxEREffff79erzcYDFwul81mDw8PV1VV6XS67777Lj09ncfjbdy40Wg0jo2NURUoKCiYoMDu7m69Xs/n86VS6Xvvvdff319YWGi9/mGCMVHJI6WlVy9IB6NauXfrxvd/pH5T/j37kHRLcgBb8sCb++971WgEtgsbAMCo+TF38693LGvu1YGEBGHiO6eKjND5XVz6+PV/tEPH6jfcE8sjSRLAePF07pXNDWoNAAm8e985VWQEADZT3dID5OwblNKW++PF+yVz2ezQ9J2nVhiBzWbr1G060pduAipf+7wg4i9JQo+I9Df3r/irEQCAzWYzoQUX2iOEbiPbtP+oZX+Dg4PXrkNobm5ub28HAB6PFxIScurUqaNHj2q1WgaDwWazm5qa8vPzx8bGrHcpKioqKysbHR0lCILJZFKr6HJycg4ePEg1H6kF8iqV6vPPP8/Ly7PJSwCA1tbW4eFhkiQFAgGDwWhpafnoo4+olRs//fTTJ5980tLSYrFYnJycHB0d9Xp9SUnJsWPHJijQbDYfOHCgt7d3bGzM0dHRbDY3Nzer1WqLxTKF9Q8mo66nRXk097X0x+jwAwCAHzenP731aINGZwQmm+3CBpNOU1uc+/dn/vglHau7Nuf+qNYBALBd2GCYcKjycFH9la5lXVXRr/EHys2v5xSrdFQJbKO64N0/VhkmKEWd/XJ2QaPOaAJgs9kmtfLL/9nXM+5Ar238+64fVTqjCdgubLYLG4Y1DSdyP/18UucDIYRswsF6+j5CCCFkJ/D//yGEELJHmH8IIYTsEeYfQgghe4T5hxBCyB5h/iGEELJHmH8IIYTsEeYfQgghe4T5hxBCyB5h/iGEELJHmH8IIYTsEeYfQgghe4T5hxBCyB5h/iGEELJHmH8IIYTsEeYfQgghe2Sb//9O4XK5rq6uDMY0M9Visej1+v7+fhtWCSGEELoum+Wfl5cXi8VycHCYdgkMBoMkSUdHx66uLlvVCiGEELou2/R/crncGYYfxcHBgcVicblcm9QKIYQQuhHb5J+rq+vMw4/i4ODg6upqk6IQQgihGyHc3d1nXoqHh8fMC6E5ODgMDg7asEAEAJmZmRkZGa2trT09PXe6LpNCEMTq1avXr1//+OOP+/j4nD171lYl/5ecimeeeWb9+vUuLi41NTXXfYJQKHz11VcXLVp04sSJyRQol8v/+te/zps3r7KycmRkxFb1nGo1Jpaenv6HP/yBw+FUV1fPvDSEZsKW81/uuHnz5j355JMWi2XHjh3413VnpaamJiUl0b9aLBadTnf27Nk9e/aYzebJlPC73/0uPj6+t7dXqVTqdLpbVtM7hs1m27bAsrIyAFizZs3DDz+8a9cu2xZuK1TF5s2bV19fT1UYoTvlrsq/mJgYs9nMZDJlMtlU84/P52dkZLBYrC1bttyi6v2GJCYmLl++vKCg4Pjx4zMpp66urqOjg8Vi+fr6ent7L126lMvlbtu2bTL7SqXSkZGR3bt3361fZbZv3279q0QiWbt27aVLl3JycqZdZllZGY/He+ihh9ra2k6dOjXjOt4Se/bs8fT0TElJaWlp0Wg0d7o6yH7dPfknFovnzp178eJFLpcrlUp5PN6U/rTYbLZAIBgaGrp1NfwN4fF4Hh4e017KQlOpVHv37qV+FovFGzduDA4OlkqlFy5cmHhHPp/v4uIyNDRkP5+PJEkKBIKBgYEZllNYWFhYWGiTKt0iZrP5gw8+uNO1QOguWv8ulUqdnZ1ra2tramo4HE5YWNidrhG6ikqlamtrc3R0FAqFN30ym80mCOI21AohZLfukvYfQRDR0dFarbaiokIgEMTHx8vl8pMnT9JPyMzMDA4OzsnJOX/+PLVFKBRmZWUNDQ298cYbmZmZMpmM2v7JJ58AQEFBAdVw8fX1/f3vfy+RSJycnKY0iOXk5PT4448rFAqSJBkMhsFgKCkp+eqrrwCAx+OtXLkyLCzM2dkZAAwGw/nz53fv3q3Vaq0rVlhY+Nhjj3G5XIvFUl5e/vnnn0dHR1NbxsbGmpqavvjiC7VaDQDh4eEbNmyor69XKpWPPPIIn8+n5hAdP37822+/vdEZW7Vq1YIFC1xdXS0WS29v7+HDh3/66SeqKKpiaWlpaWlpvb292dnZarX6RrtM/m1iMBgmk4me3BQWFpaSkuLr60sQhMFgqK6upk6C9dvx1ltvmUymffv2/fDDD3Q5DzzwwKOPPlpXV/fOO+/QG8VicWZm5ujo6D//+U+9Xk+ffAcHh8uXLx8/fvzw4cPXVok+de+//z69MTU1NTEx0fqgDz744NKlS6nJYhOc2JdfftnHx+ezzz6jZ+tkZmZGRkZ+++23+/fvp7ZkZWUFBQV99tlnfn5+9FFef/11kUgEADKZ7JNPPqFeMt1KlslkKSkpXl5eDg4O/f39+/fvn9JpB4C1a9fGx8efPHly586d9EaFQvHkk0+q1eotW7YIhUL6OjebzV1dXXv27LnuxJxly5atXLny2LFjdMservn7mvmlgtBtcJfkn1Qq9fb2Pn/+vEajGRgY6O7uFovFQUFBDQ0Nk9m9oqLi8uXL0dHRIyMjlZWVAFBbWwsAcrl8zZo1rq6uzc3NKpXK2dk5PDx86dKlnp6eH3744QQRyOFwsrKyxGKxRqMpKSkZHR0ViUQcDgcAxGLxhg0b+Hx+R0dHY2Mjg8GQSqXz5s2bPXt2dnY2FYEA4Obm9vjjjzc1NdXU1ERGRioUCiaTGRgY2NHRUVlZGRAQEBgYmJGRsXXrVroaHh4eqampPT0958+fd3d3Dw8PT05ONplM1/aGEQTx3HPPRUVFqdVqpVLp6OgYGRm5du1aJpN54cKF4uJiPz+/uXPnVldXazQanU6n1Won2GWS40xyudzf37+3t5c+txkZGUwms6KiYnBwMCAgQKFQcLncrVu30m8H9dYMDw83NzdbF/Xzzz/Hx8f7+Pj4+fnRD4WHh7u5uZWUlGg0mtTU1ISEhI6OjvLyckdHR5lM9tBDDw0NDR07dmwyVR0nPT09ISGhv7+/pKQEACIjIx999FEnJ6f8/Pxxz2xoaPDz8/P396fyj8/ne3t7MxgMf39/6gl8Pl8gEGg0mtraWj8/P3rHM2fOdHR0KBSKrq6uhoYGi8VCvy43N7cnnniivb29rq5OKBQGBQWtWLGip6ensbFx8i+hrKxMoVDMnTuXJEl6MlFYWBiLxaqoqDCbzevWrfP29q6rq+vp6aGOkpGRQX3vmerpmvmlgtDtcZfkn0wmYzKZ1Aer2Wyura2VSCQRERGTzL+SkpKmpqbQ0NChoSF64hxJkg888ICzs3NeXh4dIVSwhYeHL1q0yLp9Oc6qVatEIlFlZeW1MZmcnMzj8YqKiugDUZ8XkZGR991339dff01tdHNzO3To0JEjR6hXt27duujoaLpAHo/35z//2cvLKyAggH6NPj4++fn5BQUF1K8LFizIyMhISEgoLy/v7e21rsOSJUsiIiKqqqq2b99OVU8ulz/xxBOLFy8+depUXl5eampqYGBgbW0t3QBatmzZBLvc6DyIxeL09HQWiyWRSIRC4cDAwN69e3U6HXVuHRwcPv30U2oSIEEQzz//vFQqveeee+i3AwAKCwuv/QjWaDRNTU3z58+XyWR0TkRGRhqNRurri16vt25yJScnP/zww+Hh4dPIP5lMtnDhwvb29nfffZf6dkINZCoUipMnT447sQ0NDQkJCXTahYSEkCSp1Wpnz54tFArVarWfn5+7u3tlZeW4Ga0FBQXh4eEymUyj0dAXBtVRzOFwiouLqY0EQWRlZYWGhkZGRk4p/y5cuNDV1SUSiWQyGZXifD4/ODh4YGDg3LlzANDV1ZWXl0c1+AiCeOGFFwIDA8PCwqaRfxNfXVMtDaFb524Y/+Pz+aGhoQMDA3R3TU1NzdDQUGRkJEmS0y42NDTU29u7tbXV+kNTq9X+9NNPDg4O4eHhN9pRKBQGBgb29vbu3r17XPj5+flJJBKNRkOnFACYzeYTJ06MjIxQn/iUwcFB6qMcAH755ZeBgYGRkZHS0lKqQI1G09XV5ejoOHv2bHqX7u7u06dP07+Wlpa2t7dzOJxrx9uioqJMJtOZM2fo6lVWVvb19Xl4eNxocG4auwBASEhIYmJifHz8nDlzysvLX3/9deo9os6tSqWiZ8Cbzea6ujoGgzGZ0UEAqKiooM4YNUwolUq9vLw6OzupPsMjR47Q4QcATU1NRqNxeqtUo6KinJycysrK6Ka5SqXq6OjgcDheXl7jntzc3NzX18fn86m2XUBAwOjoaHV1tZubGxWK/v7+DAajvr5+8hUYGBigF96Zzeb6+vqxsTEWizXVF1JZWclgMOhxcalU6unp2dTURCXcv//9b/rPx2w2q1QqJpM5vTsxTe9SQej2uxvaf9RfcllZGT1XsKGhoa2tzd/fPzQ0dNrrpt3d3ZlMZkdHx7gM6+rqGh0d9fT0hF/HQpjMK6eRGrbp6uqiukyvnbvo6urq6OioVqvHPaTRaIaGhtzc3AQCAbVFr9d3dHRQP+t0OrPZPDY2ZjAY6F0sFguDwXBycrIuZFyrQqfTsVgs64ykkCTp5OS0YcOGDRs2WG83GAyenp7X/co/jV3g12HUkJCQ9PR0uVze09NDxRJ1bqVSKTXaao0+AxOrqKh48MEHBQJBcHDwhQsXIiIinJycqK48ACAIYv78+QsXLqQmss5kNg2HwyEIIiUlJSUlxXq7yWTy8vKih5MpOp2uqakpNjY2ICDg0qVLAQEBarW6urpaLpcHBASUlJT4+/trtdpffvll8hUYGhqyviPuyMjI2NjYJM+StXPnziUkJEgkEmpqNJVS9PcPDoezbNmy4OBgHo/n7Ow8k7WJ07tUELr97ob8k8vlLBZr4cKFCxcuHPdQTEyMDe8bcq2ff/5ZrVbT6wQsFkt7ezs1kcFkMt26416XxWK57sbh4eFrt+v1+vLycqPRaL3RaDR2dnbeqPxp7EKpq6vbtWvX+vXr4+Pja2tr6+rqqO3U15RxT25tbZ24NIrZbK6pqUlKSgoNDW1tbZVKpX19fT///DMAcDiczMxMiUQyNDR06dKliooKi8WiUCgmU+x1jY6OlpWV6fV6643WQ3TWGhsbFy5c6Ofn193d7e7uXlFR0dzcPDg4KBaLxWIxl8vt7u6eUgaMjY1N8o4BE1Or1U1NTdHR0WFhYSqVSiwWq9XqiooKsBrn7u/v7+np6ezs5PP5E/Rw3NS0LxWEbqfffP75+fn5+PhoNBq6t5DCZDKjo6Pnzp0rFotVKhUAjGsJ8Xg8aoXZjUoeHBw0mUxz5swhCML6A4j6Txfd3d0AoNVqr13KZjQaTSaTQCDg8/njxof0ev3IyAifzx+3PJGqjFqt7u7unnYfEZfLta4qSZKzZs0aGRm59i5fRqORIIiamprJfzmYxi7W6urqzpw5k5iYeN999128eHF4eNhisZhMppncpqS8vDw2NjYsLKy9vZ3P5585c4Y6pfPnzxeJRNbjT5GRkXK5fIKixt0F0Lp1NTw8zGAw1Go1NRZ7U3V1df39/b6+vnq93mKx1NTU9Pb2Njc3h4WFRUREuLi40PF/+5WXl0dGRkZFRbm5ubm6uh47dow6P7GxsS4uLl9//TXdLZ+enj5x/vH5fPpngiCse0pneKkgdNv85sf/YmJiOBxOTU3Nrqt98cUXra2tbm5uUqkUAKgZjFTLjCKXy6lZ/tZcXFzoz77a2tre3l6RSJSYmEg/gcPh3HPPPdRg1Y2q1NjY2Nrayufzly9fPu6h5ubm9vZ2Ho9nfW8wgiDuvfdeR0fHKQ0LXUsgEFi3gO+9916BQNDV1XXtRImGhgY2m71w4cIJegUJgrAeMJvMLhM7evRoV1dXWFhYQkJCbW3twMCAWCyeOJYmRp3MWbNmLV682GKx0F+APDw8CILQaDT0V4GYmBjrjmJr1DcSLpcbEBBAbQkICJBIJPQT6uvrLRaLXC6npu/eVG9vb2dnp4eHR0hIyKVLl6iT39zczGQyqS7HixcvTrC7Te7HeyPUJe3j46NQKLRaLTXzhTro6Ogo3TjjcDghISE3KoT6Xujl5UWfEIVCYf2NYeaXCkK3x2+7/UeSJDXr77r3E6murg4JCYmOji4sLKyoqIiJiYmNjeXxeJ2dnRKJZNasWdY9Wt3d3Xq93sfHJy0tzWAwtLe3Hzly5NChQxkZGStWrJDL5fT6B1dX1+Li4glmspnN5q+//vr5559fsmRJUFAQ9QkoEokuXbq0Y8eO/Px864eo9Q+enp7nzp07ePDgTM6G0WhMT0+PiooaGBjw9vYODg42GAzff//9tb1n33//vVQqjYqKevvtty9cuDA6OkpN0Dh79mxeXh4A9PX1mc3mhQsXOjs7u7m5HThw4Ka73JRWqz1x4sTKlSuXLl1aWVlZVFSUkpLy7LPPxsXF9fT0EATh4+Pj7Oyck5Mz+e7BsrKywMDAoKAglUpFXwMtLS3Dw8OLFi1yd3enVlZ4enreqDu6ubmZ6hV8/vnnq6qqmExmeHj40NAQPXPq9OnTkZGRMpnsjTfeOH/+vMFgcHZ2FovFXV1d425gRqutrQ0PDxcKhfTJb2xsHBkZEYlE1KKX6+7V19dHXYHr1693cHCora2dOClviiTJrKysOXPm5OXlUfex0+l0VVVVy5cv9/DwKC8vp8+zSqWSSCSrV6+m1pxERERM0ONaW1tLTWR96aWX6urqSJIMCQnR6XT0v22Z0qVCrXZls9m5ublVVVUzeb0I7X8iQAAAAyVJREFUTdVvu/0XEhJCdSRSKx/Gqaio6Ovr8/b2lkqlVVVVX3311cDAQEhIyJIlS5ycnPbu3Ws9MGY2mw8cODAwMBAeHh4TE0NtLCsr27ZtW0tLi0QiSUxMXLBggcFg2Ldv30177VQq1QcffNDQ0DBr1qyEhIS4uDgPDw+qG1alUmVnZ9fU1FAPLV68mCCIgoKCiRcUTkZTU1NRURE15TI4OLitrW3Hjh3XvcWwVqvdvn27Uql0dXWNj49funRpREREX18f/QFUVFRUVlbm5uZGNSKNRuNNd5mM4uLihoYGgUDwyCOPFBYWfvnll319fVKpNDExMS4ujsvlVlVVUR3Lk1RTU0NNy6RnvgCAUqksKCgwGo1yuTwhIWFsbCw/P3+C4didO3dWVFRQrysmJqasrMz6RZnN5o8//rioqIjBYNxzzz2JiYkKhcJkMimVyhsV2NjYqNPpDAYDHcnNzc29vb0EQdTX19/oXVar1YWFhSMjI/Pnzw8LCxs3eGYrtbW1w8PD1IgmvfHgwYMVFRXu7u7x8fHz58+vq6ujxgWvS6fT5ebmXrx4kbqAQ0JCfvjhh/b2dvoJNrlUELoNHKy7BKfNJoVYm+QkCES57k1MEEIITeC33f5DCCGEpgfzDyGEkD3C/EMIIWSPbJN/1115/V9SGkIIIXQt28x/4XK51D+amXlRY2NjOp2uv79/5kUhhBBCN2Kb9l9/f//o6OjY2NgMyxkbGxsdHcXwQwghdKsRtrrfhE6nIwiCxWJNuxVosVj0ev24G4YhhBBCt4Jt+j8RQgih3xac/4kQQsgeYf4hhBCyR5h/CCGE7BHmH0IIIXuE+YcQQsgeYf4hhBCyR5h/CCGE7BHmH0IIIXuE+YcQQsgeYf4hhBCyR5h/CCGE7BHmH0IIIXuE+YcQQsgeYf4hhBCyR5h/CCGE7BHmH0IIIXuE+YcQQsgeYf4hhBCyR5h/CCGE7BHmH0IIIXuE+YcQQsgeYf4hhBCyR5h/CCGE7BHmH0IIIXuE+YcQQsgeYf4hhBCyR5h/CCGE7BHmH0IIIXuE+YcQQsgeYf4hhBCyR/8ftYrAANa7K0oAAAAASUVORK5CYII=" width="597" height="123" class="img_ev3q"></p>
</li>
<li>
<p><code>reactive</code>重新分配一个新对象，会<strong>失去</strong>响应式（可以使用<code>Object.assign</code>去整体替换）。</p>
</li>
</ol>
</blockquote>
<ul>
<li>使用原则：</li>
</ul>
<blockquote>
<ol>
<li>若需要一个基本类型的响应式数据，必须使用<code>ref</code>。</li>
<li>若需要一个响应式对象，层级不深，<code>ref</code>、<code>reactive</code>都可以。</li>
<li>若需要一个响应式对象，且层级较深，推荐使用<code>reactive</code>。</li>
</ol>
</blockquote>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="37-torefs-与-toref">3.7. 【toRefs 与 toRef】<a href="#37-torefs-与-toref" class="hash-link" aria-label="Direct link to 3.7. 【toRefs 与 toRef】" title="Direct link to 3.7. 【toRefs 与 toRef】">​</a></h2>
<ul>
<li>作用：将一个响应式对象中的每一个属性，转换为<code>ref</code>对象。</li>
<li>备注：<code>toRefs</code>与<code>toRef</code>功能一致，但<code>toRefs</code>可以批量转换。</li>
<li>语法如下：</li>
</ul>
<div class="language-vue codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-vue codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;template&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &lt;div class=&quot;person&quot;&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &lt;h2&gt;姓名：{{person.name}}&lt;/h2&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &lt;h2&gt;年龄：{{person.age}}&lt;/h2&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &lt;h2&gt;性别：{{person.gender}}&lt;/h2&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &lt;button @click=&quot;changeName&quot;&gt;修改名字&lt;/button&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &lt;button @click=&quot;changeAge&quot;&gt;修改年龄&lt;/button&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &lt;button @click=&quot;changeGender&quot;&gt;修改性别&lt;/button&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &lt;/div&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;/template&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;script lang=&quot;ts&quot; setup name=&quot;Person&quot;&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  import {ref,reactive,toRefs,toRef} from &#x27;vue&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  // 数据</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  let person = reactive({name:&#x27;张三&#x27;, age:18, gender:&#x27;男&#x27;})</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">	</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  // 通过toRefs将person对象中的n个属性批量取出，且依然保持响应式的能力</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  let {name,gender} =  toRefs(person)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">	</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  // 通过toRef将person对象中的gender属性取出，且依然保持响应式的能力</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  let age = toRef(person,&#x27;age&#x27;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  // 方法</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  function changeName(){</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    name.value += &#x27;~&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  function changeAge(){</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    age.value += 1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  function changeGender(){</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    gender.value = &#x27;女&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;/script&gt;</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="38-computed">3.8. 【computed】<a href="#38-computed" class="hash-link" aria-label="Direct link to 3.8. 【computed】" title="Direct link to 3.8. 【computed】">​</a></h2>
<p>作用：根据已有数据计算出新数据（和<code>Vue2</code>中的<code>computed</code>作用一致）。</p>
<p><img decoding="async" loading="lazy" src="/mdviewer/assets/images/computed-50af8e71e47726139520abd7d97a6b31.gif" width="1393" height="483" class="img_ev3q"></p>
<div class="language-vue codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-vue codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;template&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &lt;div class=&quot;person&quot;&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    姓：&lt;input type=&quot;text&quot; v-model=&quot;firstName&quot;&gt; &lt;br&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    名：&lt;input type=&quot;text&quot; v-model=&quot;lastName&quot;&gt; &lt;br&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    全名：&lt;span&gt;{{fullName}}&lt;/span&gt; &lt;br&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &lt;button @click=&quot;changeFullName&quot;&gt;全名改为：li-si&lt;/button&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &lt;/div&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;/template&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;script setup lang=&quot;ts&quot; name=&quot;App&quot;&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  import {ref,computed} from &#x27;vue&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  let firstName = ref(&#x27;zhang&#x27;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  let lastName = ref(&#x27;san&#x27;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  // 计算属性——只读取，不修改</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  /* let fullName = computed(()=&gt;{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    return firstName.value + &#x27;-&#x27; + lastName.value</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  }) */</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  // 计算属性——既读取又修改</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  let fullName = computed({</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    // 读取</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    get(){</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      return firstName.value + &#x27;-&#x27; + lastName.value</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    // 修改</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    set(val){</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      console.log(&#x27;有人修改了fullName&#x27;,val)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      firstName.value = val.split(&#x27;-&#x27;)[0]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      lastName.value = val.split(&#x27;-&#x27;)[1]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  })</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  function changeFullName(){</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    fullName.value = &#x27;li-si&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  } </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;/script&gt;</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="39watch">3.9.【watch】<a href="#39watch" class="hash-link" aria-label="Direct link to 3.9.【watch】" title="Direct link to 3.9.【watch】">​</a></h2>
<ul>
<li>作用：监视数据的变化（和<code>Vue2</code>中的<code>watch</code>作用一致）</li>
<li>特点：<code>Vue3</code>中的<code>watch</code>只能监视以下<strong>四种数据</strong>：</li>
</ul>
<blockquote>
<ol>
<li><code>ref</code>定义的数据。</li>
<li><code>reactive</code>定义的数据。</li>
<li>函数返回一个值（<code>getter</code>函数）。</li>
<li>一个包含上述内容的数组。</li>
</ol>
</blockquote>
<p>我们在<code>Vue3</code>中使用<code>watch</code>的时候，通常会遇到以下几种情况：</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="-情况一">* 情况一<a href="#-情况一" class="hash-link" aria-label="Direct link to * 情况一" title="Direct link to * 情况一">​</a></h3>
<p>监视<code>ref</code>定义的【基本类型】数据：直接写数据名即可，监视的是其<code>value</code>值的改变。</p>
<div class="language-vue codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-vue codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;template&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &lt;div class=&quot;person&quot;&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &lt;h1&gt;情况一：监视【ref】定义的【基本类型】数据&lt;/h1&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &lt;h2&gt;当前求和为：{{sum}}&lt;/h2&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &lt;button @click=&quot;changeSum&quot;&gt;点我sum+1&lt;/button&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &lt;/div&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;/template&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;script lang=&quot;ts&quot; setup name=&quot;Person&quot;&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  import {ref,watch} from &#x27;vue&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  // 数据</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  let sum = ref(0)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  // 方法</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  function changeSum(){</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    sum.value += 1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  // 监视，情况一：监视【ref】定义的【基本类型】数据</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  const stopWatch = watch(sum,(newValue,oldValue)=&gt;{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    console.log(&#x27;sum变化了&#x27;,newValue,oldValue)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    if(newValue &gt;= 10){</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      stopWatch()</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  })</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;/script&gt;</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="-情况二">* 情况二<a href="#-情况二" class="hash-link" aria-label="Direct link to * 情况二" title="Direct link to * 情况二">​</a></h3>
<p>监视<code>ref</code>定义的【对象类型】数据：直接写数据名，监视的是对象的【地址值】，若想监视对象内部的数据，要手动开启深度监视。</p>
<blockquote>
<p>注意：</p>
<ul>
<li>
<p>若修改的是<code>ref</code>定义的对象中的属性，<code>newValue</code> 和 <code>oldValue</code> 都是新值，因为它们是同一个对象。</p>
</li>
<li>
<p>若修改整个<code>ref</code>定义的对象，<code>newValue</code> 是新值， <code>oldValue</code> 是旧值，因为不是同一个对象了。</p>
</li>
</ul>
</blockquote>
<div class="language-vue codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-vue codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;template&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &lt;div class=&quot;person&quot;&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &lt;h1&gt;情况二：监视【ref】定义的【对象类型】数据&lt;/h1&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &lt;h2&gt;姓名：{{ person.name }}&lt;/h2&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &lt;h2&gt;年龄：{{ person.age }}&lt;/h2&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &lt;button @click=&quot;changeName&quot;&gt;修改名字&lt;/button&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &lt;button @click=&quot;changeAge&quot;&gt;修改年龄&lt;/button&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &lt;button @click=&quot;changePerson&quot;&gt;修改整个人&lt;/button&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &lt;/div&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;/template&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;script lang=&quot;ts&quot; setup name=&quot;Person&quot;&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  import {ref,watch} from &#x27;vue&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  // 数据</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  let person = ref({</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    name:&#x27;张三&#x27;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    age:18</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  })</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  // 方法</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  function changeName(){</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    person.value.name += &#x27;~&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  function changeAge(){</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    person.value.age += 1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  function changePerson(){</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    person.value = {name:&#x27;李四&#x27;,age:90}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  /* </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    监视，情况一：监视【ref】定义的【对象类型】数据，监视的是对象的地址值，若想监视对象内部属性的变化，需要手动开启深度监视</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    watch的第一个参数是：被监视的数据</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    watch的第二个参数是：监视的回调</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    watch的第三个参数是：配置对象（deep、immediate等等.....） </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  */</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  watch(person,(newValue,oldValue)=&gt;{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    console.log(&#x27;person变化了&#x27;,newValue,oldValue)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  },{deep:true})</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;/script&gt;</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="--情况三">*  情况三<a href="#--情况三" class="hash-link" aria-label="Direct link to *  情况三" title="Direct link to *  情况三">​</a></h3>
<p>监视<code>reactive</code>定义的【对象类型】数据，且默认开启了深度监视。</p>
<div class="language-vue codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-vue codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;template&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &lt;div class=&quot;person&quot;&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &lt;h1&gt;情况三：监视【reactive】定义的【对象类型】数据&lt;/h1&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &lt;h2&gt;姓名：{{ person.name }}&lt;/h2&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &lt;h2&gt;年龄：{{ person.age }}&lt;/h2&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &lt;button @click=&quot;changeName&quot;&gt;修改名字&lt;/button&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &lt;button @click=&quot;changeAge&quot;&gt;修改年龄&lt;/button&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &lt;button @click=&quot;changePerson&quot;&gt;修改整个人&lt;/button&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &lt;hr&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &lt;h2&gt;测试：{{obj.a.b.c}}&lt;/h2&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &lt;button @click=&quot;test&quot;&gt;修改obj.a.b.c&lt;/button&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &lt;/div&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;/template&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;script lang=&quot;ts&quot; setup name=&quot;Person&quot;&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  import {reactive,watch} from &#x27;vue&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  // 数据</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  let person = reactive({</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    name:&#x27;张三&#x27;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    age:18</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  })</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  let obj = reactive({</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    a:{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      b:{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        c:666</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  })</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  // 方法</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  function changeName(){</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    person.name += &#x27;~&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  function changeAge(){</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    person.age += 1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  function changePerson(){</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    Object.assign(person,{name:&#x27;李四&#x27;,age:80})</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  function test(){</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    obj.a.b.c = 888</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  // 监视，情况三：监视【reactive】定义的【对象类型】数据，且默认是开启深度监视的</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  watch(person,(newValue,oldValue)=&gt;{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    console.log(&#x27;person变化了&#x27;,newValue,oldValue)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  })</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  watch(obj,(newValue,oldValue)=&gt;{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    console.log(&#x27;Obj变化了&#x27;,newValue,oldValue)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  })</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;/script&gt;</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="-情况四">* 情况四<a href="#-情况四" class="hash-link" aria-label="Direct link to * 情况四" title="Direct link to * 情况四">​</a></h3>
<p>监视<code>ref</code>或<code>reactive</code>定义的【对象类型】数据中的<strong>某个属性</strong>，注意点如下：</p>
<ol>
<li>若该属性值<strong>不是</strong>【对象类型】，需要写成函数形式。</li>
<li>若该属性值是<strong>依然</strong>是【对象类型】，可直接编，也可写成函数，建议写成函数。</li>
</ol>
<p>结论：监视的要是对象里的属性，那么最好写函数式，注意点：若是对象监视的是地址值，需要关注对象内部，需要手动开启深度监视。</p>
<div class="language-vue codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-vue codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;template&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &lt;div class=&quot;person&quot;&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &lt;h1&gt;情况四：监视【ref】或【reactive】定义的【对象类型】数据中的某个属性&lt;/h1&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &lt;h2&gt;姓名：{{ person.name }}&lt;/h2&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &lt;h2&gt;年龄：{{ person.age }}&lt;/h2&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &lt;h2&gt;汽车：{{ person.car.c1 }}、{{ person.car.c2 }}&lt;/h2&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &lt;button @click=&quot;changeName&quot;&gt;修改名字&lt;/button&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &lt;button @click=&quot;changeAge&quot;&gt;修改年龄&lt;/button&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &lt;button @click=&quot;changeC1&quot;&gt;修改第一台车&lt;/button&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &lt;button @click=&quot;changeC2&quot;&gt;修改第二台车&lt;/button&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &lt;button @click=&quot;changeCar&quot;&gt;修改整个车&lt;/button&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &lt;/div&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;/template&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;script lang=&quot;ts&quot; setup name=&quot;Person&quot;&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  import {reactive,watch} from &#x27;vue&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  // 数据</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  let person = reactive({</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    name:&#x27;张三&#x27;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    age:18,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    car:{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      c1:&#x27;奔驰&#x27;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      c2:&#x27;宝马&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  })</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  // 方法</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  function changeName(){</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    person.name += &#x27;~&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  function changeAge(){</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    person.age += 1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  function changeC1(){</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    person.car.c1 = &#x27;奥迪&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  function changeC2(){</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    person.car.c2 = &#x27;大众&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  function changeCar(){</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    person.car = {c1:&#x27;雅迪&#x27;,c2:&#x27;爱玛&#x27;}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  // 监视，情况四：监视响应式对象中的某个属性，且该属性是基本类型的，要写成函数式</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  /* watch(()=&gt; person.name,(newValue,oldValue)=&gt;{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    console.log(&#x27;person.name变化了&#x27;,newValue,oldValue)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  }) */</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  // 监视，情况四：监视响应式对象中的某个属性，且该属性是对象类型的，可以直接写，也能写函数，更推荐写函数</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  watch(()=&gt;person.car,(newValue,oldValue)=&gt;{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    console.log(&#x27;person.car变化了&#x27;,newValue,oldValue)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  },{deep:true})</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;/script&gt;</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="-情况五">* 情况五<a href="#-情况五" class="hash-link" aria-label="Direct link to * 情况五" title="Direct link to * 情况五">​</a></h3>
<p>监视上述的多个数据</p>
<div class="language-vue codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-vue codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;template&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &lt;div class=&quot;person&quot;&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &lt;h1&gt;情况五：监视上述的多个数据&lt;/h1&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &lt;h2&gt;姓名：{{ person.name }}&lt;/h2&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &lt;h2&gt;年龄：{{ person.age }}&lt;/h2&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &lt;h2&gt;汽车：{{ person.car.c1 }}、{{ person.car.c2 }}&lt;/h2&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &lt;button @click=&quot;changeName&quot;&gt;修改名字&lt;/button&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &lt;button @click=&quot;changeAge&quot;&gt;修改年龄&lt;/button&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &lt;button @click=&quot;changeC1&quot;&gt;修  改第一台车&lt;/button&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &lt;button @click=&quot;changeC2&quot;&gt;修改第二台车&lt;/button&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &lt;button @click=&quot;changeCar&quot;&gt;修改整个车&lt;/button&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &lt;/div&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;/template&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;script lang=&quot;ts&quot; setup name=&quot;Person&quot;&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  import {reactive,watch} from &#x27;vue&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  // 数据</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  let person = reactive({</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    name:&#x27;张三&#x27;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    age:18,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    car:{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      c1:&#x27;奔驰&#x27;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      c2:&#x27;宝马&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  })</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  // 方法</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  function changeName(){</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    person.name += &#x27;~&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  function changeAge(){</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    person.age += 1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  function changeC1(){</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    person.car.c1 = &#x27;奥迪&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  function changeC2(){</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    person.car.c2 = &#x27;大众&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  function changeCar(){</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    person.car = {c1:&#x27;雅迪&#x27;,c2:&#x27;爱玛&#x27;}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  // 监视，情况五：监视上述的多个数据</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  watch([()=&gt;person.name,person.car],(newValue,oldValue)=&gt;{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    console.log(&#x27;person.car变化了&#x27;,newValue,oldValue)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  },{deep:true})</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;/script&gt;</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="310-watcheffect">3.10. 【watchEffect】<a href="#310-watcheffect" class="hash-link" aria-label="Direct link to 3.10. 【watchEffect】" title="Direct link to 3.10. 【watchEffect】">​</a></h2>
<ul>
<li>
<p>官网：立即运行一个函数，同时响应式地追踪其依赖，并在依赖更改时重新执行该函数。</p>
</li>
<li>
<p><code>watch</code>对比<code>watchEffect</code></p>
<blockquote>
<ol>
<li>
<p>都能监听响应式数据的变化，不同的是监听数据变化的方式不同</p>
</li>
<li>
<p><code>watch</code>：要明确指出监视的数据</p>
</li>
<li>
<p><code>watchEffect</code>：不用明确指出监视的数据（函数中用到哪些属性，那就监视哪些属性）。</p>
</li>
</ol>
</blockquote>
</li>
<li>
<p>示例代码：</p>
</li>
</ul>
<div class="language-vue codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-vue codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &lt;template&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &lt;div class=&quot;person&quot;&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      &lt;h1&gt;需求：水温达到50℃，或水位达到20cm，则联系服务器&lt;/h1&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      &lt;h2 id=&quot;demo&quot;&gt;水温：{{temp}}&lt;/h2&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      &lt;h2&gt;水位：{{height}}&lt;/h2&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      &lt;button @click=&quot;changePrice&quot;&gt;水温+1&lt;/button&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      &lt;button @click=&quot;changeSum&quot;&gt;水位+10&lt;/button&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &lt;/div&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &lt;/template&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &lt;script lang=&quot;ts&quot; setup name=&quot;Person&quot;&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    import {ref,watch,watchEffect} from &#x27;vue&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    // 数据</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    let temp = ref(0)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    let height = ref(0)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    // 方法</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    function changePrice(){</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      temp.value += 10</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    function changeSum(){</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      height.value += 1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    // 用watch实现，需要明确的指出要监视：temp、height</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    watch([temp,height],(value)=&gt;{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      // 从value中获取最新的temp值、height值</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      const [newTemp,newHeight] = value</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      // 室温达到50℃，或水位达到20cm，立刻联系服务器</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      if(newTemp &gt;= 50 || newHeight &gt;= 20){</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        console.log(&#x27;联系服务器&#x27;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    })</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    // 用watchEffect实现，不用</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    const stopWtach = watchEffect(()=&gt;{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      // 室温达到50℃，或水位达到20cm，立刻联系服务器</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      if(temp.value &gt;= 50 || height.value &gt;= 20){</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        console.log(document.getElementById(&#x27;demo&#x27;)?.innerText)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        console.log(&#x27;联系服务器&#x27;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      // 水温达到100，或水位达到50，取消监视</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      if(temp.value === 100 || height.value === 50){</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        console.log(&#x27;清理了&#x27;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        stopWtach()</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    })</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &lt;/script&gt;</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="311-标签的-ref-属性">3.11. 【标签的 ref 属性】<a href="#311-标签的-ref-属  性" class="hash-link" aria-label="Direct link to 3.11. 【标签的 ref 属性】" title="Direct link to 3.11. 【标签的 ref 属性】">​</a></h2>
<p>作用：用于注册模板引用。</p>
<blockquote>
<ul>
<li>
<p>用在普通<code>DOM</code>标签上，获取的是<code>DOM</code>节点。</p>
</li>
<li>
<p>用在组件标签上，获取的是组件实例对象。</p>
</li>
</ul>
</blockquote>
<p>用在普通<code>DOM</code>标签上：</p>
<div class="language-vue codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-vue codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;template&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &lt;div class=&quot;person&quot;&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &lt;h1 ref=&quot;title1&quot;&gt;尚硅谷&lt;/h1&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &lt;h2 ref=&quot;title2&quot;&gt;前端&lt;/h2&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &lt;h3 ref=&quot;title3&quot;&gt;Vue&lt;/h3&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &lt;input type=&quot;text&quot; ref=&quot;inpt&quot;&gt; &lt;br&gt;&lt;br&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &lt;button @click=&quot;showLog&quot;&gt;点我打印内容&lt;/button&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &lt;/div&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;/template&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;script lang=&quot;ts&quot; setup name=&quot;Person&quot;&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  import {ref} from &#x27;vue&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">	</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  let title1 = ref()</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  let title2 = ref()</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  let title3 = ref()</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  function showLog(){</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    // 通过id获取元素</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    const t1 = document.getElementById(&#x27;title1&#x27;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    // 打印内容</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    console.log((t1 as HTMLElement).innerText)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    console.log((&lt;HTMLElement&gt;t1).innerText)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    console.log(t1?.innerText)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">	/************************************/</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">		</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    // 通过ref获取元素</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    console.log(title1.value)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    console.log(title2.value)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    console.log(title3.value)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;/script&gt;</span><br></span></code></pre></div></div>
<p>用在组件标签上：</p>
<div class="language-vue codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-vue codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;!-- 父组件App.vue --&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;template&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &lt;Person ref=&quot;ren&quot;/&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &lt;button @click=&quot;test&quot;&gt;测试&lt;/button&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;/template&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;script lang=&quot;ts&quot; setup name=&quot;App&quot;&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  import Person from &#x27;./components/Person.vue&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  import {ref} from &#x27;vue&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  let ren = ref()</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  function test(){</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    console.log(ren.value.name)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    console.log(ren.value.age)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;/script&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;!-- 子组件Person.vue中要使用defineExpose暴露内容 --&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;script lang=&quot;ts&quot; setup name=&quot;Person&quot;&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  import {ref,defineExpose} from &#x27;vue&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">	// 数据</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  let name = ref(&#x27;张三&#x27;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  let age = ref(18)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  /****************************/</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  /****************************/</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  // 使用defineExpose将组件中的数据交给外部</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  defineExpose({name,age})</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;/script&gt;</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="312-props">3.12. 【props】<a href="#312-props" class="hash-link" aria-label="Direct link to 3.12. 【props】" title="Direct link to 3.12. 【props】">​</a></h2>
<blockquote>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// 定义一个接口，限制每个Person对象的格式</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword module" style="font-style:italic">export</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">interface</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">PersonInter</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> </span><span class="token literal-property property">id</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain">string</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> </span><span class="token literal-property property">name</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain">string</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token literal-property property">age</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain">number</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// 定义一个自定义类型Persons</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword module" style="font-style:italic">export</span><span class="token plain"> type </span><span class="token maybe-class-name">Persons</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token known-class-name class-name" style="color:rgb(255, 203, 107)">Array</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token maybe-class-name">PersonInter</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><br></span></code></pre></div></div>
<p><code>App.vue</code>中代码：</p>
<div class="language-vue codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-vue codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;template&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">	&lt;Person :list=&quot;persons&quot;/&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;/template&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;script lang=&quot;ts&quot; setup name=&quot;App&quot;&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  import Person from &#x27;./components/Person.vue&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  import {reactive} from &#x27;vue&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    import {type Persons} from &#x27;./types&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    let persons = reactive&lt;Persons&gt;([</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     {id:&#x27;e98219e12&#x27;,name:&#x27;张三&#x27;,age:18},</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      {id:&#x27;e98219e13&#x27;,name:&#x27;李四&#x27;,age:19},</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">       {id:&#x27;e98219e14&#x27;,name:&#x27;王五&#x27;,age:20}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     ])</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   &lt;/script&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><br></span></code></pre></div></div>
<p><code>Person.vue</code>中代码：</p>
<div class="language-Vue language-vue codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-vue codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;template&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;div class=&quot;person&quot;&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> &lt;ul&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     &lt;li v-for=&quot;item in list&quot; :key=&quot;item.id&quot;&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        {{item.name}}--{{item.age}}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      &lt;/li&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &lt;/ul&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   &lt;/div&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   &lt;/template&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;script lang=&quot;ts&quot; setup name=&quot;Person&quot;&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">import {defineProps} from &#x27;vue&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">import {type PersonInter} from &#x27;@/types&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  // 第一种写法：仅接收</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// const props = defineProps([&#x27;list&#x27;])</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  // 第二种写法：接收+限制类型</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// defineProps&lt;{list:Persons}&gt;()</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  // 第三种写法：接收+限制类型+指定默认值+限制必要性</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">let props = withDefaults(defineProps&lt;{list?:Persons}&gt;(),{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     list:()=&gt;[{id:&#x27;asdasg01&#x27;,name:&#x27;小猪佩奇&#x27;,age:18}]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  })</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   console.log(props)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &lt;/script&gt;</span><br></span></code></pre></div></div>
</blockquote>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="313-生命周期">3.13. 【生命周期】<a href="#313-生命周期" class="hash-link" aria-label="Direct link to 3.13. 【生命周期】" title="Direct link to 3.13. 【生命周期】">​</a></h2>
<ul>
<li>
<p>概念：<code>Vue</code>组件实例在创建时要经历一系列的初始化步骤，在此过程中<code>Vue</code>会在合适的时机，调用特定的函数，从而让开发者有机会在特定阶段运行自己的代码，这些特定的函数统称为：生命周期钩子</p>
</li>
<li>
<p>规律：</p>
<blockquote>
<p>生命周期整体分为四个阶段，分别是：<strong>创建、挂载、更新、销毁</strong>，每个阶段都有两个钩子，一前一后。</p>
</blockquote>
</li>
<li>
<p><code>Vue2</code>的生命周期</p>
<blockquote>
<p>创建阶段：<code>beforeCreate</code>、<code>created</code></p>
<p>挂载阶段：<code>beforeMount</code>、<code>mounted</code></p>
<p>更新阶段：<code>beforeUpdate</code>、<code>updated</code></p>
<p>销毁阶段：<code>beforeDestroy</code>、<code>destroyed</code></p>
</blockquote>
</li>
<li>
<p><code>Vue3</code>的生命周期</p>
<blockquote>
<p>创建阶段：<code>setup</code></p>
<p>挂载阶段：<code>onBeforeMount</code>、<code>onMounted</code></p>
<p>更新阶段：<code>onBeforeUpdate</code>、<code>onUpdated</code></p>
<p>卸载阶段：<code>onBeforeUnmount</code>、<code>onUnmounted</code></p>
</blockquote>
</li>
<li>
<p>常用的钩子：<code>onMounted</code>(挂载完毕)、<code>onUpdated</code>(更新完毕)、<code>onBeforeUnmount</code>(卸载之前)</p>
</li>
<li>
<p>示例代码：</p>
</li>
</ul>
<div class="language-vue codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-vue codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &lt;template&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &lt;div class=&quot;person&quot;&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      &lt;h2&gt;当前求和为：{{ sum }}&lt;/h2&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      &lt;button @click=&quot;changeSum&quot;&gt;点我sum+1&lt;/button&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &lt;/div&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &lt;/template&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &lt;!-- vue3写法 --&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &lt;script lang=&quot;ts&quot; setup name=&quot;Person&quot;&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    import { </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      ref, </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      onBeforeMount, </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      onMounted, </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      onBeforeUpdate, </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      onUpdated, </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      onBeforeUnmount, </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      onUnmounted </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    } from &#x27;vue&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    // 数据</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    let sum = ref(0)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    // 方法</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    function changeSum() {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      sum.value += 1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    console.log(&#x27;setup&#x27;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    // 生命周期钩子</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    onBeforeMount(()=&gt;{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      console.log(&#x27;挂载之前&#x27;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    })</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    onMounted(()=&gt;{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      console.log(&#x27;挂载完毕&#x27;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    })</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    onBeforeUpdate(()=&gt;{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      console.log(&#x27;更新之前&#x27;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    })</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    onUpdated(()=&gt;{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      console.log(&#x27;更新完毕&#x27;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    })</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    onBeforeUnmount(()=&gt;{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      console.log(&#x27;卸载之前&#x27;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    })</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    onUnmounted(()=&gt;{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      console.log(&#x27;卸载完毕&#x27;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    })</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &lt;/script&gt;</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="314-自定义hook">3.14. 【自定义hook】<a href="#314-自定义hook" class="hash-link" aria-label="Direct link to 3.14. 【自定义hook】" title="Direct link to 3.14. 【自定义hook】">​</a></h2>
<ul>
<li>
<p>什么是<code>hook</code>？—— 本质是一个函数，把<code>setup</code>函数中使用的<code>Composition API</code>进行了封装，类似于<code>vue2.x</code>中的<code>mixin</code>。</p>
</li>
<li>
<p>自定义<code>hook</code>的优势：复用代码, 让<code>setup</code>中的逻辑更清楚易懂。</p>
</li>
</ul>
<p>示例代码 ：</p>
<ul>
<li><code>useSum.ts</code>中内容如下：</li>
</ul>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword module" style="font-style:italic">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token imports">ref</span><span class="token imports punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token imports">onMounted</span><span class="token imports punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token keyword module" style="font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;vue&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword module" style="font-style:italic">export</span><span class="token plain"> </span><span class="token keyword module" style="font-style:italic">default</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">function</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">let</span><span class="token plain"> sum </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">ref</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:rgb(130, 170, 255)">increment</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token arrow operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      sum</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">value</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">+=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:rgb(130, 170, 255)">decrement</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token arrow operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      sum</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">value</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">-=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token function" style="color:rgb(130, 170, 255)">onMounted</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token arrow operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token function" style="color:rgb(130, 170, 255)">increment</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">//向外部暴露数据</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword control-flow" style="font-style:italic">return</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">sum</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain">increment</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain">decrement</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain">		</span><br></span></code></pre></div></div>
<ul>
<li><code>useDog.ts</code>中内容如下：</li>
</ul>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword module" style="font-style:italic">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token imports">reactive</span><span class="token imports punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token imports">onMounted</span><span class="token imports punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token keyword module" style="font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;vue&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword module" style="font-style:italic">import</span><span class="token plain"> axios</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token known-class-name class-name" style="color:rgb(255, 203, 107)">AxiosError</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token keyword module" style="font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;axios&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword module" style="font-style:italic">export</span><span class="token plain"> </span><span class="token keyword module" style="font-style:italic">default</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">function</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">let</span><span class="token plain"> dogList </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> reactive</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">string</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// 方法</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">async</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">getDog</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token keyword control-flow" style="font-style:italic">try</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// 发请求</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token keyword" style="font-style:italic">let</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">data</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="font-style:italic">await</span><span class="token plain"> axios</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">get</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;https://dog.ceo/api/breed/pembroke//assets/2025/06/06/random&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// 维护数据</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        dogList</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">push</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">data</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">message</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token keyword control-flow" style="font-style:italic">catch</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">error</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// 处理错误</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> err </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token known-class-name class-name" style="color:rgb(255, 203, 107)">AxiosError</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain">error</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token console class-name" style="color:rgb(255, 203, 107)">console</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">log</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">err</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">message</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// 挂载钩子</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token function" style="color:rgb(130, 170, 255)">onMounted</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token arrow operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token function" style="color:rgb(130, 170, 255)">getDog</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  	</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">//向外部暴露数据</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword control-flow" style="font-style:italic">return</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">dogList</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain">getDog</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre></div></div>
<ul>
<li>组件中具体使用：</li>
</ul>
<div class="language-vue codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-vue codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &lt;template&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &lt;h2&gt;当前求和为：{{sum}}&lt;/h2&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &lt;button @click=&quot;increment&quot;&gt;点我+1&lt;/button&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &lt;button @click=&quot;decrement&quot;&gt;点我-1&lt;/button&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &lt;hr&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &lt;img v-for=&quot;(u,index) in dogList.urlList&quot; :key=&quot;index&quot; :src=&quot;(u as string)&quot;&gt; </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &lt;span v-show=&quot;dogList.isLoading&quot;&gt;加载中......&lt;/span&gt;&lt;br&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &lt;button @click=&quot;getDog&quot;&gt;再来一只狗&lt;/button&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &lt;/template&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &lt;script lang=&quot;ts&quot;&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    import {defineComponent} from &#x27;vue&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    export default defineComponent({</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      name:&#x27;App&#x27;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    })</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &lt;/script&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &lt;script setup lang=&quot;ts&quot;&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    import useSum from &#x27;./hooks/useSum&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    import useDog from &#x27;./hooks/useDog&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  	</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    let {sum,increment,decrement} = useSum()</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    let {dogList,getDog} = useDog()</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &lt;/script&gt;</span><br></span></code></pre></div></div>
<p>​</p>
<hr>
<h1>4. 路由</h1>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="41-对路由的理解">4.1. 【对路由的理解】<a href="#41-对路由的理解" class="hash-link" aria-label="Direct link to 4.1. 【对路由的理解】" title="Direct link to 4.1. 【对路由的理解】">​</a></h2>
<p><img decoding="async" loading="lazy" src="/mdviewer/assets/images/image-20231018144351536-f58ebddc5eb5f09b8c1cd50627d2ddeb.png" width="3305" height="2142" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="42-基本切换效果">4.2. 【基本切换效果】<a href="#42-基本切换效果" class="hash-link" aria-label="Direct link to 4.2. 【基本切换效果】" title="Direct link to 4.2. 【基本切换效果】">​</a></h2>
<ul>
<li>
<p><code>Vue3</code>中要使用<code>vue-router</code>的最新版本，目前是<code>4</code>版本。</p>
</li>
<li>
<p>路由配置文件代码如下：</p>
</li>
</ul>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword module" style="font-style:italic">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token imports">createRouter</span><span class="token imports punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token imports">createWebHistory</span><span class="token imports punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token keyword module" style="font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;vue-router&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword module" style="font-style:italic">import</span><span class="token plain"> </span><span class="token imports maybe-class-name">Home</span><span class="token plain"> </span><span class="token keyword module" style="font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;@/pages/Home.vue&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword module" style="font-style:italic">import</span><span class="token plain"> </span><span class="token imports maybe-class-name">News</span><span class="token plain"> </span><span class="token keyword module" style="font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;@/pages/News.vue&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword module" style="font-style:italic">import</span><span class="token plain"> </span><span class="token imports maybe-class-name">About</span><span class="token plain"> </span><span class="token keyword module" style="font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;@/pages/About.vue&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> router </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">createRouter</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  	</span><span class="token literal-property property">history</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token function" style="color:rgb(130, 170, 255)">createWebHistory</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  	</span><span class="token literal-property property">routes</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  		</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  			</span><span class="token literal-property property">path</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;/home&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  			</span><span class="token literal-property property">component</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token maybe-class-name">Home</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  		</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  		</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  			</span><span class="token literal-property property">path</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;/about&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  			</span><span class="token literal-property property">component</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token maybe-class-name">About</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  		</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  	</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword module" style="font-style:italic">export</span><span class="token plain"> </span><span class="token keyword module" style="font-style:italic">default</span><span class="token plain"> router</span><br></span></code></pre></div></div>
<ul>
<li><code>main.ts</code>代码如下：</li>
</ul>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword module" style="font-style:italic">import</span><span class="token plain"> </span><span class="token imports">router</span><span class="token plain"> </span><span class="token keyword module" style="font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;./router/index&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  app</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">use</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">router</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  app</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">mount</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;#app&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><br></span></code></pre></div></div>
<ul>
<li><code>App.vue</code>代码如下</li>
</ul>
<div class="language-vue codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-vue codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &lt;template&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &lt;div class=&quot;app&quot;&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      &lt;h2 class=&quot;title&quot;&gt;Vue路由测试&lt;/h2&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      &lt;!-- 导航区 --&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      &lt;div class=&quot;navigate&quot;&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &lt;RouterLink to=&quot;/home&quot; active-class=&quot;active&quot;&gt;首页&lt;/RouterLink&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &lt;RouterLink to=&quot;/news&quot; active-class=&quot;active&quot;&gt;新闻&lt;/RouterLink&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &lt;RouterLink to=&quot;/about&quot; active-class=&quot;active&quot;&gt;关于&lt;/RouterLink&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      &lt;/div&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      &lt;!-- 展示区 --&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      &lt;div class=&quot;main-content&quot;&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &lt;RouterView&gt;&lt;/RouterView&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      &lt;/div&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &lt;/div&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &lt;/template&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &lt;script lang=&quot;ts&quot; setup name=&quot;App&quot;&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    import {RouterLink,RouterView} from &#x27;vue-router&#x27;  </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &lt;/script&gt;</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="43-两个注意点">4.3. 【两个注意点】<a href="#43-两个注意点" class="hash-link" aria-label="Direct link to 4.3. 【两个注意点】" title="Direct link to 4.3. 【两个注意点】">​</a></h2>
<blockquote>
<ol>
<li>
<p>路由组件通常存放在<code>pages</code> 或 <code>views</code>文件夹，一般组件通常存放在<code>components</code>文件夹。</p>
</li>
<li>
<p>通过点击导航，视觉效果上“消失” 了的路由组件，默认是被<strong>卸载</strong>掉的，需要的时候再去<strong>挂载</strong>。</p>
</li>
</ol>
</blockquote>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="44路由器工作模式">4.4.【路由器工作模式】<a href="#44路由器工作模式" class="hash-link" aria-label="Direct link to 4.4.【路由器工作模式】" title="Direct link to 4.4.【路由器工作模式】">​</a></h2>
<ol>
<li>
<p><code>history</code>模式</p>
<blockquote>
<p>优点：<code>URL</code>更加美观，不带有<code>#</code>，更接近传统的网站<code>URL</code>。</p>
<p>缺点：后期项目上线，需要服务端配合处理路径问题，否则刷新会有<code>404</code>错误。</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> router </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">createRouter</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  	</span><span class="token literal-property property">history</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token function" style="color:rgb(130, 170, 255)">createWebHistory</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">//history模式</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  	</span><span class="token doc-comment comment" style="color:rgb(105, 112, 152);font-style:italic">/******/</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><br></span></code></pre></div></div>
</blockquote>
</li>
<li>
<p><code>hash</code>模式</p>
<blockquote>
<p>优点：兼容性更好，因为不需要服务器端处理路径。</p>
<p>缺点：<code>URL</code>带有<code>#</code>不太美观，且在<code>SEO</code>优化方面相对较差。</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> router </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">createRouter</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  	</span><span class="token literal-property property">history</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token function" style="color:rgb(130, 170, 255)">createWebHashHistory</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">//hash模式</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  	</span><span class="token doc-comment comment" style="color:rgb(105, 112, 152);font-style:italic">/******/</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><br></span></code></pre></div></div>
</blockquote>
</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="45-to的两种写法">4.5. 【to的两种写法】<a href="#45-to的两种写法" class="hash-link" aria-label="Direct link to 4.5. 【to的两种写法】" title="Direct link to 4.5. 【to的两种写法】">​</a></h2>
<div class="language-vue codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-vue codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;!-- 第一种：to的字符串写法 --&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;router-link active-class=&quot;active&quot; to=&quot;/home&quot;&gt;主页&lt;/router-link&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;!-- 第二种：to的对象写法 --&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;router-link active-class=&quot;active&quot; :to=&quot;{path:&#x27;/home&#x27;}&quot;&gt;Home&lt;/router-link&gt;</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="46-命名路由">4.6. 【命名路由】<a href="#46-命名路由" class="hash-link" aria-label="Direct link to 4.6. 【命名路由】" title="Direct link to 4.6. 【命名路由】">​</a></h2>
<p>作用：可以简化路由跳转及传参（后面就讲）。</p>
<p>给路由规则命名：</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token literal-property property">routes</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token literal-property property">name</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;zhuye&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token literal-property property">path</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;/home&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token literal-property property">component</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token maybe-class-name">Home</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token literal-property property">name</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;xinwen&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token literal-property property">path</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;/news&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token literal-property property">component</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token maybe-class-name">News</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token literal-property property">name</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;guanyu&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token literal-property property">path</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;/about&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token literal-property property">component</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token maybe-class-name">About</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><br></span></code></pre></div></div>
<p>跳转路由：</p>
<div class="language-vue codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-vue codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;!--简化前：需要写完整的路径（to的字符串写法） --&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;router-link to=&quot;/news/detail&quot;&gt;跳转&lt;/router-link&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;!--简化后：直接通过名字跳转（to的对象写法配合name属性） --&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;router-link :to=&quot;{name:&#x27;guanyu&#x27;}&quot;&gt;跳转&lt;/router-link&gt;</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="47-嵌套路由">4.7. 【嵌套路由】<a href="#47-嵌套路由" class="hash-link" aria-label="Direct link to 4.7. 【嵌套路由】" title="Direct link to 4.7. 【嵌套路由】">​</a></h2>
<ol>
<li>
<p>编写<code>News</code>的子路由：<code>Detail.vue</code></p>
</li>
<li>
<p>配置路由规则，使用<code>children</code>配置项：</p>
</li>
</ol>
<div class="language-ts codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-ts codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> router </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">createRouter</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     history</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token function" style="color:rgb(130, 170, 255)">createWebHistory</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   	routes</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   		</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   			name</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;zhuye&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   			path</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;/home&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   			component</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain">Home</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   		</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   		</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   			name</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;xinwen&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   			path</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;/news&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   			component</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain">News</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   			children</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   				</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   					name</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;xiang&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   					path</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;detail&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   					component</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain">Detail</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   				</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   			</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   		</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   		</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   			name</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;guanyu&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   			path</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;/about&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   			component</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain">About</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   		</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   	</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token keyword" style="font-style:italic">export</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">default</span><span class="token plain"> router</span><br></span></code></pre></div></div>
<ol start="3">
<li>跳转路由（记得要加完整路径）：</li>
</ol>
<div class="language-vue codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-vue codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">   &lt;router-link to=&quot;/news/detail&quot;&gt;xxxx&lt;/router-link&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   &lt;!-- 或 --&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   &lt;router-link :to=&quot;{path:&#x27;/news/detail&#x27;}&quot;&gt;xxxx&lt;/router-link&gt;</span><br></span></code></pre></div></div>
<ol start="4">
<li>记得去<code>Home</code>组件中预留一个<code>&lt;router-view&gt;</code></li>
</ol>
<div class="language-vue codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-vue codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">   &lt;template&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     &lt;div class=&quot;news&quot;&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">       &lt;nav class=&quot;news-list&quot;&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">         &lt;RouterLink v-for=&quot;news in newsList&quot; :key=&quot;news.id&quot; :to=&quot;{path:&#x27;/news/detail&#x27;}&quot;&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">           {{news.name}}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">         &lt;/RouterLink&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">       &lt;/nav&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">       &lt;div class=&quot;news-detail&quot;&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">         &lt;RouterView/&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">       &lt;/div&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     &lt;/div&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   &lt;/template&gt;</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="48-路由传参">4.8. 【路由传参】<a href="#48-路由传参" class="hash-link" aria-label="Direct link to 4.8. 【路由传参】" title="Direct link to 4.8. 【路由传参】">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="query参数">query参数<a href="#query参数" class="hash-link" aria-label="Direct link to query参数" title="Direct link to query参数">​</a></h3>
<ol>
<li>传递参数</li>
</ol>
<div class="language-vue codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-vue codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">      &lt;!-- 跳转并携带query参数（to的字符串写法） --&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      &lt;router-link to=&quot;/news/detail?a=1&amp;b=2&amp;content=欢迎你&quot;&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      	跳转</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      &lt;/router-link&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      				</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      &lt;!-- 跳转并携带query参数（to的对象写法） --&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      &lt;RouterLink </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        :to=&quot;{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">          //name:&#x27;xiang&#x27;, //用name也可以跳转</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">          path:&#x27;/news/detail&#x27;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">          query:{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            id:news.id,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            title:news.title,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            content:news.content</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">          }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        }&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      &gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        {{news.title}}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      &lt;/RouterLink&gt;</span><br></span></code></pre></div></div>
<ol start="2">
<li>接收参数：</li>
</ol>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token keyword module" style="font-style:italic">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token imports">useRoute</span><span class="token imports punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token keyword module" style="font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;vue-router&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> route </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">useRoute</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// 打印query参数</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token console class-name" style="color:rgb(255, 203, 107)">console</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">log</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">route</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">query</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="params参数">params参数<a href="#params参数" class="hash-link" aria-label="Direct link to params参数" title="Direct link to params参数">​</a></h3>
<ol>
<li>传递参数</li>
</ol>
<div class="language-vue codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-vue codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">      &lt;!-- 跳转并携带params参数（to的字符串写法） --&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      &lt;RouterLink :to=&quot;`/news/detail/001/新闻001/内容001`&quot;&gt;{{news.title}}&lt;/RouterLink&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      				</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      &lt;!-- 跳转并携带params参数（to的对象写法） --&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      &lt;RouterLink </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        :to=&quot;{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">          name:&#x27;xiang&#x27;, //用name跳转</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">          params:{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            id:news.id,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            title:news.title,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            content:news.title</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">          }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        }&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      &gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        {{news.title}}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      &lt;/RouterLink&gt;</span><br></span></code></pre></div></div>
<ol start="2">
<li>接收参数：</li>
</ol>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token keyword module" style="font-style:italic">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token imports">useRoute</span><span class="token imports punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token keyword module" style="font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;vue-router&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> route </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">useRoute</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// 打印params参数</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token console class-name" style="color:rgb(255, 203, 107)">console</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">log</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">route</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">params</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><br></span></code></pre></div></div>
<blockquote>
<p>备注1：传递<code>params</code>参数时，若使用<code>to</code>的对象写法，必须使用<code>name</code>配置项，不能用<code>path</code>。</p>
<p>备注2：传递<code>params</code>参数时，需要提前在规则中占位。</p>
</blockquote>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="49-路由的props配置">4.9. 【路由的props配置】<a href="#49-路由的props配置" class="hash-link" aria-label="Direct link to 4.9. 【路由的props配置】" title="Direct link to 4.9. 【路由的props配置】">​</a></h2>
<p>作用：让路由组件更方便的收到参数（可以将路由参数作为<code>props</code>传给组件）</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">	</span><span class="token literal-property property">name</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;xiang&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">	</span><span class="token literal-property property">path</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;detail/:id/:title/:content&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">	</span><span class="token literal-property property">component</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token maybe-class-name">Detail</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// props的对象写法，作用：把对象中的每一组key-value作为props传给Detail组件</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// props:{a:1,b:2,c:3}, </span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// props的布尔值写法，作用：把收到了每一组params参数，作为props传给Detail组件</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// props:true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// props的函数写法，作用：把返回的对象中每一组key-value作为props传给Detail组件</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token function" style="color:rgb(130, 170, 255)">props</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">route</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword control-flow" style="font-style:italic">return</span><span class="token plain"> route</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">query</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="410--replace属性">4.10. 【 replace属性】<a href="#410--replace属性" class="hash-link" aria-label="Direct link to 4.10. 【 replace属性】" title="Direct link to 4.10. 【 replace属性】">​</a></h2>
<ol>
<li>
<p>作用：控制路由跳转时操作浏览器历史记录的模式。</p>
</li>
<li>
<p>浏览器的历史记录有两种写入方式：分别为<code>push</code>和<code>replace</code>：</p>
<ul>
<li><code>push</code>是追加历史记录（默认值）。</li>
<li><code>replace</code>是替换当前记录。</li>
</ul>
</li>
<li>
<p>开启<code>replace</code>模式：</p>
</li>
</ol>
<div class="language-vue codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-vue codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">     &lt;RouterLink replace .......&gt;News&lt;/RouterLink&gt;</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="411-编程式导航">4.11. 【编程式导航】<a href="#411-编程式导航" class="hash-link" aria-label="Direct link to 4.11. 【编程式导航】" title="Direct link to 4.11. 【编程式导航】">​</a></h2>
<p>路由组件的两个重要的属性：<code>$route</code>和<code>$router</code>变成了两个<code>hooks</code></p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token keyword module" style="font-style:italic">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token imports">useRoute</span><span class="token imports punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token imports">useRouter</span><span class="token imports punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token keyword module" style="font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;vue-router&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> route </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">useRoute</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> router </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">useRouter</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token console class-name" style="color:rgb(255, 203, 107)">console</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">log</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">route</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">query</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token console class-name" style="color:rgb(255, 203, 107)">console</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">log</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">route</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">parmas</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token console class-name" style="color:rgb(255, 203, 107)">console</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">log</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">router</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">push</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token console class-name" style="color:rgb(255, 203, 107)">console</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">log</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">router</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">replace</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="412-重定向">4.12. 【重定向】<a href="#412-重定向" class="hash-link" aria-label="Direct link to 4.12. 【重定向】" title="Direct link to 4.12. 【重定向】">​</a></h2>
<ol>
<li>
<p>作用：将特定的路径，重新定向到已有路由。</p>
</li>
<li>
<p>具体编码：</p>
</li>
</ol>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">       </span><span class="token literal-property property">path</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;/&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">       </span><span class="token literal-property property">redirect</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;/about&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre></div></div>
<h1>5. pinia</h1>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="51准备一个效果">5.1【准备一个效果】<a href="#51准备一个效果" class="hash-link" aria-label="Direct link to 5.1【准备一个效果】" title="Direct link to 5.1【准备一个效果】">​</a></h2>
<p><img decoding="async" loading="lazy" src="/mdviewer/assets/images/pinia_example-9076741db6c3d3a810365c3764e194ed.gif" width="1625" height="1381" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="52搭建-pinia-环境">5.2【搭建 pinia 环境】<a href="#52搭建-pinia-环境" class="hash-link" aria-label="Direct link to 5.2【搭建 pinia 环境】" title="Direct link to 5.2【搭建 pinia 环境】">​</a></h2>
<p>第一步：<code>npm install pinia</code></p>
<p>第二步：操作<code>src/main.ts</code></p>
<div class="language-ts codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-ts codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">import</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> createApp </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;vue&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">import</span><span class="token plain"> App </span><span class="token keyword" style="font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;./App.vue&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">/* 引入createPinia，用于创建pinia */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">import</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> createPinia </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;pinia&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">/* 创建pinia */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> pinia </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">createPinia</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> app </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">createApp</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">App</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">/* 使用插件 */</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">app</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">use</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">pinia</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">app</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">mount</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;#app&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><br></span></code></pre></div></div>
<p>此时开发者工具中已经有了<code>pinia</code>选项</p>
<p><img decoding="async" loading="lazy" src="https://cdn.nlark.com/yuque/0/2023/png/35780599/1684309952481-c67f67f9-d1a3-4d69-8bd6-2b381e003f31.png" alt="" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="53存储读取数据">5.3【存储+读取数据】<a href="#53存储读取数据" class="hash-link" aria-label="Direct link to 5.3【存储+读取数据】" title="Direct link to 5.3【存储+读取数据】">​</a></h2>
<ol>
<li>
<p><code>Store</code>是一个保存：<strong>状态</strong>、<strong>业务逻辑</strong> 的实体，每个组件都可以<strong>读取</strong>、<strong>写入</strong>它。</p>
</li>
<li>
<p>它有三个概念：<code>state</code>、<code>getter</code>、<code>action</code>，相当于组件中的： <code>data</code>、 <code>computed</code> 和 <code>methods</code>。</p>
</li>
<li>
<p>具体编码：<code>src/store/count.ts</code></p>
</li>
</ol>
<div class="language-ts codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-ts codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// 引入defineStore用于创建store</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token keyword" style="font-style:italic">import</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">defineStore</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;pinia&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// 定义并暴露一个store</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token keyword" style="font-style:italic">export</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> useCountStore </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">defineStore</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;count&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// 动作</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     actions</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// 状态</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     </span><span class="token function" style="color:rgb(130, 170, 255)">state</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">       </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">         sum</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token number" style="color:rgb(247, 140, 108)">6</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">       </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// 计算</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     getters</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><br></span></code></pre></div></div>
<ol start="4">
<li>具体编码：<code>src/store/talk.ts</code></li>
</ol>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// 引入defineStore用于创建store</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token keyword module" style="font-style:italic">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token imports">defineStore</span><span class="token imports punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token keyword module" style="font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;pinia&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// 定义并暴  露一个store</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token keyword module" style="font-style:italic">export</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> useTalkStore </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">defineStore</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;talk&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// 动作</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     </span><span class="token literal-property property">actions</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// 状态</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     </span><span class="token function" style="color:rgb(130, 170, 255)">state</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">       </span><span class="token keyword control-flow" style="font-style:italic">return</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">         </span><span class="token literal-property property">talkList</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">           </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token literal-property property">id</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;yuysada01&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token literal-property property">content</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;你今天有点怪，哪里怪？怪好看的！&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        		</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token literal-property property">id</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;yuysada02&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token literal-property property">content</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;草莓、蓝莓、蔓越莓，你想我了没？&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">           </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token literal-property property">id</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;yuysada03&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token literal-property property">content</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;心里给你留了一块地，我的死心塌地&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">         </span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">       </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// 计算</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     </span><span class="token literal-property property">getters</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><br></span></code></pre></div></div>
<ol start="5">
<li>组件中使用<code>state</code>中的数据</li>
</ol>
<div class="language-vue codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-vue codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">   &lt;template&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     &lt;h2&gt;当前求和为：{{ sumStore.sum }}&lt;/h2&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   &lt;/template&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   &lt;script setup lang=&quot;ts&quot; name=&quot;Count&quot;&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     // 引入对应的useXxxxxStore	</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     import {useSumStore} from &#x27;@/store/sum&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     // 调用useXxxxxStore得到对应的store</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     const sumStore = useSumStore()</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   &lt;/script&gt;</span><br></span></code></pre></div></div>
<div class="language-vue codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-vue codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">   &lt;template&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   	&lt;ul&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">       &lt;li v-for=&quot;talk in talkStore.talkList&quot; :key=&quot;talk.id&quot;&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">         {{ talk.content }}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">       &lt;/li&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     &lt;/ul&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   &lt;/template&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   &lt;script setup lang=&quot;ts&quot; name=&quot;Count&quot;&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     import axios from &#x27;axios&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     import {useTalkStore} from &#x27;@/store/talk&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     const talkStore = useTalkStore()</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   &lt;/script&gt;</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="54修改数据三种方式">5.4.【修改数据】(三种方式)<a href="#54修改数据三种方式" class="hash-link" aria-label="Direct link to 5.4.【修改数据】(三种方式)" title="Direct link to 5.4.【修改数据】(三种方式)">​</a></h2>
<ol>
<li>第一种修改方式，直接修改</li>
</ol>
<div class="language-ts codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-ts codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">   countStore</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">sum </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">666</span><br></span></code></pre></div></div>
<ol start="2">
<li>第二种修改方式：批量修改</li>
</ol>
<div class="language-ts codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-ts codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">   countStore</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">$patch</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     sum</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token number" style="color:rgb(247, 140, 108)">999</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     school</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;atguigu&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><br></span></code></pre></div></div>
<ol start="3">
<li>第三种修改方式：借助<code>action</code>修改（<code>action</code>中可以编写一些业务逻辑）</li>
</ol>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token keyword module" style="font-style:italic">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token imports"> defineStore </span><span class="token imports punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token keyword module" style="font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;pinia&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token keyword module" style="font-style:italic">export</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> useCountStore </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">defineStore</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;count&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     </span><span class="token doc-comment comment" style="color:rgb(105, 112, 152);font-style:italic">/*************/</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     </span><span class="token literal-property property">actions</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">       </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">//加</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">       </span><span class="token function" style="color:rgb(130, 170, 255)">increment</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter literal-property property">value</span><span class="token parameter operator" style="color:rgb(137, 221, 255)">:</span><span class="token parameter">number</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">         </span><span class="token keyword control-flow" style="font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">this</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">sum</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">10</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">           </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">//操作countStore中的sum</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">           </span><span class="token keyword" style="font-style:italic">this</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">sum</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">+=</span><span class="token plain"> value</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">         </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">       </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">       </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">//减</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">       </span><span class="token function" style="color:rgb(130, 170, 255)">decrement</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter literal-property property">value</span><span class="token parameter operator" style="color:rgb(137, 221, 255)">:</span><span class="token parameter">number</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">         </span><span class="token keyword control-flow" style="font-style:italic">if</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">this</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">sum</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">           </span><span class="token keyword" style="font-style:italic">this</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">sum</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">-=</span><span class="token plain"> value</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">         </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">       </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     </span><span class="token doc-comment comment" style="color:rgb(105, 112, 152);font-style:italic">/*************/</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><br></span></code></pre></div></div>
<ol start="4">
<li>组件中调用<code>action</code>即可</li>
</ol>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// 使用countStore</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> countStore </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">useCountStore</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// 调用对应action</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   countStore</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">incrementOdd</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">n</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">value</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="55storetorefs">5.5.【storeToRefs】<a href="#55storetorefs" class="hash-link" aria-label="Direct link to 5.5.【storeToRefs】" title="Direct link to 5.5.【storeToRefs】">​</a></h2>
<ul>
<li>借助<code>storeToRefs</code>将<code>store</code>中的数据转为<code>ref</code>对象，方便在模板中使用。</li>
<li>注意：<code>pinia</code>提供的<code>storeToRefs</code>只会将数据做转换，而<code>Vue</code>的<code>toRefs</code>会转换<code>store</code>中数据。</li>
</ul>
<div class="language-vue codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-vue codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;template&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">	&lt;div class=&quot;count&quot;&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">		&lt;h2&gt;当前求和为：{{sum}}&lt;/h2&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">	&lt;/div&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;/template&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;script setup lang=&quot;ts&quot; name=&quot;Count&quot;&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  import { useCountStore } from &#x27;@/store/count&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  /* 引入storeToRefs */</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  import { storeToRefs } from &#x27;pinia&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">	/* 得到countStore */</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  const countStore = useCountStore()</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  /* 使用storeToRefs转换countStore，随后解构 */</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  const {sum} = storeToRefs(countStore)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;/script&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="56getters">5.6.【getters】<a href="#56getters" class="hash-link" aria-label="Direct link to 5.6.【getters】" title="Direct link to 5.6.【getters】">​</a></h2>
<ol>
<li>
<p>概念：当<code>state</code>中的数据，需要经过处理后再使用时，可以使用<code>getters</code>配置。</p>
</li>
<li>
<p>追加<code>getters</code>配置。</p>
</li>
</ol>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">     </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// 引入defineStore用于创建store</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     </span><span class="token keyword module" style="font-style:italic">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token imports">defineStore</span><span class="token imports punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token keyword module" style="font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;pinia&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// 定义并暴露一个store</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     </span><span class="token keyword module" style="font-style:italic">export</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> useCountStore </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">defineStore</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;count&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">       </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// 动作</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">       </span><span class="token literal-property property">actions</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">         </span><span class="token doc-comment comment" style="color:rgb(105, 112, 152);font-style:italic">/************/</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">       </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">       </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// 状态</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">       </span><span class="token function" style="color:rgb(130, 170, 255)">state</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">         </span><span class="token keyword control-flow" style="font-style:italic">return</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">           </span><span class="token literal-property property">sum</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">           </span><span class="token literal-property property">school</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;atguigu&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">         </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">       </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">       </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// 计算</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">       </span><span class="token literal-property property">getters</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">         </span><span class="token literal-property property">bigSum</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">state</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token parameter">number</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token plain"> state</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">sum</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token number" style="color:rgb(247, 140, 108)">10</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">         </span><span class="token function" style="color:rgb(130, 170, 255)">upperSchool</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain">string</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">           </span><span class="token keyword control-flow" style="font-style:italic">return</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">this</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain"> </span><span class="token property-access">school</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">toUpperCase</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">         </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">       </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><br></span></code></pre></div></div>
<ol start="3">
<li>组件中读取数据：</li>
</ol>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">     </span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">increment</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain">decrement</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> countStore</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     </span><span class="token keyword" style="font-style:italic">let</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">sum</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain">school</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain">bigSum</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain">upperSchool</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">storeToRefs</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">countStore</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><br></span></code></pre></div></div>
<p>​</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="57subscribe">5.7.【$subscribe】<a href="#57subscribe" class="hash-link" aria-label="Direct link to 5.7.【$subscribe】" title="Direct link to 5.7.【$subscribe】">​</a></h2>
<p>通过 store 的 <code>$subscribe()</code> 方法侦听 <code>state</code> 及其变化</p>
<div class="language-ts codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-ts codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">talkStore</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">$subscribe</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">mutate</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain">state</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token builtin" style="color:rgb(130, 170, 255)">console</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">log</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;LoveTalk&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain">mutate</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain">state</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  localStorage</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">setItem</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;talk&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token constant" style="color:rgb(130, 170, 255)">JSON</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">stringify</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">talkList</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">value</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="58-store组合式写法">5.8. 【store组合式写法】<a href="#58-store组合式写法" class="hash-link" aria-label="Direct link to 5.8. 【store组合式写法】" title="Direct link to 5.8. 【store组合式写法】">​</a></h2>
<div class="language-ts codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-ts codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">import</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">defineStore</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;pinia&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">import</span><span class="token plain"> axios </span><span class="token keyword" style="font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;axios&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">import</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">nanoid</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;nanoid&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">import</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">reactive</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;vue&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">export</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> useTalkStore </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">defineStore</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;talk&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// talkList就是state</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> talkList </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">reactive</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token constant" style="color:rgb(130, 170, 255)">JSON</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">parse</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">localStorage</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">getItem</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;talkList&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">as</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">string</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">||</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// getATalk函数相当于action</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">async</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">getATalk</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// 发请求，下面这行的写法是：连续解构赋值+重命名</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">let</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">data</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">content</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain">title</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">await</span><span class="token plain"> axios</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">get</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;https://api.uomg.com/api/rand.qinghua?format=json&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// 把请求回来的字符串，包装成一个对象</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">let</span><span class="token plain"> obj </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">id</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token function" style="color:rgb(130, 170, 255)">nanoid</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain">title</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// 放到数组中</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    talkList</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">unshift</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">obj</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">talkList</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain">getATalk</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><br></span></code></pre></div></div>
<h1>6. 组件通信</h1>
<p><strong><code>Vue3</code>组件通信和<code>Vue2</code>的区别：</strong></p>
<ul>
<li>移出事件总线，使用<code>mitt</code>代替。</li>
</ul>
<ul>
<li><code>vuex</code>换成了<code>pinia</code>。</li>
<li>把<code>.sync</code>优化到了<code>v-model</code>里面了。</li>
<li>把<code>$listeners</code>所有的东西，合并到<code>$attrs</code>中了。</li>
<li><code>$children</code>被砍掉了。</li>
</ul>
<p><strong>常见搭配形式：</strong></p>
<p><img decoding="async" loading="lazy" src="/mdviewer/assets/images/image-20231119185900990-032a6db39d6c600b30ac85538cea67a9.png" width="1036" height="854" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="61-props">6.1. 【props】<a href="#61-props" class="hash-link" aria-label="Direct link to 6.1. 【props】" title="Direct link to 6.1. 【props】">​</a></h2>
<p>概述：<code>props</code>是使用频率最高的一种通信方式，常用与 ：<strong>父 ↔ 子</strong>。</p>
<ul>
<li>若 <strong>父传子</strong>：属性值是<strong>非函数</strong>。</li>
<li>若 <strong>子传父</strong>：属性值是<strong>函数</strong>。</li>
</ul>
<p>父组件：</p>
<div class="language-vue codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-vue codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;template&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &lt;div class=&quot;father&quot;&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &lt;h3&gt;父组件，&lt;/h3&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">		&lt;h4&gt;我的车：{{ car }}&lt;/h4&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">		&lt;h4&gt;儿子给的玩具：{{ toy }}&lt;/h4&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">		&lt;Child :car=&quot;car&quot; :getToy=&quot;getToy&quot;/&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &lt;/div&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;/template&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;script setup lang=&quot;ts&quot; name=&quot;Father&quot;&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">	import Child from &#x27;./Child.vue&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">	import { ref } from &quot;vue&quot;;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">	// 数据</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">	const car = ref(&#x27;奔驰&#x27;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">	const toy = ref()</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">	// 方法</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">	function getToy(value:string){</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">		toy.value = value</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">	}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;/script&gt;</span><br></span></code></pre></div></div>
<p>子组件</p>
<div class="language-vue codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-vue codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;template&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &lt;div class=&quot;child&quot;&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &lt;h3&gt;子组件&lt;/h3&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">		&lt;h4&gt;我的玩具：{{ toy }}&lt;/h4&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">		&lt;h4&gt;父给我的车：{{ car }}&lt;/h4&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">		&lt;button @click=&quot;getToy(toy)&quot;&gt;玩具给父亲&lt;/button&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &lt;/div&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;/template&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;script setup lang=&quot;ts&quot; name=&quot;Child&quot;&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">	import { ref } from &quot;vue&quot;;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">	const toy = ref(&#x27;奥特曼&#x27;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">	</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">	defineProps([&#x27;car&#x27;,&#x27;getToy&#x27;])</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;/script&gt;</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="62-自定义事件">6.2. 【自定义事件】<a href="#62-自定义事件" class="hash-link" aria-label="Direct link to 6.2. 【自定义事件】" title="Direct link to 6.2. 【自定义事件】">​</a></h2>
<ol>
<li>概述：自定义事件常用于：<strong>子 =&gt; 父。</strong></li>
<li>注意区分好：原生事件、自定义事件。</li>
</ol>
<ul>
<li>原生事件：<!-- -->
<ul>
<li>事件名是特定的（<code>click</code>、<code>mosueenter</code>等等）</li>
<li>事件对象<code>$event</code>: 是包含事件相关信息的对象（<code>pageX</code>、<code>pageY</code>、<code>target</code>、<code>keyCode</code>）</li>
</ul>
</li>
<li>自定义事件：<!-- -->
<ul>
<li>事件名是任意名称</li>
<li><code>事件对象</code>$event<code>: 是调用</code>emit<code>时所提供的数据，可以是任意类型！！！</code></li>
</ul>
</li>
</ul>
<ol start="3">
<li>示例：</li>
</ol>
<div class="language-html codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-html codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">&lt;!--在父组件中，给子组件绑定自定义事件：--&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(255, 85, 114)">Child</span><span class="token tag" style="color:rgb(255, 85, 114)"> </span><span class="token tag attr-name" style="color:rgb(255, 203, 107)">@send-toy</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(199, 146, 234)">=</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag attr-value" style="color:rgb(255, 85, 114)">toy = $event</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">&lt;!--注意区分原生事件与自定义事件中的$event--&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(255, 85, 114)">button</span><span class="token tag" style="color:rgb(255, 85, 114)"> </span><span class="token tag attr-name" style="color:rgb(255, 203, 107)">@click</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(199, 146, 234)">=</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag attr-value" style="color:rgb(255, 85, 114)">toy = $event</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain">测试</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token tag" style="color:rgb(255, 85, 114)">button</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><br></span></code></pre></div></div>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">//子组件中，触发事件：</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token keyword" style="font-style:italic">this</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">$emit</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;send-toy&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> 具体数据</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="63-mitt">6.3. 【mitt】<a href="#63-mitt" class="hash-link" aria-label="Direct link to 6.3. 【mitt】" title="Direct link to 6.3. 【mitt】">​</a></h2>
<p>概述：与消息订阅与发布（<code>pubsub</code>）功能类似，可以实现任意组件间通信。</p>
<p>安装<code>mitt</code></p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">npm i mitt</span><br></span></code></pre></div></div>
<p>新建文件：<code>src\utils\emitter.ts</code></p>
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// 引入mitt </span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword module" style="font-style:italic">import</span><span class="token plain"> </span><span class="token imports">mitt</span><span class="token plain"> </span><span class="token keyword module" style="font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;mitt&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// 创建emitter</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> emitter </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">mitt</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">/*</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">  // 绑定事件</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">  emitter.on(&#x27;abc&#x27;,(value)=&gt;{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">    console.log(&#x27;abc事件被触发&#x27;,value)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">  })</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">  emitter.on(&#x27;xyz&#x27;,(value)=&gt;{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">    console.log(&#x27;xyz事件被触发&#x27;,value)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">  })</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">  setInterval(() =&gt; {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">    // 触发事件</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">    emitter.emit(&#x27;abc&#x27;,666)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">    emitter.emit(&#x27;xyz&#x27;,777)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">  }, 1000);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">  setTimeout(() =&gt; {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">    // 清理事件</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">    emitter.all.clear()</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">  }, 3000); </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">*/</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// 创建并暴露mitt</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword module" style="font-style:italic">export</span><span class="token plain"> </span><span class="token keyword module" style="font-style:italic">default</span><span class="token plain"> emitter</span><br></span></code></pre></div></div>
<p>接收数据的组件中：绑定事件、同时在销毁前解绑事件：</p>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">import</span><span class="token plain"> emitter </span><span class="token keyword" style="font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;@/utils/emitter&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">import</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> onUnmounted </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;vue&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// 绑定事件</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">emitter</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">on</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;send-toy&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">value</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token builtin" style="color:rgb(130, 170, 255)">console</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">log</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;send-toy事件被触发&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain">value</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">onUnmounted</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// 解绑事件</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  emitter</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">off</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;send-toy&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><br></span></code></pre></div></div>
<p>【第三步】：提供数据的组件，在合适的时候触发事件</p>
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token keyword module" style="font-style:italic">import</span><span class="token plain"> </span><span class="token imports">emitter</span><span class="token plain"> </span><span class="token keyword module" style="font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;@/utils/emitter&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">sendToy</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// 触发事件</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  emitter</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">emit</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;send-toy&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain">toy</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">value</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre></div></div>
<p><strong>注意这个重要的内置关系，总线依赖着这个内置关系</strong></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="64v-model">6.4.【v-model】<a href="#64v-model" class="hash-link" aria-label="Direct link to 6.4.【v-model】" title="Direct link to 6.4.【v-model】">​</a></h2>
<ol>
<li>
<p>概述：实现 <strong>父↔子</strong> 之间相互通信。</p>
</li>
<li>
<p>前序知识 —— <code>v-model</code>的本质</p>
</li>
</ol>
<div class="language-vue codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-vue codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">   &lt;!-- 使用v-model指令 --&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   &lt;input type=&quot;text&quot; v-model=&quot;userName&quot;&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   &lt;!-- v-model的本质是下面这行代码 --&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   &lt;input </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     type=&quot;text&quot; </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     :value=&quot;userName&quot; </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     @input=&quot;userName =(&lt;HTMLInputElement&gt;$event.target).value&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   &gt;</span><br></span></code></pre></div></div>
<ol start="3">
<li>组件标签上的<code>v-model</code>的本质：<code>:moldeValue</code> ＋ <code>update:modelValue</code>事件。</li>
</ol>
<div class="language-vue codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-vue codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">   &lt;!-- 组件标签上使用v-model指令 --&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   &lt;AtguiguInput v-model=&quot;userName&quot;/&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   &lt;!-- 组件标签上v-model的本质 --&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   &lt;AtguiguInput :modelValue=&quot;userName&quot; @update:model-value=&quot;userName = $event&quot;/&gt;</span><br></span></code></pre></div></div>
<p><code>AtguiguInput</code>组件中：</p>
<div class="language-vue codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-vue codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">   &lt;template&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     &lt;div class=&quot;box&quot;&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">       &lt;!--将接收的value值赋给input元素的value属性，目的是：为了呈现数据 --&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   		&lt;!--给input元素绑定原生input事件，触发input事件时，进而触发update:model-value事件--&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">       &lt;input </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">          type=&quot;text&quot; </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">          :value=&quot;modelValue&quot; </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">          @input=&quot;emit(&#x27;update:model-value&#x27;,$event.target.value)&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">       &gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     &lt;/div&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   &lt;/template&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   &lt;script setup lang=&quot;ts&quot; name=&quot;AtguiguInput&quot;&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     // 接收props</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     defineProps([&#x27;modelValue&#x27;])</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     // 声明事件</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     const emit = defineEmits([&#x27;update:model-value&#x27;])</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   &lt;/script&gt;</span><br></span></code></pre></div></div>
<ol start="4">
<li>也可以更换<code>value</code>，例如改成<code>abc</code></li>
</ol>
<div class="language-vue codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-vue codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">   &lt;!-- 也可以更换value，例如改成abc--&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   &lt;AtguiguInput v-model:abc=&quot;userName&quot;/&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   &lt;!-- 上面代码的本质如下 --&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   &lt;AtguiguInput :abc=&quot;userName&quot; @update:abc=&quot;userName = $event&quot;/&gt;</span><br></span></code></pre></div></div>
<p><code>AtguiguInput</code>组件中：</p>
<div class="language-vue codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-vue codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">   &lt;template&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     &lt;div class=&quot;box&quot;&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">       &lt;input </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">          type=&quot;text&quot; </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">          :value=&quot;abc&quot; </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">          @input=&quot;emit(&#x27;update:abc&#x27;,$event.target.value)&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">       &gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     &lt;/div&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   &lt;/template&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   &lt;script setup lang=&quot;ts&quot; name=&quot;AtguiguInput&quot;&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     // 接收props</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     defineProps([&#x27;abc&#x27;])</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     // 声明事件</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     const emit = defineEmits([&#x27;update:abc&#x27;])</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   &lt;/script&gt;</span><br></span></code></pre></div></div>
<ol start="5">
<li>如果<code>value</code>可以更换，那么就可以在组件标签上多次使用<code>v-model</code></li>
</ol>
<div class="language-vue codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-vue codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">   &lt;AtguiguInput v-model:abc=&quot;userName&quot; v-model:xyz=&quot;password&quot;/&gt;</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="65attrs-">6.5.【$attrs 】<a href="#65attrs-" class="hash-link" aria-label="Direct link to 6.5.【$attrs 】" title="Direct link to 6.5.【$attrs 】">​</a></h2>
<ol>
<li>
<p>概述：<code>$attrs</code>用于实现<strong>当前组件的父组件</strong>，向<strong>当前组件的子组件</strong>通信（<strong>祖→孙</strong>）。</p>
</li>
<li>
<p>具体说明：<code>$attrs</code>是一个对象，包含所有父组件传入的标签属性。</p>
<blockquote>
<p>注意：<code>$attrs</code>会自动排除<code>props</code>中声明的属性(可以认为声明过的 <code>props</code> 被子组件自己“消费”了)</p>
</blockquote>
</li>
</ol>
<p>父组件：</p>
<div class="language-vue codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-vue codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;template&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &lt;div class=&quot;father&quot;&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &lt;h3&gt;父组件&lt;/h3&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">		&lt;Child :a=&quot;a&quot; :b=&quot;b&quot; :c=&quot;c&quot; :d=&quot;d&quot; v-bind=&quot;{x:100,y:200}&quot; :updateA=&quot;updateA&quot;/&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &lt;/div&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;/template&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;script setup lang=&quot;ts&quot; name=&quot;Father&quot;&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">	import Child from &#x27;./Child.vue&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">	import { ref } from &quot;vue&quot;;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">	let a = ref(1)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">	let b = ref(2)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">	let c = ref(3)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">	let d = ref(4)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">	function updateA(value){</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">		a.value = value</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">	}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;/script&gt;</span><br></span></code></pre></div></div>
<p>子组件：</p>
<div class="language-vue codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-vue codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;template&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">	&lt;div class=&quot;child&quot;&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">		&lt;h3&gt;子组件&lt;/h3&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">		&lt;GrandChild v-bind=&quot;$attrs&quot;/&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">	&lt;/div&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;/template&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;script setup lang=&quot;ts&quot; name=&quot;Child&quot;&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">	import GrandChild from &#x27;./GrandChild.vue&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;/script&gt;</span><br></span></code></pre></div></div>
<p>孙组件：</p>
<div class="language-vue codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-vue codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;template&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">	&lt;div class=&quot;grand-child&quot;&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">		&lt;h3&gt;孙组件&lt;/h3&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">		&lt;h4&gt;a：{{ a }}&lt;/h4&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">		&lt;h4&gt;b：{{ b }}&lt;/h4&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">		&lt;h4&gt;c：{{ c }}&lt;/h4&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">		&lt;h4&gt;d：{{ d }}&lt;/h4&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">		&lt;h4&gt;x：{{ x }}&lt;/h4&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">		&lt;h4&gt;y：{{ y }}&lt;/h4&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">		&lt;button @click=&quot;updateA(666)&quot;&gt;点我更新A&lt;/button&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">	&lt;/div&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;/template&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;script setup lang=&quot;ts&quot; name=&quot;GrandChild&quot;&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">	defineProps([&#x27;a&#x27;,&#x27;b&#x27;,&#x27;c&#x27;,&#x27;d&#x27;,&#x27;x&#x27;,&#x27;y&#x27;,&#x27;updateA&#x27;])</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;/script&gt;</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="66-refsparent">6.6. 【$refs、$parent】<a href="#66-refsparent" class="hash-link" aria-label="Direct link to 6.6. 【$refs、$parent】" title="Direct link to 6.6. 【$refs、$parent】">​</a></h2>
<ol>
<li>
<p>概述：</p>
<ul>
<li><code>$refs</code>用于 ：<strong>父→子。</strong></li>
<li><code>$parent</code>用于：<strong>子→父。</strong></li>
</ul>
</li>
<li>
<p>原理如下：</p>
<table><thead><tr><th>属性</th><th>说明</th></tr></thead><tbody><tr><td><code>$refs</code></td><td>值为对象，包含所有被<code>ref</code>属性标识的<code>DOM</code>元素或组件实例。</td></tr><tr><td><code>$parent</code></td><td>值为对象，当前组件的父组件实例对象。</td></tr></tbody></table>
</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="67-provideinject">6.7. 【provide、inject】<a href="#67-provideinject" class="hash-link" aria-label="Direct link to 6.7. 【provide、inject】" title="Direct link to 6.7. 【provide、inject】">​</a></h2>
<ol>
<li>
<p>概述：实现<strong>祖孙组件</strong>直接通信</p>
</li>
<li>
<p>具体使用：</p>
<ul>
<li>在祖先组件中通过<code>provide</code>配置向后代组件提供数据</li>
<li>在后代组件中通过<code>inject</code>配置来声明接收数据</li>
</ul>
</li>
<li>
<p>具体编码：</p>
<p>【第一步】父组件中，使用<code>provide</code>提供数据</p>
</li>
</ol>
<div class="language-vue codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-vue codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">   &lt;template&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     &lt;div class=&quot;father&quot;&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">       &lt;h3&gt;父组件&lt;/h3&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">       &lt;h4&gt;资产  ：{{ money }}&lt;/h4&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">       &lt;h4&gt;汽车：{{ car }}&lt;/h4&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">       &lt;button @click=&quot;money += 1&quot;&gt;资产+1&lt;/button&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">       &lt;button @click=&quot;car.price += 1&quot;&gt;汽车价格+1&lt;/button&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">       &lt;Child/&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     &lt;/div&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   &lt;/template&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   &lt;script setup lang=&quot;ts&quot; name=&quot;Father&quot;&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     import Child from &#x27;./Child.vue&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     import { ref,reactive,provide } from &quot;vue&quot;;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     // 数据</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     let money = ref(100)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     let car = reactive({</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">       brand:&#x27;奔驰&#x27;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">       price:100</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     })</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     // 用于更新money的方法</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     function updateMoney(value:number){</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">       money.value += value</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     // 提供数据</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     provide(&#x27;moneyContext&#x27;,{money,updateMoney})</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     provide(&#x27;car&#x27;,car)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   &lt;/script&gt;</span><br></span></code></pre></div></div>
<blockquote>
<p>注意：子组件中不用编写任何东西，是不受到任何打扰的</p>
</blockquote>
<p>【第二步】孙组件中使用<code>inject</code>配置项接受数据。</p>
<div class="language-vue codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-vue codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">   &lt;template&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     &lt;div class=&quot;grand-child&quot;&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">       &lt;h3&gt;我是孙组件&lt;/h3&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">       &lt;h4&gt;资产：{{ money }}&lt;/h4&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">       &lt;h4&gt;汽车：{{ car }}&lt;/h4&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">       &lt;button @click=&quot;updateMoney(6)&quot;&gt;点我&lt;/button&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     &lt;/div&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   &lt;/template&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   &lt;script setup lang=&quot;ts&quot; name=&quot;GrandChild&quot;&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     import { inject } from &#x27;vue&#x27;;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     // 注入数据</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    let {money,updateMoney} = inject(&#x27;moneyContext&#x27;,{money:0,updateMoney:(x:number)=&gt;{}})</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     let car = inject(&#x27;car&#x27;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;/script&gt;</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="68-pinia">6.8. 【pinia】<a href="#68-pinia" class="hash-link" aria-label="Direct link to 6.8. 【pinia】" title="Direct link to 6.8. 【pinia】">​</a></h2>
<p>参考之前<code>pinia</code>部分的讲解</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="69-slot">6.9. 【slot】<a href="#69-slot" class="hash-link" aria-label="Direct link to 6.9. 【slot】" title="Direct link to 6.9. 【slot】">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="1-默认插槽">1. 默认插槽<a href="#1-默认插槽" class="hash-link" aria-label="Direct link to 1. 默认插槽" title="Direct link to 1. 默认插槽">​</a></h3>
<p><img decoding="async" loading="lazy" src="http://49.232.112.44//assets/2025/06/06/default_slot.png" alt="img" class="img_ev3q"></p>
<div class="language-vue codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-vue codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">父组件中：</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &lt;Category title=&quot;今日热门游戏&quot;&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">          &lt;ul&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &lt;li v-for=&quot;g in games&quot; :key=&quot;g.id&quot;&gt;{{ g.name }}&lt;/li&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">          &lt;/ul&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &lt;/Category&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">子组件中：</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &lt;template&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">          &lt;div class=&quot;item&quot;&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &lt;h3&gt;{{ title }}&lt;/h3&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &lt;!-- 默认插槽 --&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &lt;slot&gt;&lt;/slot&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">          &lt;/div&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &lt;/template&gt;</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="2-具名插槽">2. 具名插槽<a href="#2-具名插槽" class="hash-link" aria-label="Direct link to 2. 具名插槽" title="Direct link to 2. 具名插槽">​</a></h3>
<div class="language-vue codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-vue codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">父组件中：</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &lt;Category title=&quot;今日热门游戏&quot;&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">          &lt;template v-slot:s1&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &lt;ul&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">              &lt;li v-for=&quot;g in games&quot; :key=&quot;g.id&quot;&gt;{{ g.name }}&lt;/li&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &lt;/ul&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">          &lt;/template&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">          &lt;template #s2&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &lt;a href=&quot;&quot;&gt;更多&lt;/a&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">          &lt;/template&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &lt;/Category&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">子组件中：</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &lt;template&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">          &lt;div class=&quot;item&quot;&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &lt;h3&gt;{{ title }}&lt;/h3&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &lt;slot name=&quot;s1&quot;&gt;&lt;/slot&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &lt;slot name=&quot;s2&quot;&gt;&lt;/slot&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">          &lt;/div&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &lt;/template&gt;</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="3-作用域插槽">3. 作用域插槽<a href="#3-作用域插槽" class="hash-link" aria-label="Direct link to 3. 作用域插槽" title="Direct link to 3. 作用域插槽">​</a></h3>
<ol>
<li>
<p>理解：<code>数据在组件的自身，但根据数据生成的结构需要组件的使用者来决定。</code>（新闻数据在<code>News</code>组件中，但使用数据所遍历出来的结构由<code>App</code>组件决定）</p>
</li>
<li>
<p>具体编码：</p>
</li>
</ol>
<div class="language-vue codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-vue codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">   父组件中：</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">         &lt;Game v-slot=&quot;params&quot;&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">         &lt;!-- &lt;Game v-slot:default=&quot;params&quot;&gt; --&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">         &lt;!-- &lt;Game #default=&quot;params&quot;&gt; --&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">           &lt;ul&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">             &lt;li v-for=&quot;g in params.games&quot; :key=&quot;g.id&quot;&gt;{{ g.name }}&lt;/li&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">           &lt;/ul&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">         &lt;/Game&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   子组件中：</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">         &lt;template&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">           &lt;div class=&quot;category&quot;&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">             &lt;h2&gt;今日游戏榜单&lt;/h2&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">             &lt;slot :games=&quot;games&quot; a=&quot;哈哈&quot;&gt;&lt;/slot&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">           &lt;/div&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">         &lt;/template&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">         &lt;script setup lang=&quot;ts&quot; name=&quot;Category&quot;&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">           import {reactive} from &#x27;vue&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">           let games = reactive([</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">             {id:&#x27;asgdytsa01&#x27;,name:&#x27;英雄联盟&#x27;},</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">             {id:&#x27;asgdytsa02&#x27;,name:&#x27;王者荣耀&#x27;},</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">             {id:&#x27;asgdytsa03&#x27;,name:&#x27;红色警戒&#x27;},</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">             {id:&#x27;asgdytsa04&#x27;,name:&#x27;斗罗大陆&#x27;}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">           ])</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">         &lt;/script&gt;</span><br></span></code></pre></div></div>
<h1>7. 其它 API</h1>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="71shallowref-与-shallowreactive-">7.1.【shallowRef 与 shallowReactive 】<a href="#71shallowref-与-shallowreactive-" class="hash-link" aria-label="Direct link to 7.1.【shallowRef 与 shallowReactive 】" title="Direct link to 7.1.【shallowRef 与 shallowReactive 】">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="shallowref"><code>shallowRef</code><a href="#shallowref" class="hash-link" aria-label="Direct link to shallowref" title="Direct link to shallowref">​</a></h3>
<ol>
<li>
<p>作用：创建一个响应式数据，但只对顶层属性进行响应式处理。</p>
</li>
<li>
<p>用法：</p>
</li>
</ol>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token keyword" style="font-style:italic">let</span><span class="token plain"> myVar </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">shallowRef</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">initialValue</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><br></span></code></pre></div></div>
<ol start="3">
<li>特点：只跟踪引用值的变化，不关心值内部的属性变化。</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="shallowreactive"><code>shallowReactive</code><a href="#shallowreactive" class="hash-link" aria-label="Direct link to shallowreactive" title="Direct link to shallowreactive">​</a></h3>
<ol>
<li>
<p>作用：创建一个浅层响应式对象，只会使对象的最顶层属性变成响应式的，对象内部的嵌套属性则不会变成响应式的</p>
</li>
<li>
<p>用法：</p>
</li>
</ol>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> myObj </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">shallowReactive</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> </span><span class="token spread operator" style="color:rgb(137, 221, 255)">...</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><br></span></code></pre></div></div>
<ol start="3">
<li>特点：对象的顶层属性是响应式的，但嵌套对象的属性不是。</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="总结">总结<a href="#总结" class="hash-link" aria-label="Direct link to 总结" title="Direct link to 总结">​</a></h3>
<blockquote>
<p>通过使用 <a href="https://cn.vuejs.org/api/reactivity-advanced.html#shallowref" target="_blank" rel="noopener noreferrer"><code>shallowRef()</code></a> 和 <a href="https://cn.vuejs.org/api/reactivity-advanced.html#shallowreactive" target="_blank" rel="noopener noreferrer"><code>shallowReactive()</code></a> 来绕开深度响应。浅层式 <code>API</code> 创建的状态只在其顶层是响应式的，对所有深层的对象不会做任何处理，避免了对每一个内部属性做响应式所带来的性能成本，这使得属性的访问变得更快，可提升性能。</p>
</blockquote>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="72readonly-与-shallowreadonly">7.2.【readonly 与 shallowReadonly】<a href="#72readonly-与-shallowreadonly" class="hash-link" aria-label="Direct link to 7.2.【readonly 与 shallowReadonly】" title="Direct link to 7.2.【readonly 与 shallowReadonly】">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="readonly"><strong><code>readonly</code></strong><a href="#readonly" class="hash-link" aria-label="Direct link to readonly" title="Direct link to readonly">​</a></h3>
<ol>
<li>
<p>作用：用于创建一个对象的深只读副本。</p>
</li>
<li>
<p>用法：</p>
</li>
</ol>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> original </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">reactive</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> </span><span class="token spread operator" style="color:rgb(137, 221, 255)">...</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> readOnlyCopy </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">readonly</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">original</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><br></span></code></pre></div></div>
<ol start="3">
<li>
<p>特点：</p>
<ul>
<li>对象的所有嵌套属性都将变为只读。</li>
<li>任何尝试修改这个对象的操作都会被阻止（在开发模式下，还会在控制台中发出警告）。</li>
</ul>
</li>
<li>
<p>应用场景：</p>
<ul>
<li>创建不可变的状态快照。</li>
<li>保护全局状态或配置不被修改。</li>
</ul>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="shallowreadonly"><strong><code>shallowReadonly</code></strong><a href="#shallowreadonly" class="hash-link" aria-label="Direct link to shallowreadonly" title="Direct link to shallowreadonly">​</a></h3>
<ol>
<li>
<p>作用：与 <code>readonly</code> 类似，但只作用于对象的顶层属性。</p>
</li>
<li>
<p>用法：</p>
</li>
</ol>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> original </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">reactive</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> </span><span class="token spread operator" style="color:rgb(137, 221, 255)">...</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> shallowReadOnlyCopy </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">shallowReadonly</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">original</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><br></span></code></pre></div></div>
<ol start="3">
<li>
<p>特点：</p>
<ul>
<li>
<p>只将对象的顶层属性设置为只读，对象内部的嵌套属性仍然是可变的。</p>
</li>
<li>
<p>适用于只需保护对象顶层属性的场景。</p>
</li>
</ul>
</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="73toraw-与-markraw">7.3.【toRaw 与 markRaw】<a href="#73toraw-与-markraw" class="hash-link" aria-label="Direct link to 7.3.【toRaw 与 markRaw】" title="Direct link to 7.3.【toRaw 与 markRaw】">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="toraw"><code>toRaw</code><a href="#toraw" class="hash-link" aria-label="Direct link to toraw" title="Direct link to toraw">​</a></h3>
<ol>
<li>
<p>作用：用于获取一个响应式对象的原始对象， <code>toRaw</code> 返回的对象不再是响应式的，不会触发视图更新。</p>
<blockquote>
<p>官网描 述：这是一个可以用于临时读取而不引起代理访问/跟踪开销，或是写入而不触发更改的特殊方法。不建议保存对原始对象的持久引用，请谨慎使用。</p>
</blockquote>
<blockquote>
<p>何时使用？ —— 在需要将响应式对象传递给非 <code>Vue</code> 的库或外部系统时，使用 <code>toRaw</code> 可以确保它们收到的是普通对象</p>
</blockquote>
</li>
<li>
<p>具体编码：</p>
</li>
</ol>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token keyword module" style="font-style:italic">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token imports"> reactive</span><span class="token imports punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token imports">toRaw</span><span class="token imports punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token imports">markRaw</span><span class="token imports punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token imports">isReactive </span><span class="token imports punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token keyword module" style="font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;vue&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">/* toRaw */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// 响应式对象</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token keyword" style="font-style:italic">let</span><span class="token plain"> person </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">reactive</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token literal-property property">name</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;tony&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token literal-property property">age</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token number" style="color:rgb(247, 140, 108)">18</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// 原始对象</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token keyword" style="font-style:italic">let</span><span class="token plain"> rawPerson </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">toRaw</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">person</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">/* markRaw */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token keyword" style="font-style:italic">let</span><span class="token plain"> citysd </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">markRaw</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token literal-property property">id</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;asdda01&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token literal-property property">name</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;北京&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token literal-property property">id</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;asdda02&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token literal-property property">name</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;上海&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token literal-property property">id</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;asdda03&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token literal-property property">name</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;天津&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token literal-property property">id</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;asdda04&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token literal-property property">name</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;重庆&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// 根据原始对象citys去创建响应式对象citys2 —— 创建失败，因为citys被markRaw标记了</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token keyword" style="font-style:italic">let</span><span class="token plain"> citys2 </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">reactive</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">citys</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token console class-name" style="color:rgb(255, 203, 107)">console</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">log</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token function" style="color:rgb(130, 170, 255)">isReactive</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">person</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token console class-name" style="color:rgb(255, 203, 107)">console</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">log</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token function" style="color:rgb(130, 170, 255)">isReactive</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">rawPerson</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token console class-name" style="color:rgb(255, 203, 107)">console</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">log</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token function" style="color:rgb(130, 170, 255)">isReactive</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">citys</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token console class-name" style="color:rgb(255, 203, 107)">console</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">log</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token function" style="color:rgb(130, 170, 255)">isReactive</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">citys2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="markraw"><code>markRaw</code><a href="#markraw" class="hash-link" aria-label="Direct link to markraw" title="Direct link to markraw">​</a></h3>
<ol>
<li>
<p>作用：标记一个对象，使其<strong>永远不会</strong>变成响应式的。</p>
<blockquote>
<p>例如使用<code>mockjs</code>时，为了防止误把<code>mockjs</code>变为响应式对象，可以使用 <code>markRaw</code> 去标记<code>mockjs</code></p>
</blockquote>
</li>
<li>
<p>编码：</p>
</li>
</ol>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">/* markRaw */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token keyword" style="font-style:italic">let</span><span class="token plain"> citys </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">markRaw</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token literal-property property">id</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;asdda01&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token literal-property property">name</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;北京&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token literal-property property">id</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;asdda02&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token literal-property property">name</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;上海&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token literal-property property">id</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;asdda03&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token literal-property property">name</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;天津&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token literal-property property">id</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;asdda04&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token literal-property property">name</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;重庆&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// 根据原始对象citys去创建响应式对象citys2 —— 创建失败，因为citys被markRaw标记了</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token keyword" style="font-style:italic">let</span><span class="token plain"> citys2 </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">reactive</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">citys</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="74customref">7.4.【customRef】<a href="#74customref" class="hash-link" aria-label="Direct link to 7.4.【customRef】" title="Direct link to 7.4.【customRef】">​</a></h2>
<p>作用：创建一个自定义的<code>ref</code>，并对其依赖项跟踪和更新触发进行逻辑控制。</p>
<p>实现防抖效果（<code>useSumRef.ts</code>）：</p>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">import</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">customRef </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;vue&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">export</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">default</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">function</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">initValue</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token builtin" style="color:rgb(130, 170, 255)">string</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain">delay</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token builtin" style="color:rgb(130, 170, 255)">number</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">let</span><span class="token plain"> msg </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">customRef</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">track</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain">trigger</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">let</span><span class="token plain"> timer</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token builtin" style="color:rgb(130, 170, 255)">number</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token function" style="color:rgb(130, 170, 255)">get</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token function" style="color:rgb(130, 170, 255)">track</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// 告诉Vue数据msg很重要，要对msg持续关注，一旦变化就更新</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> initValue</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token function" style="color:rgb(130, 170, 255)">set</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">value</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token function" style="color:rgb(130, 170, 255)">clearTimeout</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">timer</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        timer </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">setTimeout</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">          initValue </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> value</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">          </span><span class="token function" style="color:rgb(130, 170, 255)">trigger</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">//通知Vue数据msg变化了</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> delay</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">msg</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre></div></div>
<p>组件中使用：</p>
<h1>8. Vue3新组件</h1>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="81-teleport">8.1. 【Teleport】<a href="#81-teleport" class="hash-link" aria-label="Direct link to 8.1. 【Teleport】" title="Direct link to 8.1. 【Teleport】">​</a></h2>
<ul>
<li>什么是Teleport？—— Teleport 是一种能够将我们的<strong>组件html结构</strong>移动到指定位置的技术。</li>
</ul>
<div class="language-html codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-html codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(255, 85, 114)">teleport</span><span class="token tag" style="color:rgb(255, 85, 114)"> </span><span class="token tag attr-name" style="color:rgb(255, 203, 107)">to</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(199, 146, 234)">=</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&#x27;</span><span class="token tag attr-value" style="color:rgb(255, 85, 114)">body</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&#x27;</span><span class="token tag" style="color:rgb(255, 85, 114)"> </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(255, 85, 114)">div</span><span class="token tag" style="color:rgb(255, 85, 114)"> </span><span class="token tag attr-name" style="color:rgb(255, 203, 107)">class</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(199, 146, 234)">=</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag attr-value" style="color:rgb(255, 85, 114)">modal</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag" style="color:rgb(255, 85, 114)"> </span><span class="token tag attr-name" style="color:rgb(255, 203, 107)">v-show</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(199, 146, 234)">=</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag attr-value" style="color:rgb(255, 85, 114)">isShow</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(255, 85, 114)">h2</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain">我是一个弹窗</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token tag" style="color:rgb(255, 85, 114)">h2</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(255, 85, 114)">p</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain">我是弹窗中的一些内容</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token tag" style="color:rgb(255, 85, 114)">p</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(255, 85, 114)">button</span><span class="token tag" style="color:rgb(255, 85, 114)"> </span><span class="token tag attr-name" style="color:rgb(255, 203, 107)">@click</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(199, 146, 234)">=</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag attr-value" style="color:rgb(255, 85, 114)">isShow = false</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain">关闭弹窗</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token tag" style="color:rgb(255, 85, 114)">button</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token tag" style="color:rgb(255, 85, 114)">div</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token tag" style="color:rgb(255, 85, 114)">teleport</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="82-suspense">8.2. 【Suspense】<a href="#82-suspense" class="hash-link" aria-label="Direct link to 8.2. 【Suspense】" title="Direct link to 8.2. 【Suspense】">​</a></h2>
<ul>
<li>等待异步组件时渲染一些额外内容，让应用有更好的用户体验</li>
<li>使用步骤：<!-- -->
<ul>
<li>异步引入组件</li>
<li>使用<code>Suspense</code>包裹组件，并配置好<code>default</code> 与 <code>fallback</code></li>
</ul>
</li>
</ul>
<div class="language-tsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-tsx codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token imports"> defineAsyncComponent</span><span class="token imports punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token imports maybe-class-name">Suspense</span><span class="token imports"> </span><span class="token imports punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;vue&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> </span><span class="token maybe-class-name">Child</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">defineAsyncComponent</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token arrow operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token keyword" style="font-style:italic">import</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;./Child.vue&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><br></span></code></pre></div></div>
<div class="language-vue codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-vue codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;template&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &lt;div class=&quot;app&quot;&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &lt;h3&gt;我是App组件&lt;/h3&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &lt;Suspense&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">          &lt;template v-slot:default&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &lt;Child/&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">          &lt;/template&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">          &lt;template v-slot:fallback&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &lt;h3&gt;加载中.......&lt;/h3&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">          &lt;/template&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &lt;/Suspense&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &lt;/div&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;/template&gt;</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="83全局api转移到应用对象">8.3.【全局API转移到应用对象】<a href="#83全局api转移到应用对象" class="hash-link" aria-label="Direct link to 8.3.【全局API转移到应用对象】" title="Direct link to 8.3.【全局API转移到应用对象】">​</a></h2>
<ul>
<li><code>app.component</code></li>
<li><code>app.config</code></li>
<li><code>app.directive</code></li>
<li><code>app.mount</code></li>
<li><code>app.unmount</code></li>
<li><code>app.use</code></li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="84其他">8.4.【其他】<a href="#84其他" class="hash-link" aria-label="Direct link to 8.4.【其他】" title="Direct link to 8.4.【其他】">​</a></h2>
<ul>
<li>
<p>过渡类名 <code>v-enter</code> 修改为 <code>v-enter-from</code>、过渡类名 <code>v-leave</code> 修改为 <code>v-leave-from</code>。</p>
</li>
<li>
<p><code>keyCode</code> 作为 <code>v-on</code> 修饰符的支持。</p>
</li>
<li>
<p><code>v-model</code> 指令在组件上的使用已经被重新设计，替换掉了 <code>v-bind.sync。</code></p>
</li>
<li>
<p><code>v-if</code> 和 <code>v-for</code> 在同一个元素身上使用时的优先级发生了变化。</p>
</li>
<li>
<p>移除了<code>$on</code>、<code>$off</code> 和 <code>$once</code> 实例方法。</p>
</li>
<li>
<p>移除了过滤器 <code>filter</code>。</p>
</li>
<li>
<p>移除了<code>$children</code> 实例 <code>propert</code>。</p>
<p>......</p>
</li>
</ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/hello-github-ui/mdviewer/edit/master/docs/Vue3入门到实战/Vue3快速上手.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/mdviewer/docs/Vue3入门到实战/TypeScript极速梳理"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Typesecirpt 极速梳理</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/mdviewer/docs/intro"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">关于本站</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#11-性能的提升" class="table-of-contents__link toc-highlight">1.1. 【性能的提升】</a></li><li><a href="#12-源码的升级" class="table-of-contents__link toc-highlight">1.2.【 源码的升级】</a></li><li><a href="#13-拥抱typescript" class="table-of-contents__link toc-highlight">1.3. 【拥抱TypeScript】</a></li><li><a href="#14-新的特性" class="table-of-contents__link toc-highlight">1.4. 【新的特性】</a></li><li><a href="#21-基于-vue-cli-创建" class="table-of-contents__link toc-highlight">2.1. 【基于 vue-cli 创建】</a></li><li><a href="#22-基于-vite-创建推荐" class="table-of-contents__link toc-highlight">2.2. 【基于 vite 创建】(推荐)</a></li><li><a href="#23-一个简单的效果" class="table-of-contents__link toc-highlight">2.3. 【一个简单的效果】</a></li><li><a href="#31--optionsapi-与-compositionapi" class="table-of-contents__link toc-highlight">3.1.  【OptionsAPI 与 CompositionAPI】</a><ul><li><a href="#options-api-的弊端" class="table-of-contents__link toc-highlight">Options API 的弊端</a></li><li><a href="#composition-api-的优势" class="table-of-contents__link toc-highlight">Composition API 的优势</a></li></ul></li><li><a href="#32-拉开序幕的-setup" class="table-of-contents__link toc-highlight">3.2. 【拉开序幕的 setup】</a><ul><li><a href="#setup-概述" class="table-of-contents__link toc-highlight">setup 概述</a></li><li><a href="#setup-的返回值" class="table-of-contents__link toc-highlight">setup 的返回值</a></li><li><a href="#setup-与-options-api-的关系" class="table-of-contents__link toc-highlight">setup 与 Options API 的关系</a></li><li><a href="#setup-语法糖" class="table-of-contents__link toc-highlight">setup 语法糖</a></li></ul></li><li><a href="#33-ref-创建基本类型的响应式数据" class="table-of-contents__link toc-highlight">3.3. 【ref 创建：基本类型的响应式数据】</a></li><li><a href="#34-reactive-创建对象类型的响应式数据" class="table-of-contents__link toc-highlight">3.4. 【reactive 创建：对象类型的响应式数据】</a></li><li><a href="#35-ref-创建对  象类型的响应式数据" class="table-of-contents__link toc-highlight">3.5. 【ref 创建：对象类型的响应式数据】</a></li><li><a href="#36-ref-对比-reactive" class="table-of-contents__link toc-highlight">3.6. 【ref 对比 reactive】</a></li><li><a href="#37-torefs-与-toref" class="table-of-contents__link toc-highlight">3.7. 【toRefs 与 toRef】</a></li><li><a href="#38-computed" class="table-of-contents__link toc-highlight">3.8. 【computed】</a></li><li><a href="#39watch" class="table-of-contents__link toc-highlight">3.9.【watch】</a><ul><li><a href="#-情况一" class="table-of-contents__link toc-highlight">* 情况一</a></li><li><a href="#-情况二" class="table-of-contents__link toc-highlight">* 情况二</a></li><li><a href="#--情况三" class="table-of-contents__link toc-highlight">*  情况三</a></li><li><a href="#-情况四" class="table-of-contents__link toc-highlight">* 情况四</a></li><li><a href="#-情况五" class="table-of-contents__link toc-highlight">* 情况五</a></li></ul></li><li><a href="#310-watcheffect" class="table-of-contents__link toc-highlight">3.10. 【watchEffect】</a></li><li><a href="#311-标签的-ref-属性" class="table-of-contents__link toc-highlight">3.11. 【标签的 ref 属性】</a></li><li><a href="#312-props" class="table-of-contents__link toc-highlight">3.12. 【props】</a></li><li><a href="#313-生命周期" class="table-of-contents__link toc-highlight">3.13. 【生命周期】</a></li><li><a href="#314-自定义hook" class="table-of-contents__link toc-highlight">3.14. 【自定义hook】</a></li><li><a href="#41-对路由的理解" class="table-of-contents__link toc-highlight">4.1. 【对路由的理解】</a></li><li><a href="#42-基本切换效果" class="table-of-contents__link toc-highlight">4.2. 【基本切换效果】</a></li><li><a href="#43-两个注意点" class="table-of-contents__link toc-highlight">4.3. 【两个注意点】</a></li><li><a href="#44路由器工作模式" class="table-of-contents__link toc-highlight">4.4.  【路由器工作模式】</a></li><li><a href="#45-to的两种写法" class="table-of-contents__link toc-highlight">4.5. 【to的两种写法】</a></li><li><a href="#46-命名路由" class="table-of-contents__link toc-highlight">4.6. 【命名路由】</a></li><li><a href="#47-嵌套路由" class="table-of-contents__link toc-highlight">4.7. 【嵌套路由】</a></li><li><a href="#48-路由传参" class="table-of-contents__link toc-highlight">4.8. 【路由传参】</a><ul><li><a href="#query参数" class="table-of-contents__link toc-highlight">query参数</a></li><li><a href="#params参数" class="table-of-contents__link toc-highlight">params参数</a></li></ul></li><li><a href="#49-路由的props配置" class="table-of-contents__link toc-highlight">4.9. 【路由的props配置】</a></li><li><a href="#410--replace属性" class="table-of-contents__link toc-highlight">4.10. 【 replace属性】</a></li><li><a href="#411-编程式导航" class="table-of-contents__link toc-highlight">4.11. 【编程式导航】</a></li><li><a href="#412-重定向" class="table-of-contents__link toc-highlight">4.12. 【重定向】</a></li><li><a href="#51准备一个效果" class="table-of-contents__link toc-highlight">5.1【准备一个效果】</a></li><li><a href="#52搭建-pinia-环境" class="table-of-contents__link toc-highlight">5.2【搭建 pinia 环境】</a></li><li><a href="#53存储读取数据" class="table-of-contents__link toc-highlight">5.3【存储+读取数据】</a></li><li><a href="#54修改数据三种方式" class="table-of-contents__link toc-highlight">5.4.【修改数据】(三种方式)</a></li><li><a href="#55storetorefs" class="table-of-contents__link toc-highlight">5.5.【storeToRefs】</a></li><li><a href="#56getters" class="table-of-contents__link toc-highlight">5.6.【getters】</a></li><li><a href="#57subscribe" class="table-of-contents__link toc-highlight">5.7.【$subscribe】</a></li><li><a href="#58-store组合式写法" class="table-of-contents__link toc-highlight">5.8. 【store组合式写法】</a></li><li><a href="#61-props" class="table-of-contents__link toc-highlight">6.1. 【props】</a></li><li><a href="#62-自定义事件" class="table-of-contents__link toc-highlight">6.2. 【自定义事件】</a></li><li><a href="#63-mitt" class="table-of-contents__link toc-highlight">6.3. 【mitt】</a></li><li><a href="#64v-model" class="table-of-contents__link toc-highlight">6.4.【v-model】</a></li><li><a href="#65attrs-" class="table-of-contents__link toc-highlight">6.5.【$attrs 】</a></li><li><a href="#66-refsparent" class="table-of-contents__link toc-highlight">6.6. 【$refs、$parent】</a></li><li><a href="#67-provideinject" class="table-of-contents__link toc-highlight">6.7. 【provide、inject】</a></li><li><a href="#68-pinia" class="table-of-contents__link toc-highlight">6.8. 【pinia】</a></li><li><a href="#69-slot" class="table-of-contents__link toc-highlight">6.9. 【slot】</a><ul><li><a href="#1-默认插槽" class="table-of-contents__link toc-highlight">1. 默认插槽</a></li><li><a href="#2-具名插槽" class="table-of-contents__link toc-highlight">2. 具名插槽</a></li><li><a href="#3-作用域插槽" class="table-of-contents__link toc-highlight">3. 作用域插槽</a></li></ul></li><li><a href="#71shallowref-与-shallowreactive-" class="table-of-contents__link toc-highlight">7.1.【shallowRef 与 shallowReactive 】</a><ul><li><a href="#shallowref" class="table-of-contents__link toc-highlight"><code>shallowRef</code></a></li><li><a href="#shallowreactive" class="table-of-contents__link toc-highlight"><code>shallowReactive</code></a></li><li><a href="#总结" class="table-of-contents__link toc-highlight">总结</a></li></ul></li><li><a href="#72readonly-与-shallowreadonly" class="table-of-contents__link toc-highlight">7.2.【readonly 与 shallowReadonly】</a><ul><li><a href="#readonly" class="table-of-contents__link toc-highlight"><strong><code>readonly</code></strong></a></li><li><a href="#shallowreadonly" class="table-of-contents__link toc-highlight"><strong><code>shallowReadonly</code></strong></a></li></ul></li><li><a href="#73toraw-与-markraw" class="table-of-contents__link toc-highlight">7.3.【toRaw 与 markRaw】</a><ul><li><a href="#toraw" class="table-of-contents__link toc-highlight"><code>toRaw</code></a></li><li><a href="#markraw" class="table-of-contents__link toc-highlight"><code>markRaw</code></a></li></ul></li><li><a href="#74customref" class="table-of-contents__link toc-highlight">7.4.【customRef】</a></li><li><a href="#81-teleport" class="table-of-contents__link toc-highlight">8.1. 【Teleport】</a></li><li><a href="#82-suspense" class="table-of-contents__link toc-highlight">8.2. 【Suspense】</a></li><li><a href="#83全局api转移到应用对象" class="table-of-contents__link toc-highlight">8.3.【全局API转移到应用对象】</a></li><li><a href="#84其他" class="table-of-contents__link toc-highlight">8.4.【其他】</a></li></ul></div></div></div></div></main></div></div></div></div>
</body>
</html>