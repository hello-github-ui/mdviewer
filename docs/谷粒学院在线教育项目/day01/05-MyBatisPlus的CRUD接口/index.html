<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-谷粒学院在线教育项目/day01/05-MyBatisPlus的CRUD接口" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.8.1">
<title data-rh="true">05-MyBatisPlus的CRUD接口 | 我的文档站</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://hello-github-ui.github.io/mdviewer/docs/谷粒学院在线教育项目/day01/05-MyBatisPlus的CRUD接口"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="05-MyBatisPlus的CRUD接口 | 我的文档站"><meta data-rh="true" name="description" content="1、插入操作"><meta data-rh="true" property="og:description" content="1、插入操作"><link data-rh="true" rel="icon" href="/mdviewer/system/logo.png"><link data-rh="true" rel="canonical" href="https://hello-github-ui.github.io/mdviewer/docs/谷粒学院在线教育项目/day01/05-MyBatisPlus的CRUD接口"><link data-rh="true" rel="alternate" href="https://hello-github-ui.github.io/mdviewer/docs/谷粒学院在线教育项目/day01/05-MyBatisPlus的CRUD接口" hreflang="en"><link data-rh="true" rel="alternate" href="https://hello-github-ui.github.io/mdviewer/docs/谷粒学院在线教育项目/day01/05-MyBatisPlus的CRUD接口" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://USTSQRVOIC-dsn.algolia.net" crossorigin="anonymous"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"05-MyBatisPlus的CRUD接口","item":"https://hello-github-ui.github.io/mdviewer/docs/谷粒学院在线教育项目/day01/05-MyBatisPlus的CRUD接口"}]}</script><link rel="search" type="application/opensearchdescription+xml" title="我的文档站" href="/mdviewer/opensearch.xml"><link rel="stylesheet" href="/mdviewer/assets/css/styles.8ce03ad6.css">
<script src="/mdviewer/assets/js/runtime~main.60638985.js" defer="defer"></script>
<script src="/mdviewer/assets/js/main.dccb32cd.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t="light";var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",e||t),document.documentElement.setAttribute("data-theme-choice",e||t)}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><a class="navbar__brand" href="/mdviewer/"></a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search (Command+K)"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><button style="position:fixed;top:75px;left:240px;z-index:1000;width:32px;height:32px;background:#fff;border:1px solid #eee;border-radius:50%;cursor:pointer;transition:left 0.3s;color:green" aria-label="收起侧边栏">&lt;</button><div class="sidebar-expanded" style="height:100%"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/mdviewer/docs/AI/AI">AI</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/mdviewer/docs/Docker教程/使用docker-desktop安装AlmaLinux8教程">Docker教程</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/mdviewer/docs/Git教程/Git Tutorial">Git教程</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/mdviewer/docs/Python基础/虚拟环境/01-搭建虚拟环境">Python基础</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/mdviewer/docs/Vue3入门到实战/TypeScript极速梳理">Vue3入门到实战</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/mdviewer/docs/intro">关于本站</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/mdviewer/docs/个人博客/AlmaLinux8安装PostgreSQL">个人博客</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/mdviewer/docs/书签/01-收藏的网站">书签</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/mdviewer/docs/油猴脚本开发教程/51CTO网站解除禁止复制">油猴脚本开发教程</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/mdviewer/docs/谷粒学院在线教育项目/day01/01-在线教育行业介绍">谷粒学院在线教育项目</a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/mdviewer/docs/谷粒学院在线教育项目/day01/01-在线教育行业介绍">day01</a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/mdviewer/docs/谷粒学院在线教育项目/day01/01-在线教育行业介绍">01-在线教育行业介绍</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/mdviewer/docs/谷粒学院在线教育项目/day01/02-在线教育项目简介">02-在线教育项目简介</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/mdviewer/docs/谷粒学院在线教育项目/day01/03-MyBatisPlus简介">03-MyBatisPlus简介</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/mdviewer/docs/谷粒学院在线教育项目/day01/04-MyBatisPlus入门">04-MyBatisPlus入门</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/mdviewer/docs/谷粒学院在线教育项目/day01/05-MyBatisPlus的CRUD接口">05-MyBatisPlus的CRUD接口</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/mdviewer/docs/谷粒学院在线教育项目/day01/06-MyBatisPlus条件构造器">06-MyBatisPlus条件构造器</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/mdviewer/docs/谷粒学院在线教育项目/day01/07-随堂笔记">07-随堂笔记</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/mdviewer/docs/谷粒学院在线教育项目/day02/01-数据库设计">day02</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/mdviewer/docs/谷粒学院在线教育项目/day03/01-前端开发和前端开发工具">day03</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/mdviewer/docs/谷粒学院在线教育项目/day04/01-NPM包管理器">day04</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/mdviewer/docs/谷粒学院在线教育项目/day05/01-项目中的路由">day05</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/mdviewer/docs/谷粒学院在线教育项目/day06/01-阿里云存储OSS">day06</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/mdviewer/docs/谷粒学院在线教育项目/day07/01-课程发布表单-步骤导航">day07</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/mdviewer/docs/谷粒学院在线教育项目/day08/01-课程大纲列表显示">day08</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/mdviewer/docs/谷粒学院在线教育项目/day09/01-课程列表的显示">day09</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/mdviewer/docs/谷粒学院在线教育项目/day10/01-SpringCloud相关概念介绍">day10</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/mdviewer/docs/谷粒学院在线教育项目/day11/01-服务端渲染技术NUXT-初始化NUXT">day11</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/mdviewer/docs/谷粒学院在线教育项目/day12/01-登录业务介绍">day12</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/mdviewer/docs/谷粒学院在线教育项目/day13/01-OAuth2的使用场景">day13</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/mdviewer/docs/谷粒学院在线教育项目/day14/01-名师页面静态效果整合">day14</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/mdviewer/docs/谷粒学院在线教育项目/day15/01-课程支付功能需求描述">day15</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/mdviewer/docs/谷粒学院在线教育项目/day16/01-统计分析功能（生成统计数据）">day16</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/mdviewer/docs/谷粒学院在线教育项目/day17/01-GATEWAY网关">day17</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/mdviewer/docs/谷粒学院在线教育项目/day18/01-整合Spring Security">day18</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/mdviewer/docs/谷粒学院在线教育项目/day19/01-提交代码到远程Git仓库">day19</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/mdviewer/docs/谷粒学院在线教育项目/day20/01-面试总结">day20</a></div></li></ul></li></ul></nav></div></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/mdviewer/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">谷粒学院在线教育项目</span></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">day01</span></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">05-MyBatisPlus的CRUD接口</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1><strong>一、insert</strong></h1></header>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="1插入操作"><strong>1、插入操作</strong><a href="#1插入操作" class="hash-link" aria-label="Direct link to 1插入操作" title="Direct link to 1插入操作">​</a></h2>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">@RunWith(SpringRunner.class)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">@SpringBootTest</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">public class CRUDTests {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    @Autowired</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    private UserMapper userMapper;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    @Test</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    public void testInsert(){</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        User user = new User();</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        user.setName(&quot;Helen&quot;);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        user.setAge(18);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        user.setEmail(&quot;55317332@qq.com&quot;);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        int result = userMapper.insert(user);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        System.out.println(result); //影响的行数</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        System.out.println(user); //id自动回填</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre></div></div>
<p>**注意：**数据库插入id值默认为：全局唯一id</p>
<p><img decoding="async" loading="lazy" alt="img" src="/mdviewer/assets/images/93ff417f-c9f7-4225-b395-2afe2776183d-1720537097277-1-3f289241606af39b5619f71df8400751.jpg" width="686" height="247" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="2主键策略">2、主键策略<a href="#2主键策略" class="hash-link" aria-label="Direct link to 2、主键策略" title="Direct link to 2、主键策略">​</a></h2>
<p><strong>（1）ID_WORKER</strong></p>
<p>MyBatis-Plus默认的主键策略是：ID_WORKER  <em>全局唯一ID</em></p>
<p>**参考资料：分布式系统唯一ID生成方案汇总：**<a href="https://www.cnblogs.com/haoxinyue/p/5208136.html" target="_blank" rel="noopener noreferrer">https://www.cnblogs.com/haoxinyue/p/5208136.html</a></p>
<p><strong>（2）自增策略</strong></p>
<ul>
<li>要想主键自增需要配置如下主键策略<!-- -->
<ul>
<li>需要在创建数据表的时候设置主键自增</li>
<li>实体字段中配置 @TableId(type = IdType.AUTO)</li>
</ul>
</li>
</ul>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">@TableId(type = IdType.AUTO)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">private Long id;</span><br></span></code></pre></div></div>
<p>要想影响所有实体的配置，可以设置全局主键配置</p>
<div class="language-properties codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-properties codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">#全局设置主键生成策略</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">mybatis-plus.global-config.db-config.id-type=auto</span><br></span></code></pre></div></div>
<p>其它主键策略：分析 IdType 源码可知</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">@Getter</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">public enum IdType {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     * 数据库ID自增</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    AUTO(0),</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     * 该类型为未设置主键类型</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    NONE(1),</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     * 用户输入ID</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     * 该类型可以通过自己注册自动填充插件进行填充</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    INPUT(2),</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    /* 以下3种类型、只有当插入对象ID 为空，才自动填充。 */</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     * 全局唯一ID (idWorker)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ID_WORKER(3),</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     * 全局唯一ID (UUID)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    UUID(4),</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     * 字符串全局唯一ID (idWorker 的字符串表示)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ID_WORKER_STR(5);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    private int key;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    IdType(int key) {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        this.key = key;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre></div></div>
<h1>二、update</h1>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="1根据id更新操作"><strong>1、根据Id更新操作</strong><a href="#1根据id更新操作" class="hash-link" aria-label="Direct link to 1根据id更新操作" title="Direct link to 1根据id更新操作">​</a></h2>
<p>**注意：**update时生成的sql自动是动态sql：UPDATE user SET age=? WHERE id=?</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">@Test</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">public void testUpdateById(){</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    User user = new User();</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    user.setId(1L);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    user.setAge(28);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    int result = userMapper.updateById(user);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    System.out.println(result);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="2自动填充">2、自动填充<a href="#2自动填充" class="hash-link" aria-label="Direct link to 2、自动填充" title="Direct link to 2、自动填充">​</a></h2>
<p>项目中经常会遇到一些数据，每次都使用相同的方式填充，例如记录的创建时间，更新时间等。</p>
<p>我们可以使用MyBatis Plus的自动填充功能，完成这些字段的赋值工作：</p>
<p><strong>（1）数据库表中添加自动填充字段</strong></p>
<p>在User表中添加datetime类型的新的字段 create_time、update_time</p>
<p><strong>（2）实体上添加注解</strong></p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">@Data</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">public class User {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ......</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    @TableField(fill = FieldFill.INSERT)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    private Date createTime;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    //@TableField(fill = FieldFill.UPDATE)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    @TableField(fill = FieldFill.INSERT_UPDATE)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    private Date updateTime;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre></div></div>
<p><strong>（3）实现元对象处理器接口</strong></p>
<p><strong>注意：不要忘记添加 @Component 注解</strong></p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">package com.atguigu.mybatisplus.handler;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">import com.baomidou.mybatisplus.core.handlers.MetaObjectHandler;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">import org.apache.ibatis.reflection.MetaObject;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">import org.slf4j.Logger;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">import org.slf4j.LoggerFactory;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">import org.springframework.stereotype.Component;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">import java.util.Date;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">@Component</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">public class MyMetaObjectHandler implements MetaObjectHandler {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    private static final Logger LOGGER = LoggerFactory.getLogger(MyMetaObjectHandler.class);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    public void insertFill(MetaObject metaObject) {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        LOGGER.info(&quot;start insert fill ....&quot;);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        this.setFieldValByName(&quot;createTime&quot;, new Date(), metaObject);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        this.setFieldValByName(&quot;updateTime&quot;, new Date(), metaObject);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    public void updateFill(MetaObject metaObject) {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        LOGGER.info(&quot;start update fill ....&quot;);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        this.setFieldValByName(&quot;updateTime&quot;, new Date(), metaObject);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre></div></div>
<p><strong>（4）测试</strong></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="3乐观锁">3、乐观锁<a href="#3乐观锁" class="hash-link" aria-label="Direct link to 3、乐观锁" title="Direct link to 3、乐观锁">​</a></h2>
<p>**主要适用场景：**当要更新一条记录的时候，希望这条记录没有被别人更新，也就是说实现线程安全的数据更新</p>
<p><strong>乐观锁实现方式：</strong></p>
<ul>
<li>取出记录时，获取当前version</li>
<li>更新时，带上这个version</li>
<li>执行更新时， set version = newVersion where version = oldVersion</li>
<li>如果version不对，就更新失败</li>
</ul>
<p><em><strong>*（1）数据库中添加version字段*</strong></em></p>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">ALTER</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">TABLE</span><span class="token plain"> </span><span class="token identifier punctuation" style="color:rgb(199, 146, 234)">`</span><span class="token identifier">user</span><span class="token identifier punctuation" style="color:rgb(199, 146, 234)">`</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">ADD</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">COLUMN</span><span class="token plain"> </span><span class="token identifier punctuation" style="color:rgb(199, 146, 234)">`</span><span class="token identifier">version</span><span class="token identifier punctuation" style="color:rgb(199, 146, 234)">`</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">INT</span><br></span></code></pre></div></div>
<p><img decoding="async" loading="lazy" alt="img" src="data:image/png;base64,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" width="828" height="31" class="img_ev3q"></p>
<p><em><strong>*（2）实体类添加version字段*</strong></em></p>
<p>并添加 @Version 注解</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">@Version</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">@TableField(fill = FieldFill.INSERT)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">private Integer version;</span><br></span></code></pre></div></div>
<p><em><strong>*（3）元对象处理器接口添加version的insert默认值*</strong></em></p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">@Override</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">public void insertFill(MetaObject metaObject) {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ......</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    this.setFieldValByName(&quot;version&quot;, 1, metaObject);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre></div></div>
<p><strong>特别说明:</strong></p>
<p>支持的数据类型只有 int,Integer,long,Long,Date,Timestamp,LocalDateTime整数类型下 <code>newVersion = oldVersion + 1``newVersion</code> 会回写到 <code>entity</code> 中仅支持 <code>updateById(id)</code> 与 <code>update(entity, wrapper)</code> 方法在 <code>update(entity, wrapper)</code> 方法下, <code>wrapper</code> 不能复用!!!</p>
<p><strong>（4）*<em>在 MybatisPlusConfig 中注册 Bean*</em></strong></p>
<p>创建配置类</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">package com.atguigu.mybatisplus.config;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">import com.baomidou.mybatisplus.extension.plugins.PaginationInterceptor;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">import org.mybatis.spring.annotation.MapperScan;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">import org.springframework.context.annotation.Bean;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">import org.springframework.context.annotation.Configuration;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">import org.springframework.transaction.annotation.EnableTransactionManagement;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">@EnableTransactionManagement</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">@Configuration</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">@MapperScan(&quot;com.atguigu.mybatis_plus.mapper&quot;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">public class MybatisPlusConfig {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     * 乐观锁插件</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    @Bean</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    public OptimisticLockerInterceptor optimisticLockerInterceptor() {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        return new OptimisticLockerInterceptor();</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre></div></div>
<p><strong>（5）测试乐观锁可以修改成功</strong></p>
<p>测试后分析打印的sql语句，将version的数值进行了加1操作</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> * 测试 乐观锁插件</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">@Test</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">public void testOptimisticLocker() {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    //查询</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    User user = userMapper.selectById(1L);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    //修改数据</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    user.setName(&quot;Helen Yao&quot;);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    user.setEmail(&quot;helen@qq.com&quot;);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    //执行更新</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    userMapper.updateById(user);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre></div></div>
<p><strong>（5）测试乐观锁修改失败</strong></p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> * 测试乐观锁插件 失败</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">@Test</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">public void testOptimisticLockerFail() {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    //查询</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    User user = userMapper.selectById(1L);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    //修改数据</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    user.setName(&quot;Helen Yao1&quot;);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    user.setEmail(&quot;helen@qq.com1&quot;);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    //模拟取出数据后，数据库中version实际数据比取出的值大，即已被其它线程修改并更新了version</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    user.setVersion(user.getVersion() - 1);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    //执行更新</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    userMapper.updateById(user);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre></div></div>
<h1><strong>三、select</strong></h1>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="1根据id查询  记录"><strong>1、根据id查询记录</strong><a href="#1根据id查询记录" class="hash-link" aria-label="Direct link to 1根据id查询记录" title="Direct link to 1根据id查询记录">​</a></h2>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">@Test</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">public void testSelectById(){</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    User user = userMapper.selectById(1L);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    System.out.println(user);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="2通过多个id批量查询"><strong>2、通过多个id批量查询</strong><a href="#2通过多个id批量查询" class="hash-link" aria-label="Direct link to 2通过多个id批量查询" title="Direct link to 2通过多个id批量查询">​</a></h2>
<p>完成了动态sql的foreach的功能</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">@Test</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">public void testSelectBatchIds(){</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    List&lt;User&gt; users = userMapper.selectBatchIds(Arrays.asList(1, 2, 3));</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    users.forEach(System.out::println);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="3简单的条件查询"><strong>3、简单的条件查询</strong><a href="#3简单的条件查询" class="hash-link" aria-label="Direct link to 3简单的条件查询" title="Direct link to 3简单的条件查询">​</a></h2>
<p>通过map封装查询条件</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">@Test</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">public void testSelectByMap(){</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    HashMap&lt;String, Object&gt; map = new HashMap&lt;&gt;();</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    map.put(&quot;name&quot;, &quot;Helen&quot;);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    map.put(&quot;age&quot;, 18);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    List&lt;User&gt; users = userMapper.selectByMap(map);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    users.forEach(System.out::println);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre></div></div>
<p>**注意：**map中的key对应的是数据库中的列名。例如数据库user_id，实体类是userId，这时map的key需要填写user_id</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="4分页">4、分页<a href="#4分页" class="hash-link" aria-label="Direct link to 4、分页" title="Direct link to 4、分页">​</a></h2>
<p>MyBatis Plus自带分页插件，只要简单的配置即可实现分页功能</p>
<p><strong>（1）创建配置类</strong></p>
<p>此时可以删除主类中的 <em>@MapperScan</em> 扫描注解**
**</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> * 分页插件</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">@Bean</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">public PaginationInterceptor paginationInterceptor() {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    return new PaginationInterceptor();</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre></div></div>
<p><strong>（2）测试selectPage分页</strong></p>
<p>**测试：**最终通过page对象获取相关数据</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">@Test</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">public void testSelectPage() {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    Page&lt;User&gt; page = new Page&lt;&gt;(1,5);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    userMapper.selectPage(page, null);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    page.getRecords().forEach(System.out::println);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    System.out.println(page.getCurrent());</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    System.out.println(page.getPages());</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    System.out.println(page.getSize());</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    System.out.println(page.getTotal());</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    System.out.println(page.hasNext());</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    System.out.println(page.hasPrevious());</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre></div></div>
<p>控制台sql语句打印：SELECT id,name,age,email,create_time,update_time FROM user LIMIT 0,5</p>
<p><strong>（3）测试selectMapsPage分页：结果集是Map</strong></p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">@Test</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">public void testSelectMapsPage() {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    Page&lt;User&gt; page = new Page&lt;&gt;(1, 5);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    IPage&lt;Map&lt;String, Object&gt;&gt; mapIPage = userMapper.selectMapsPage(page, null);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    //注意：此行必须使用 mapIPage 获取记录列表，否则会有数据类型转换错误</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    mapIPage.getRecords().forEach(System.out::println);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    System.out.println(page.getCurrent());</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    System.out.println(page.getPages());</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    System.out.println(page.getSize());</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    System.out.println(page.getTotal());</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    System.out.println(page.hasNext());</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    System.out.println(page.hasPrevious());</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre></div></div>
<h1>四、delete</h1>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="1根据id删除记录"><strong>1、根据id删除记录</strong><a href="#1根据id删除记录" class="hash-link" aria-label="Direct link to 1根据id删除记录" title="Direct link to 1根据id删除记录">​</a></h2>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">@Test</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">public void testDeleteById(){</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    int result = userMapper.deleteById(8L);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    System.out.println(result);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="2批量删除"><strong>2、批量删除</strong><a href="#2批量删除" class="hash-link" aria-label="Direct link to 2批量删除" title="Direct link to 2批量删除">​</a></h2>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">    @Test</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    public void testDeleteBatchIds() {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        int result = userMapper.deleteBatchIds(Arrays.asList(8, 9, 10));</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        System.out.println(result);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="3简单的条件查询删除"><strong>3、简单的条件查询删除</strong><a href="#3简单的条件查询删除" class="hash-link" aria-label="Direct link to 3简单的条件查询删除" title="Direct link to 3简单的条件查询删除">​</a></h2>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">@Test</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">public void testDeleteByMap() {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    HashMap&lt;String, Object&gt; map = new HashMap&lt;&gt;();</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    map.put(&quot;name&quot;, &quot;Helen&quot;);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    map.put(&quot;age&quot;, 18);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    int result = userMapper.deleteByMap(map);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    System.out.println(result);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="4逻辑删除">4、逻辑删除<a href="#4逻辑删除" class="hash-link" aria-label="Direct link to 4、逻辑删除" title="Direct link to 4、逻辑删除">​</a></h2>
<ul>
<li>物理删除：真实删除，将对应数据从数据库中删除，之后查询不到此条被删除数据</li>
<li>逻辑删除：假删除，将对应数据中代表是否被删除字段状态修改为“被删除状态”，之后在数据库中仍旧能看到此条数据记录</li>
</ul>
<p><strong>（1）数据库中添加 deleted字段</strong></p>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">ALTER</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">TABLE</span><span class="token plain"> </span><span class="token identifier punctuation" style="color:rgb(199, 146, 234)">`</span><span class="token identifier">user</span><span class="token identifier punctuation" style="color:rgb(199, 146, 234)">`</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">ADD</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">COLUMN</span><span class="token plain"> </span><span class="token identifier punctuation" style="color:rgb(199, 146, 234)">`</span><span class="token identifier">deleted</span><span class="token identifier punctuation" style="color:rgb(199, 146, 234)">`</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">boolean</span><br></span></code></pre></div></div>
<p><img decoding="async" loading="lazy" alt="img" src="data:image/png;base64,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" width="815" height="33" class="img_ev3q"></p>
<p><strong>（2）实体类添加deleted *<em>字段*</em></strong></p>
<p>并加上 @TableLogic 注解 和 @TableField(fill = FieldFill.INSERT) 注解</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">@TableLogic</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">@TableField(fill = FieldFill.INSERT)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">private Integer deleted;</span><br></span></code></pre></div></div>
<p><strong>（3）元对象处理器接口添加deleted的insert默认值</strong></p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">@Override</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">public void insertFill(MetaObject metaObject) {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ......</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    this.setFieldValByName(&quot;deleted&quot;, 0, metaObject);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre></div></div>
<p><strong>（4）application.properties 加入配置</strong></p>
<p>此为默认值，如果你的默认值  和mp默认的一样,该配置可无</p>
<div class="language-properties codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-properties codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">mybatis-plus.global-config.db-config.logic-delete-value=1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">mybatis-plus.global-config.db-config.logic-not-delete-value=0</span><br></span></code></pre></div></div>
<p><strong>（5）在 MybatisPlusConfig 中注册 Bean</strong></p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">@Bean</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">public ISqlInjector sqlInjector() {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    return new LogicSqlInjector();</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre></div></div>
<p><strong>（6）测试逻辑删除</strong></p>
<ul>
<li>测试后发现，数据并没有被删除，deleted字段的值由0变成了1</li>
<li>测试后分析打印的sql语句，是一条update</li>
<li>**注意：**被删除数据的deleted 字段的值必须是 0，才能被选取出来执行逻辑删除的操作</li>
</ul>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> * 测试 逻辑删除</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">@Test</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">public void testLogicDelete() {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    int result = userMapper.deleteById(1L);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    System.out.println(result);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre></div></div>
<p><strong>（7）测试逻辑删除后的查询</strong></p>
<p>MyBatis Plus中查询操作也会自动添加逻辑删除字段的判断</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> * 测试 逻辑删除后的查询：</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> * 不包括被逻辑删除的记录</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">@Test</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">public void testLogicDeleteSelect() {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    User user = new User();</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    List&lt;User&gt; users = userMapper.selectList(null);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    users.forEach(System.out::println);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre></div></div>
<p>测试后分析打印的sql语句，包含 WHERE deleted=0</p>
<p>SELECT id,name,age,email,create_time,update_time,deleted FROM user WHERE deleted=0</p>
<h1>五、性能分析</h1>
<p>性能分析拦截器，用于输出每条 SQL 语句及其执行时间</p>
<p>SQL 性能执行分析,开发环境使用，超过指定时间，停止运行。有助于发现问题</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="1配置插件">1、配置插件<a href="#1配置插件" class="hash-link" aria-label="Direct link to 1、配置插件" title="Direct link to 1、配置插件">​</a></h2>
<p><strong>（1）参数说明</strong></p>
<p>参数：maxTime： SQL 执行最大时长，超过自动停止运行，有助于发现问题。</p>
<p>参数：format： SQL是否格式化，默认false。</p>
<p><strong>（2）在 MybatisPlusConfig 中配置</strong></p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> * SQL 执行性能分析插件</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> * 开发环境使用，线上不推荐。 maxTime 指的是 sql 最大执行时长</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">@Bean</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">@Profile({&quot;dev&quot;,&quot;test&quot;})// 设置 dev test 环境开启</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">public PerformanceInterceptor performanceInterceptor() {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    PerformanceInterceptor performanceInterceptor = new PerformanceInterceptor();</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    performanceInterceptor.setMaxTime(100);//ms，超过此处设置的ms则sql不执行</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    performanceInterceptor.setFormat(true);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    return performanceInterceptor;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre></div></div>
<p><strong>（3）Spring Boot 中设置dev环境</strong></p>
<div class="language-properties codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-properties codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">#环境设置：dev、test、prod</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">spring.profiles.active=dev</span><br></span></code></pre></div></div>
<p>可以针对各环境新建不同的配置文件<code>application-dev.properties</code>、<code>application-test.properties</code>、<code>application-prod.properties</code></p>
<p>也可以自定义环境名称：如test1、test2</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="2测试">2、测试<a href="#2测试" class="hash-link" aria-label="Direct link to 2、测试" title="Direct link to 2、测试">​</a></h2>
<p><strong>（1）常规测试</strong></p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> * 测试 性能分析插件</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">@Test</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">public void testPerformance() {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    User user = new User();</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    user.setName(&quot;我是Helen&quot;);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    user.setEmail(&quot;helen@sina.com&quot;);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    user.setAge(18);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    userMapper.insert(user);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre></div></div>
<p><strong>输出：</strong></p>
<p><img decoding="async" loading="lazy" alt="img" src="/mdviewer/assets/images/bb355a17-3cdc-4f0a-82f2-232defbd235b-1720537176046-7-a1ff61a0f6b9705bf193e041e70ca11f.png" width="1640" height="232" class="img_ev3q"></p>
<p><strong>（2）将maxTime 改小之后再次进行测试</strong></p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">performanceInterceptor.setMaxTime(5);//ms，超过此处设置的ms不执行</span><br></span></code></pre></div></div>
<p>如果执行时间过长，则抛出异常：The SQL execution time is too large,</p>
<p><strong>输出：</strong></p>
<p><img decoding="async" loading="lazy" alt="img" src="/mdviewer/assets/images/1ae5ae68-b6b2-4801-ae26-29835b175b24-1720537185879-9-ad1eec3673ec52e3468fa1405bdf021c.png" width="1666" height="99" class="img_ev3q"></p>
<h1>六、其它</h1>
<p>如果想进行复杂条件查询，那么需要使用条件构造器 Wapper，涉及到如下方法</p>
<p><strong>1、delete</strong></p>
<p><strong>2、selectOne</strong></p>
<p><strong>3、selectCount</strong></p>
<p><strong>4、selectList</strong></p>
<p><strong>5、selectMaps</strong></p>
<p><strong>6、selectObjs</strong></p>
<p><strong>7、update</strong></p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-tags-row"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a rel="tag" class="tag_zVej tagRegular_sFm0" href="/mdviewer/docs/tags/尚硅谷">尚硅谷</a></li></ul></div></div><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/hello-github-ui/mdviewer/edit/master/docs/谷粒学院在线教育项目/day01/05-MyBatisPlus的CRUD接口.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/mdviewer/docs/谷粒学院在线教育项目/day01/04-MyBatisPlus入门"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">04-MyBatisPlus入门</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/mdviewer/docs/谷粒学院在线教育项目/day01/06-MyBatisPlus条件构造器"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">06-MyBatisPlus条件构造器</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#1插入操作" class="table-of-contents__link toc-highlight"><strong>1、插入操作</strong></a></li><li><a href="#2主键策略" class="table-of-contents__link toc-highlight">2、主键策略</a></li><li><a href="#1根据id更新操作" class="table-of-contents__link toc-highlight"><strong>1、根据Id更新操作</strong></a></li><li><a href="#2自动填充" class="table-of-contents__link toc-highlight">2、自动填充</a></li><li><a href="#3乐观锁" class="table-of-contents__link toc-highlight">3、乐观锁</a></li><li><a href="#1根据id查询记录" class="table-of-contents__link toc-highlight"><strong>1、根据id查询记录</strong></a></li><li><a href="#2通过多个id批量查询" class="table-of-contents__link toc-highlight"><strong>2、通过多个id批量查询</strong></a></li><li><a href="#3简单的条件查询" class="table-of-contents__link toc-highlight"><strong>3、简单的条件查询</strong></a></li><li><a href="#4分页" class="table-of-contents__link toc-highlight">4、分页</a></li><li><a href="#1根据id删除记录" class="table-of-contents__link toc-highlight"><strong>1、根据id删除记录</strong></a></li><li><a href="#2批量删除" class="table-of-contents__link toc-highlight"><strong>2、批量删除</strong></a></li><li><a href="#3简单的条件查询删除" class="table-of-contents__link toc-highlight"><strong>3、简单的条件查询删除</strong></a></li><li><a href="#4逻辑删除" class="table-of-contents__link toc-highlight">4、逻辑删除</a></li><li><a href="#1配置插件" class="table-of-contents__link toc-highlight">1、配置插件</a></li><li><a href="#2测试" class="table-of-contents__link toc-highlight">2、测试</a></li></ul></div></div></div></div></main></div></div></div></div>
</body>
</html>