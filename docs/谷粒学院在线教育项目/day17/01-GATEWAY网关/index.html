<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-谷粒学院在线教育项目/day17/01-GATEWAY网关" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.8.1">
<title data-rh="true">01-GATEWAY网关 | 我的文档站</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://hello-github-ui.github.io/mdviewer/docs/谷粒学院在线教育项目/day17/01-GATEWAY网关"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="01-GATEWAY网关 | 我的文档站"><meta data-rh="true" name="description" content="API 网关出现的原因是微服务架构的出现，不同的微服务一般会有不同的网络地址，而外部客户端可能需要调用多个服务的接口才能完成一个业务需求，如果让客户端直接与各个微服务通信，会有以下的问题："><meta data-rh="true" property="og:description" content="API 网关出现的原因是微服务架构的出现，不同的微服务一般会有不同的网络地址，而外部客户端可能需要调用多个服务的接口才能完成一个业务需求，如果让客户端直接与各个微服务通信，会有以下的问题："><link data-rh="true" rel="icon" href="/mdviewer/system/logo.png"><link data-rh="true" rel="canonical" href="https://hello-github-ui.github.io/mdviewer/docs/谷粒学院在线教育项目/day17/01-GATEWAY网关"><link data-rh="true" rel="alternate" href="https://hello-github-ui.github.io/mdviewer/docs/谷粒学院在线教育项目/day17/01-GATEWAY网关" hreflang="en"><link data-rh="true" rel="alternate" href="https://hello-github-ui.github.io/mdviewer/docs/谷粒学院在线教育项目/day17/01-GATEWAY网关" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://USTSQRVOIC-dsn.algolia.net" crossorigin="anonymous"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"01-GATEWAY网关","item":"https://hello-github-ui.github.io/mdviewer/docs/谷粒学院在线教育项目/day17/01-GATEWAY网关"}]}</script><link rel="search" type="application/opensearchdescription+xml" title="我的文档站" href="/mdviewer/opensearch.xml"><link rel="stylesheet" href="/mdviewer/assets/css/styles.8ce03ad6.css">
<script src="/mdviewer/assets/js/runtime~main.40499fab.js" defer="defer"></script>
<script src="/mdviewer/assets/js/main.e8da5fd3.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t="light";var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",e||t),document.documentElement.setAttribute("data-theme-choice",e||t)}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><a class="navbar__brand" href="/mdviewer/"></a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search (Command+K)"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><button style="position:fixed;top:75px;left:240px;z-index:1000;width:32px;height:32px;background:#fff;border:1px solid #eee;border-radius:50%;cursor:pointer;transition:left 0.3s;color:green" aria-label="收起侧边栏">&lt;</button><div class="sidebar-expanded" style="height:100%"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/mdviewer/docs/AI/AI">AI</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/mdviewer/docs/Docker教程/使用docker-desktop安装AlmaLinux8教程">Docker教程</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/mdviewer/docs/Git教程/Git Tutorial">Git教程</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/mdviewer/docs/Python基础/虚拟环境/01-搭建虚拟环境">Python基础</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/mdviewer/docs/Vue3入门到实战/TypeScript极速梳理">Vue3入门到实战</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/mdviewer/docs/intro">关于本站</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/mdviewer/docs/个人博客/AlmaLinux8安装PostgreSQL">个人博客</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/mdviewer/docs/书签/01-收藏的网站">书签</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/mdviewer/docs/油猴脚本开发教程/51CTO网站解除禁止复制">油猴脚本开发教程</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/mdviewer/docs/谷粒学院在线教育项目/day01/01-在线教育行业介绍">谷粒学院在线教育项目</a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/mdviewer/docs/谷粒学院在线教育项目/day01/01-在线教育行业介绍">day01</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/mdviewer/docs/谷粒学院在线教育项目/day02/01-数据库设计">day02</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/mdviewer/docs/谷粒学院在线教育项目/day03/01-前端开发和前端开发工具">day03</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/mdviewer/docs/谷粒学院在线教育项目/day04/01-NPM包管理器">day04</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/mdviewer/docs/谷粒学院在线教育项目/day05/01-项目中的路由">day05</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/mdviewer/docs/谷粒  学院在线教育项目/day06/01-阿里云存储OSS">day06</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/mdviewer/docs/谷粒学院在线教育项目/day07/01-课程发布表单-步骤导航">day07</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/mdviewer/docs/谷粒学院在线教育项目/day08/01-课程大纲列表显示">day08</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/mdviewer/docs/谷粒学院在线教育项目/day09/01-课程列表的显示">day09</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/mdviewer/docs/谷粒学院在线教育项目/day10/01-SpringCloud相关概念介绍">day10</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/mdviewer/docs/谷粒学院在线教育项目/day11/01-服务端渲染技术NUXT-初始化NUXT">day11</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/mdviewer/docs/谷粒学院在线教育项目/day12/01-登录业务介绍">day12</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/mdviewer/docs/谷粒学院在线教育项目/day13/01-OAuth2的使用场景">day13</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/mdviewer/docs/谷粒学院在线教育项目/day14/01-名师页面静态效果整合">day14</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/mdviewer/docs/谷粒学院在线教育项目/day15/01-课程支付功能需求描述">day15</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/mdviewer/docs/谷粒学院在线教育项目/day16/01-统计分析功能（生成统计数据）">day16</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/mdviewer/docs/谷粒学院在线教育项目/day17/01-GATEWAY网关">day17</a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/mdviewer/docs/谷粒学院在线教育项目/day17/01-GATEWAY网关">01-GATEWAY网关</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/mdviewer/docs/谷粒学院在线教育项目/day17/02-权限管理需求描述">02-权限管理需求描述</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/mdviewer/docs/谷粒学院在线教育项目/day17/03-开发权限管理接口">03-开发权限管理接口</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/mdviewer/docs/谷粒学院在线教育项目/day17/04-随堂笔记">04-随堂笔记</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/mdviewer/docs/谷粒学院在线教育项目/day18/01-整合Spring Security">day18</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/mdviewer/docs/谷粒学院在  线教育项目/day19/01-提交代码到远程Git仓库">day19</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/mdviewer/docs/谷粒学院在线教育项目/day20/01-面试总结">day20</a></div></li></ul></li></ul></nav></div></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/mdviewer/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">谷粒学院在线教育项目</span></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">day17</span></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">01-GATEWAY网关</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>一、网关基本概念</h1></header>
<h1>1、API网关介绍</h1>
<p>API 网关出现的原因是微服务架构的出现，不同的微服务一般会有不同的网络地址，而外部客户端可能需要调用多个服务的接口才能完成一个业务需求，如果让客户端直接与各个微服务通信，会有以下 的问题：</p>
<p>（1）客户端会多次请求不同的微服务，增加了客户端的复杂性。</p>
<p>（2）存在跨域请求，在一定场景下处理相对复杂。</p>
<p>（3）认证复杂，每个服务都需要独立认证。</p>
<p>（4）难以重构，随着项目的迭代，可能需要重新划分微服务。例如，可能将多个服务合并成一个或者将一个服务拆分成多个。如果客户端直接与微服务通信，那么重构将会很难实施。</p>
<p>（5）某些微服务可能使用了防火墙 / 浏览器不友好的协议，直接访问会有一定的困难。</p>
<p>以上这些问题可以借助 API 网关解决。API 网关是介于客户端和服务器端之间的中间层，所有的外部请求都会先经过 API 网关这一层。也就是说，API 的实现方面更多的考虑业务逻辑，而安全、性能、监控可以交由 API 网关来做，这样既提高业务灵活性又不缺安全性</p>
<p><strong>2、Spring Cloud Gateway</strong></p>
<p><strong>Spring cloud gateway</strong>是spring官方基于Spring 5.0、Spring Boot2.0和Project Reactor等技术开发的网关，Spring Cloud Gateway旨在为微服务架构提供简单、有效和统一的API路由管理方式，Spring Cloud Gateway作为Spring Cloud生态系统中的网关，目标是替代Netflix Zuul，其不仅提供统一的路由方式，并且还基于Filer链的方式提供了网关基本的功能，例如：安全、监控/埋点、限流等。</p>
<p><img decoding="async" loading="lazy" alt="img" src="/mdviewer/assets/images/10fde967-d265-42b9-b023-a735963b0205-cbf561b102cd3dc3ab4c08d71be07a0d.jpg" width="558" height="447" class="img_ev3q"></p>
<p><em><strong>*3、Spring Cloud Gateway核心概念*</strong></em></p>
<p>网关提供API全托管服务，丰富的API管理功能，辅助企业管理大规模的API，以降低管理成本和安全风险，包括协议适配、协议转发、安全策略、防刷、流量、监控日志等贡呢。一般来说网关对外暴露的URL或者接口信息，我们统称为路由信息。如果研发过网关中间件或者使用过Zuul的人，会知道网关的核心是Filter以及Filter Chain（Filter责任链）。Sprig Cloud Gateway也具有路由和Filter的概念。下面介绍一下Spring Cloud Gateway中几个重要的概念。</p>
<p>（1）路由。路由是网关最基础的部分，路由信息有一个ID、一个目的URL、一组断言和一组Filter组成。如果断言路由为真，则说明请求的URL和配置匹配</p>
<p>（2）断言。Java8中的断言函数。Spring Cloud Gateway中的断言函数输入类型是Spring5.0框架中的ServerWebExchange。Spring Cloud Gateway中的断言函数允许开发者去定义匹配来自于http request中的任何信息，比如请求头和参数等。</p>
<p>（3）过滤器。一个标准的Spring webFilter。Spring cloud gateway中的filter分为两种类型的Filter，分别是Gateway Filter和Global Filter。过滤器Filter将会对请求和响应进行修改处理</p>
<p><img decoding="async" loading="lazy" alt="img" src="/mdviewer/assets/images/a3cb663f-16f5-4133-b091-1b92035b57ce-c7e2027e7a0f63839013b87b19105bea.jpg" width="485" height="626" class="img_ev3q"></p>
<p>如上图所示，Spring cloud Gateway发出请求。然后再由Gateway Handler Mapping中找到与请求相匹配的路由，将其发送到Gateway web handler。Handler再通过指定的过滤器链将请求发送到我们实际的服务执行业务逻辑，然后返回。</p>
<p><em><strong>*二、创建api-gateway模块（网关服务）*</strong></em></p>
<p>**1、**<strong>在infrastructure模块下创建api_gateway模块</strong></p>
<p><img decoding="async" loading="lazy" alt="img" src="data:image/png;base64,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" width="220" height="107" class="img_ev3q"></p>
<p>2、在pom.xml引入依赖</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;dependencies&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &lt;dependency&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &lt;groupId&gt;com.atguigu&lt;/groupId&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &lt;artifactId&gt;common_utils&lt;/artifactId&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &lt;/dependency&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &lt;dependency&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &lt;artifactId&gt;spring-cloud-starter-alibaba-nacos-discovery&lt;/artifactId&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &lt;/dependency&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &lt;dependency&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &lt;artifactId&gt;spring-cloud-starter-gateway&lt;/artifactId&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &lt;/dependency&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &lt;!--gson--&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &lt;dependency&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &lt;groupId&gt;com.google.code.gson&lt;/groupId&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &lt;artifactId&gt;gson&lt;/artifactId&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &lt;/dependency&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &lt;!--服务调用--&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &lt;dependency&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &lt;artifactId&gt;spring-cloud-starter-openfeign&lt;/artifactId&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &lt;/dependency&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;/dependencies&gt;</span><br></span></code></pre></div></div>
<p><strong>3、编写application.properties配置文件</strong></p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"># 服务端口</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">server.port=8222</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># 服务名</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">spring.application.name=service-gateway</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># nacos服务地址</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">spring.cloud.nacos.discovery.server-addr=127.0.0.1:8848</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#使用服务发现路由</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">spring.cloud.gateway.discovery.locator.enabled=true</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#服务路由名小写</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#spring.cloud.gateway.discovery.locator.lower-case-service-id=true</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#设置路由id</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">spring.cloud.gateway.routes[0].id=service-acl</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#设置路由的uri</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">spring.cloud.gateway.routes[0].uri=lb://service-acl</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#设置路由断言,代理servicerId为auth-service的/auth/路径</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">spring.cloud.gateway.routes[0].predicates= Path=/*/acl/**</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#配置service-edu服务</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">spring.cloud.gateway.routes[1].id=service-edu</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">spring.cloud.gateway.routes[1].uri=lb://service-edu</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">spring.cloud.gateway.routes[1].predicates= Path=/eduservice/**</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#配置service-ucenter服务</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">spring.cloud.gateway.routes[2].id=service-ucenter</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">spring.cloud.gateway.routes[2].uri=lb://service-ucenter</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">spring.cloud.gateway.routes[2].predicates= Path=/ucenterservice/**</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#配置service-ucenter服务</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">spring.cloud.gateway.routes[3].id=service-cms</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">spring.cloud.gateway.routes[3].uri=lb://service-cms</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">spring.cloud.gateway.routes[3].predicates= Path=/cmsservice/**</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">spring.cloud.gateway.routes[4].id=service-msm</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">spring.cloud.gateway.routes[4].uri=lb://service-msm</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">spring.cloud.gateway.routes[4].predicates= Path=/edumsm/**</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">spring.cloud.gateway.routes[5].id=service-order</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">spring.cloud.gateway.routes[5].uri=lb://service-order</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">spring.cloud.gateway.routes[5].predicates= Path=/orderservice/**</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">spring.cloud.gateway.routes[6].id=service-order</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">spring.cloud.gateway.routes[6].uri=lb://service-order</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">spring.cloud.gateway.routes[6].predicates= Path=/orderservice/**</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">spring.cloud.gateway.routes[7].id=service-oss</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">spring.cloud.gateway.routes[7].uri=lb://service-oss</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">spring.cloud.gateway.routes[7].predicates= Path=/eduoss/**</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">spring.cloud.gateway.routes[8].id=service-statistic</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">spring.cloud.gateway.routes[8].uri=lb://service-statistic</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">spring.cloud.gateway.routes[8].predicates= Path=/staservice/**</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">spring.cloud.gateway.routes[9].id=service-vod</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">spring.cloud.gateway.routes[9].uri=lb://service-vod</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">spring.cloud.gateway.routes[9].predicates= Path=/eduvod/**</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">spring.cloud.gateway.routes[10].id=service-edu</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">spring.cloud.gateway.routes[10].uri=lb://service-edu</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">spring.cloud.gateway.routes[10].predicates= Path=/eduuser/**</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="yml文件">yml文件：<a href="#yml文件" class="hash-link" aria-label="Direct link to yml文件：" title="Direct link to yml文件：">​</a></h2>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">server:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  port: 8222</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">spring:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  application:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  cloud:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    gateway:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      discovery:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        locator:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">          enabled: true</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      routes:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      - id: SERVICE-ACL</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        uri: lb://SERVICE-ACL</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        predicates:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        - Path=/*/acl/** # 路径匹配</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      - id: SERVICE-EDU</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        uri: lb://SERVICE-EDU</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        predicates:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        - Path=/eduservice/** # 路径匹配</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      - id: SERVICE-UCENTER</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        uri: lb://SERVICE-UCENTER</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        predicates:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        - Path=/ucenter/** # 路径匹配</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    nacos:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      discovery:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        server-addr: 127.0.0.1:8848</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="4编写启动类"><strong>4、编写启动类</strong><a href="#4编写启动类" class="hash-link" aria-label="Direct link to 4编写启动类" title="Direct link to 4编写启动类">​</a></h2>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">@SpringBootApplication</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">public class ApiGatewayApplication {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    public static void main(String[] args) {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        SpringApplication.run(ApiGatewayApplication.class, args);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre></div></div>
<h2></h2>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="二网关相关配置">二、网关相关配置<a href="#二网关相关配置" class="hash-link" aria-label="Direct link to 二、网关相关配置" title="Direct link to 二、网关相关配置">​</a></h2>
<p><strong>1、网关解决跨域问题</strong></p>
<p><strong>（1）创建配置类</strong></p>
<p><img decoding="async" loading="lazy" alt="img" src="data:image/png;base64,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" width="281" height="142" class="img_ev3q"></p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">package com.example.gateway.config;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">import org.springframework.context.annotation.Bean;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">import org.springframework.context.annotation.Configuration;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">import org.springframework.web.cors.CorsConfiguration;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">import org.springframework.web.cors.reactive.CorsWebFilter;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">import org.springframework.web.cors.reactive.UrlBasedCorsConfigurationSource;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> * Created by 19921224 on 2024/8/14 11:36</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> * 跨域配置统一放在网关层配置</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">@Configuration</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">public class CorsConfig {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     * 添加过滤器</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    @Bean</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    public CorsWebFilter corsWebFilter() {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        // 基于url跨域，选择reactive包下的</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        UrlBasedCorsConfigurationSource source = new UrlBasedCorsConfigurationSource();</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        // 配置跨域信息</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        CorsConfiguration configuration = new CorsConfiguration();</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        // 允许跨域的头 *：表示所有</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        configuration.addAllowedHeader(&quot;*&quot;);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        // 允许跨域的请求方式</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        configuration.addAllowedMethod(&quot;*&quot;);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        // 允许跨域的请求来源</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        configuration.addAllowedOrigin(&quot;*&quot;);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        // 是否允许携带cookie跨域</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        configuration.setAllowCredentials(true);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        // `/**` :任意url都要进行跨域配置</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        source.registerCorsConfiguration(&quot;/**&quot;, configuration);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        return new CorsWebFilter(source);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre></div></div>
<h1></h1>
<p><strong>2、全局Filter，统一处理会员登录与外部不允许访问的服务</strong></p>
<p><img decoding="async" loading="lazy" alt="img" src="data:image/png;base64,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" width="273" height="165" class="img_ev3q"></p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">import com.google.gson.JsonObject;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">import org.springframework.cloud.gateway.filter.GatewayFilterChain;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">import org.springframework.cloud.gateway.filter.GlobalFilter;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">import org.springframework.core.Ordered;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">import org.springframework.core.io.buffer.DataBuffer;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">import org.springframework.http.server.reactive.ServerHttpRequest;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">import org.springframework.http.server.reactive.ServerHttpResponse;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">import org.springframework.stereotype.Component;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">import org.springframework.util.AntPathMatcher;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">import org.springframework.web.server.ServerWebExchange;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">import reactor.core.publisher.Mono;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">import java.nio.charset.StandardCharsets;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">import java.util.List;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> * &lt;p&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> * 全局Filter，统一处理会员登录与外部不允许访问的服务</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> * &lt;/p&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">@Component</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">public class AuthGlobalFilter implements GlobalFilter, Ordered {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    private AntPathMatcher antPathMatcher = new AntPathMatcher();</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    public Mono&lt;Void&gt; filter(ServerWebExchange exchange, GatewayFilterChain chain) {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        ServerHttpRequest request = exchange.getRequest();</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        String path = request.getURI().getPath();</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        //谷粒学院api接口，校验用户必须登录</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        if(antPathMatcher.match(&quot;/api/**/auth/**&quot;, path)) {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            List&lt;String&gt; tokenList = request.getHeaders().get(&quot;token&quot;);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            if(null == tokenList) {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                ServerHttpResponse response = exchange.getResponse();</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                return out(response);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            } else {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">//                Boolean isCheck = JwtUtils.checkToken(tokenList.get(0));</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">//                if(!isCheck) {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    ServerHttpResponse response = exchange.getResponse();</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    return out(response);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">//                }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        //内部服务接口，不允许外部访问</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        if(antPathMatcher.match(&quot;/**/inner/**&quot;, path)) {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            ServerHttpResponse response = exchange.getResponse();</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            return out(response);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        return chain.filter(exchange);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    public int getOrder() {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        return 0;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    private Mono&lt;Void&gt; out(ServerHttpResponse response) {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        JsonObject message = new JsonObject();</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        message.addProperty(&quot;success&quot;, false);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        message.addProperty(&quot;code&quot;, 28004);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        message.addProperty(&quot;data&quot;, &quot;鉴权失败&quot;);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        byte[] bits = message.toString().getBytes(StandardCharsets.UTF_8);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        DataBuffer buffer = response.bufferFactory().wrap(bits);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        //response.setStatusCode(HttpStatus.UNAUTHORIZED);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        //指定编码，否则在浏览器中会中文乱码</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        response.getHeaders().add(&quot;Content-Type&quot;, &quot;application/json;charset=UTF-8&quot;);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        return response.writeWith(Mono.just(buffer));</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span></code></pre></div></div>
<h1></h1>
<p><strong>3、自定义异常处理</strong></p>
<p>服务网关调用服务时可能会有一些异常或服务不可用，它返回错误信息不友好，需要我们覆盖处理</p>
<p><img decoding="async" loading="lazy" alt="img" src="data:image/png;base64,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" width="294" height="211" class="img_ev3q"></p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">ErrorHandlerConfig：</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">import org.springframework.beans.factory.ObjectProvider;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">import org.springframework.boot.autoconfigure.web.ResourceProperties;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">import org.springframework.boot.autoconfigure.web.ServerProperties;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">import org.springframework.boot.context.properties.EnableConfigurationProperties;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">import org.springframework.boot.web.reactive.error.ErrorAttributes;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">import org.springframework.boot.web.reactive.error.ErrorWebExceptionHandler;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">import org.springframework.context.ApplicationContext;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">import org.springframework.context.annotation.Bean;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">import org.springframework.context.annotation.Configuration;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">import org.springframework.core.Ordered;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">import org.springframework.core.annotation.Order;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">import org.springframework.http.codec.ServerCodecConfigurer;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">import org.springframework.web.reactive.result.view.ViewResolver;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">import java.util.Collections;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">import java.util.List;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> * 覆盖默认的异常处理</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> *</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">@Configuration</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">@EnableConfigurationProperties({ServerProperties.class, ResourceProperties.class})</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">public class ErrorHandlerConfig {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    private final ServerProperties serverProperties;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    private final ApplicationContext applicationContext;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    private final ResourceProperties resourceProperties;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    private final List&lt;ViewResolver&gt; viewResolvers;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    private final ServerCodecConfigurer serverCodecConfigurer;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    public ErrorHandlerConfig(ServerProperties serverProperties,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                     ResourceProperties resourceProperties,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                     ObjectProvider&lt;List&lt;ViewResolver&gt;&gt; viewResolversProvider,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                        ServerCodecConfigurer serverCodecConfigurer,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                     ApplicationContext applicationContext) {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        this.serverProperties = serverProperties;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        this.applicationContext = applicationContext;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        this.resourceProperties = resourceProperties;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        this.viewResolvers = viewResolversProvider.getIfAvailable(Collections::emptyList);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        this.serverCodecConfigurer = serverCodecConfigurer;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    @Bean</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    @Order(Ordered.HIGHEST_PRECEDENCE)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    public ErrorWebExceptionHandler errorWebExceptionHandler(ErrorAttributes errorAttributes) {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        JsonExceptionHandler exceptionHandler = new JsonExceptionHandler(</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                errorAttributes,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                this.resourceProperties,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                this.serverProperties.getError(),</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                this.applicationContext);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        exceptionHandler.setViewResolvers(this.viewResolvers);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        exceptionHandler.setMessageWriters(this.serverCodecConfigurer.getWriters());</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        exceptionHandler.setMessageReaders(this.serverCodecConfigurer.getReaders());</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        return exceptionHandler;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span></code></pre></div></div>
<p><em><strong>*<code>JsonExceptionHandler：</code>*</strong></em></p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">import org.springframework.boot.autoconfigure.web.ErrorProperties;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">import org.springframework.boot.autoconfigure.web.ResourceProperties;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">import org.springframework.boot.autoconfigure.web.reactive.error.DefaultErrorWebExceptionHandler;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">import org.springframework.boot.web.reactive.error.ErrorAttributes;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">import org.springframework.context.ApplicationContext;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">import org.springframework.http.HttpStatus;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">import org.springframework.web.reactive.function.server.*;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">import java.util.HashMap;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">import java.util.Map;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> * 自定义异常处理</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> *</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> * &lt;p&gt;异常时用JSON代替HTML异常信息&lt;p&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> *</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">public class JsonExceptionHandler extends DefaultErrorWebExceptionHandler {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    public JsonExceptionHandler(ErrorAttributes errorAttributes, ResourceProperties resourceProperties,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                ErrorProperties errorProperties, ApplicationContext applicationContext) {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        super(errorAttributes, resourceProperties, errorProperties, applicationContext);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     * 获取异常属性</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    protected Map&lt;String, Object&gt; getErrorAttributes(ServerRequest request, boolean includeStackTrace) {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        Map&lt;String, Object&gt; map = new HashMap&lt;&gt;();</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        map.put(&quot;success&quot;, false);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        map.put(&quot;code&quot;, 20005);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        map.put(&quot;message&quot;, &quot;网关失败&quot;);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        map.put(&quot;data&quot;, null);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        return map;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     * 指定响应处理方法为JSON处理的方法</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     * @param errorAttributes</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    protected RouterFunction&lt;ServerResponse&gt; getRoutingFunction(ErrorAttributes errorAttributes) {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        return RouterFunctions.route(RequestPredicates.all(), this::renderErrorResponse);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     * 根据code获取对应的HttpStatus</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     * @param errorAttributes</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    protected HttpStatus getHttpStatus(Map&lt;String, Object&gt; errorAttributes) {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        return HttpStatus.OK;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-tags-row"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a rel="tag" class="tag_zVej tagRegular_sFm0" href="/mdviewer/docs/tags/尚硅谷">尚硅谷</a></li></ul></div></div><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/hello-github-ui/mdviewer/edit/master/docs/谷粒学院在线教育项目/day17/01-GATEWAY网关.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/mdviewer/docs/谷粒学院在线教育项目/day16/05-随堂笔记"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">05-随堂笔记</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/mdviewer/docs/谷粒学院在线教育项目/day17/02-权限管理需求描述"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">02-权限管理需求描述</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#yml文件" class="table-of-contents__link toc-highlight">yml文件：</a></li><li><a href="#4编写启动类" class="table-of-contents__link toc-highlight"><strong>4、编写启动类</strong></a></li><li><a href="#二网关相关配置" class="table-of-contents__link toc-highlight">二、网关相关配置</a></li></ul></div></div></div></div></main></div></div></div></div>
</body>
</html>