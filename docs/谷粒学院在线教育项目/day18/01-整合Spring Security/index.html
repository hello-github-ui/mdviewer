<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-谷粒学院在线教育项目/day18/01-整合Spring Security" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.8.1">
<title data-rh="true">01-整合Spring Security | 我的文档站</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://hello-github-ui.github.io/mdviewer/docs/谷粒学院在线教育项目/day18/01-整合Spring Security"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="01-整合Spring Security | 我的文档站"><meta data-rh="true" name="description" content="1、框架介绍"><meta data-rh="true" property="og:description" content="1、框架介绍"><link data-rh="true" rel="icon" href="/mdviewer/system/logo.png"><link data-rh="true" rel="canonical" href="https://hello-github-ui.github.io/mdviewer/docs/谷粒学院在线教育项目/day18/01-整合Spring Security"><link data-rh="true" rel="alternate" href="https://hello-github-ui.github.io/mdviewer/docs/谷粒学院在线教育项目/day18/01-整合Spring Security" hreflang="en"><link data-rh="true" rel="alternate" href="https://hello-github-ui.github.io/mdviewer/docs/谷粒学院在线教育项目/day18/01-整合Spring Security" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://USTSQRVOIC-dsn.algolia.net" crossorigin="anonymous"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"01-整合Spring Security","item":"https://hello-github-ui.github.io/mdviewer/docs/谷粒学院在线教育项目/day18/01-整合Spring Security"}]}</script><link rel="search" type="application/opensearchdescription+xml" title="我的文档站" href="/mdviewer/opensearch.xml"><link rel="stylesheet" href="/mdviewer/assets/css/styles.8ce03ad6.css">
<script src="/mdviewer/assets/js/runtime~main.7c4bc23c.js" defer="defer"></script>
<script src="/mdviewer/assets/js/main.d692e7ff.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t="light";var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",e||t),document.documentElement.setAttribute("data-theme-choice",e||t)}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><a class="navbar__brand" href="/mdviewer/"></a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search (Command+K)"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><button style="position:fixed;top:75px;left:240px;z-index:1000;width:32px;height:32px;background:#fff;border:1px solid #eee;border-radius:50%;cursor:pointer;transition:left 0.3s;color:green" aria-label="收起侧边栏">&lt;</button><div class="sidebar-expanded" style="height:100%"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/mdviewer/docs/AI/AI">AI</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/mdviewer/docs/Docker教程/使用docker-desktop安装AlmaLinux8教程">Docker教程</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/mdviewer/docs/Git教程/Git Tutorial">Git教程</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/mdviewer/docs/Python基础/虚拟环境/01-搭建虚拟环境">Python基础</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/mdviewer/docs/Vue3入门到实战/TypeScript极速梳理">Vue3入门到实战</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/mdviewer/docs/intro">关于本站</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/mdviewer/docs/个人博客/AlmaLinux8安装PostgreSQL">个人博客</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/mdviewer/docs/书签/01-收藏的网站">书签</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/mdviewer/docs/油猴脚本开发教程/51CTO网站解除禁止复制">油猴脚本开发教程</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/mdviewer/docs/谷粒学院在线教育项目/day01/01-在线教育行业介绍">谷粒学院在线教育项目</a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/mdviewer/docs/谷粒学院在线教育项目/day01/01-在线教育行业介绍">day01</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/mdviewer/docs/谷粒学院在线教育项目/day02/01-数据库设计">day02</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/mdviewer/docs/谷粒学院在线教育项目/day03/01-前端开发和前端开发工具">day03</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/mdviewer/docs/谷粒学院在线教育项目/day04/01-NPM包管理器">day04</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/mdviewer/docs/谷粒学院在线教育项目/day05/01-项目中的路由">day05</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/mdviewer/docs/谷粒  学院在线教育项目/day06/01-阿里云存储OSS">day06</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/mdviewer/docs/谷粒学院在线教育项目/day07/01-课程发布表单-步骤导航">day07</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/mdviewer/docs/谷粒学院在线教育项目/day08/01-课程大纲列表显示">day08</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/mdviewer/docs/谷粒学院在线教育项目/day09/01-课程列表的显示">day09</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/mdviewer/docs/谷粒学院在线教育项目/day10/01-SpringCloud相关概念介绍">day10</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/mdviewer/docs/谷粒学院在线教育项目/day11/01-服务端渲染技术NUXT-初始化NUXT">day11</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/mdviewer/docs/谷粒学院在线教育项目/day12/01-登录业务介绍">day12</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/mdviewer/docs/谷粒学院在线教育项目/day13/01-OAuth2的使用场景">day13</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/mdviewer/docs/谷粒学院在线教育项目/day14/01-名师页面静态效果整合">day14</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/mdviewer/docs/谷粒学院在线教育项目/day15/01-课程支付功能需求描述">day15</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/mdviewer/docs/谷粒学院在线教育项目/day16/01-统计分析功能（生成统计数据）">day16</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/mdviewer/docs/谷粒学院在线教育项目/day17/01-GATEWAY网关">day17</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/mdviewer/docs/谷粒学院在线教育项目/day18/01-整合Spring Security">day18</a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/mdviewer/docs/谷粒学院在线教育项目/day18/01-整合Spring Security">01-整合Spring Security</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/mdviewer/docs/谷粒学院在线教育项目/day18/02-创建查询用户类和前端对接">02-创建查询用户类和前端对接</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/mdviewer/docs/谷粒学院在线教育项目/day18/03-Nacos配置中心">03-Nacos配置中心</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/mdviewer/docs/谷粒学院在线教育项目/day18/04-随堂笔记">04-随堂笔记</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/mdviewer/docs/谷粒学院在线教育项目/day18/05-课堂笔记">05-课堂笔记</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/mdviewer/docs/谷粒学院在线教育项目/day19/01-提交代码到远程Git仓库">day19</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/mdviewer/docs/谷粒学院在线教育项目/day20/01-面试总结">day20</a></div></li></ul></li></ul></nav></div></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/mdviewer/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">谷粒学院在线教育项目</span></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">day18</span></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">01-整合Spring Security</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>一、Spring Security介绍</h1></header>
<p><strong>1、框架介绍</strong></p>
<p>Spring 是一个非常流行和成功的 Java 应用开发框架。Spring Security 基于 Spring 框架，提供了一套 Web 应用安全性的完整解决方案。一般来说，Web 应用的安全性包括**用户认证****（<strong><strong>Authentication</strong></strong>）和用户授权（<strong><strong>Authorization</strong></strong>）**两个部分。</p>
<p>（1）用户认证指的是：验证某个用户是否为系统中的合法主体，也就是说用户能否访问该系统。用户认证一般要求用户提供用户名和密码。系统通过校验用户名和密码来完成认证过程。</p>
<p>（2）用户授权指的是验证某个用户是否有权限执行某个操作。在一个系统中，不同用户所具有的权限是不同的。比如对一个文件来说，有的用户只能进行读取，而有的用户可以进行修改。一般来说，系统会为不同的用户分配不同的角色，而每个角色则对应一系列的权限。</p>
<p><strong>Spring Security其实就是用filter，多请求的路径进行过滤。</strong></p>
<p>（1）如果是基于Session，那么Spring-security会对cookie里的sessionid进行解析，找到服务器存储的sesion信息，然后判断当前用户是否符合请求的要求。</p>
<p>（2）如果是token，则是解析出token，然后将当前请求加入到Spring-security管理的权限信息中去</p>
<p><strong>2、认证与授权实现思路</strong></p>
<p>如果系统的模块众多，每个模块都需要就行授权与认证，所以我们选择基于token的形式进行授权与认证，用户根据用户名密码认证成功，然后获取当前用户角色的一系列权限值，并以用户名为key，权限列表为value的形式存入redis缓存中，根据用户名相关信息生成token返回，浏览器将token记录到cookie中，每次调用api接口都默认将token携带到header请求头中，Spring-security解析header头获取token信息，解析token获取当前用户名，根据用户名就可以从redis中获取权限列表，这样Spring-security就能够判断当前请求是否有权限访问</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="二整合spring-security">二、整合Spring Security<a href="#二整合spring-security" class="hash-link" aria-label="Direct link to 二、整合Spring Security" title="Direct link to 二、整合Spring Security">​</a></h2>
<p><strong>1、在common下创建spring_security模块</strong></p>
<p><img decoding="async" loading="lazy" alt="img" src="data:image/png;base64,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" width="282" height="150" class="img_ev3q"></p>
<p><strong>2、在spring_security引入相关依赖</strong></p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;dependencies&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &lt;dependency&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &lt;groupId&gt;com.atguigu&lt;/groupId&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &lt;artifactId&gt;common_utils&lt;/artifactId&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &lt;/dependency&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &lt;!-- Spring Security依赖 --&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &lt;dependency&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &lt;/dependency&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &lt;dependency&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &lt;groupId&gt;io.jsonwebtoken&lt;/groupId&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &lt;artifactId&gt;jjwt&lt;/artifactId&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &lt;/dependency&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;/dependencies&gt;</span><br></span></code></pre></div></div>
<p><strong>3、在service_acl引入*<em>spring_security*</em>依赖</strong></p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;dependency&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &lt;groupId&gt;com.atguigu&lt;/groupId&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &lt;artifactId&gt;spring_security&lt;/artifactId&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;/dependency&gt;</span><br></span></code></pre></div></div>
<p><strong>0、代码结构说明：</strong></p>
<p><img decoding="async" loading="lazy" alt="img" src="/mdviewer/assets/images/6aafe337-8a5d-440c-b93d-ff60d4f9cef6-33afeaeeccb32a8011a5d2f2dc4c7a03.png" width="654" height="383" class="img_ev3q"></p>
<p><strong>4、创建spring security核心配置类</strong></p>
<p><img decoding="async" loading="lazy" alt="img" src="data:image/png;base64,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" width="384" height="149" class="img_ev3q"></p>
<p>Spring Security的核心配置就是继承WebSecurityConfigurerAdapter并注解@EnableWebSecurity的配置。</p>
<p>这个配置指明了用户名密码的处理方式、请求路径的开合、登录登出控制等和安全相关的配置</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">import com.atguigu.serurity.filter.TokenAuthenticationFilter;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">import com.atguigu.serurity.filter.TokenLoginFilter;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">import com.atguigu.serurity.security.DefaultPasswordEncoder;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">import com.atguigu.serurity.security.TokenLogoutHandler;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">import com.atguigu.serurity.security.TokenManager;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">import com.atguigu.serurity.security.UnauthorizedEntryPoint;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">import org.springframework.beans.factory.annotation.Autowired;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">import org.springframework.context.annotation.Configuration;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">import org.springframework.data.redis.core.RedisTemplate;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">import org.springframework.security.config.annotation.authentication.builders.AuthenticationManagerBuilder;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">import org.springframework.security.config.annotation.method.configuration.EnableGlobalMethodSecurity;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">import org.springframework.security.config.annotation.web.builders.HttpSecurity;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">import org.springframework.security.config.annotation.web.builders.WebSecurity;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">import org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">import org.springframework.security.config.annotation.web.configuration.WebSecurityConfigurerAdapter;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">import org.springframework.security.core.userdetails.UserDetailsService;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> * &lt;p&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> * Security配置类</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> * &lt;/p&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">@Configuration</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">@EnableWebSecurity</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">@EnableGlobalMethodSecurity(prePostEnabled = true)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">public class TokenWebSecurityConfig extends WebSecurityConfigurerAdapter {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    private UserDetailsService userDetailsService;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    private TokenManager tokenManager;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    private DefaultPasswordEncoder defaultPasswordEncoder;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    private RedisTemplate redisTemplate;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    @Autowired</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    public TokenWebSecurityConfig(UserDetailsService userDetailsService, DefaultPasswordEncoder defaultPasswordEncoder,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                  TokenManager tokenManager, RedisTemplate redisTemplate) {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        this.userDetailsService = userDetailsService;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        this.defaultPasswordEncoder = defaultPasswordEncoder;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        this.tokenManager = tokenManager;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        this.redisTemplate = redisTemplate;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     * 配置设置</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     * @param http</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     * @throws Exception</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    protected void configure(HttpSecurity http) throws Exception {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        http.exceptionHandling()</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                .authenticationEntryPoint(new UnauthorizedEntryPoint())</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                .and().csrf().disable()</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                .authorizeRequests()</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                .anyRequest().authenticated()</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                .and().logout().logoutUrl(&quot;/admin/acl/index/logout&quot;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                .addLogoutHandler(new TokenLogoutHandler(tokenManager,redisTemplate)).and()</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                .addFilter(new TokenLoginFilter(authenticationManager(), tokenManager, redisTemplate))</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                .addFilter(new TokenAuthenticationFilter(authenticationManager(), tokenManager, redisTemplate)).httpBasic();</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     * 密码处理</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     * @param auth</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     * @throws Exception</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    public void configure(AuthenticationManagerBuilder auth) throws Exception {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        auth.userDetailsService(userDetailsService).passwordEncoder(defaultPasswordEncoder);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     * 配置哪些请求不拦截</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     * @param web</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     * @throws Exception</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    public void configure(WebSecurity web) throws Exception {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        web.ignoring().antMatchers(&quot;/api/**&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                &quot;/swagger-resources/**&quot;, &quot;/webjars/**&quot;, &quot;/v2/**&quot;, &quot;/swagger-ui.html/**&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">               );</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre></div></div>
<p><strong>5、创建认证授权相关的工具类</strong></p>
<p><img decoding="async" loading="lazy" alt="img" src="data:image/png;base64,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" width="374" height="275" class="img_ev3q"></p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">（1）DefaultPasswordEncoder：密码处理的方法</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">package com.atguigu.serurity.security;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">import com.atguigu.commonutils.utils.MD5;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">import org.springframework.security.crypto.password.PasswordEncoder;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">import org.springframework.stereotype.Component;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> * &lt;p&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> * 密码的处理方法类型</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> * &lt;/p&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">@Component</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">public class DefaultPasswordEncoder implements PasswordEncoder {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    public DefaultPasswordEncoder() {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        this(-1);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     * @param strength</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     *            the log rounds to use, between 4 and 31</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    public DefaultPasswordEncoder(int strength) {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    public String encode(CharSequence rawPassword) {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        return MD5.encrypt(rawPassword.toString());</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    public boolean matches(CharSequence rawPassword, String encodedPassword) {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        return encodedPassword.equals(MD5.encrypt(rawPassword.toString()));</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre></div></div>
<p><strong>（2）</strong></p>
<p><strong><code>TokenManager：token操作的工具类</code></strong></p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">import io.jsonwebtoken.CompressionCodecs;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">import io.jsonwebtoken.Jwts;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">import io.jsonwebtoken.SignatureAlgorithm;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">import org.springframework.stereotype.Component;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">import java.util.Date;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> * &lt;p&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> * token管理</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> * &lt;/p&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">@Component</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">public class TokenManager {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    private long tokenExpiration = 24*60*60*1000;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    private String tokenSignKey = &quot;123456&quot;;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    public String createToken(String username) {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        String token = Jwts.builder().setSubject(username)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                .setExpiration(new Date(System.currentTimeMillis() + tokenExpiration))</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                .signWith(SignatureAlgorithm.HS512, tokenSignKey).compressWith(CompressionCodecs.GZIP).compact();</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        return token;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    public String getUserFromToken(String token) {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        String user = Jwts.parser().setSigningKey(tokenSignKey).parseClaimsJws(token).getBody().getSubject();</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        return user;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    public void removeToken(String token) {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        //jwttoken无需删除，客户端扔掉即可。</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre></div></div>
<p><strong>（3）</strong></p>
<p><strong><code>TokenLogoutHandler：退出实现</code></strong></p>
<p>**
**</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">import com.atguigu.commonutils.R;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">import com.atguigu.commonutils.utils.ResponseUtil;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">import org.springframework.data.redis.core.RedisTemplate;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">import org.springframework.security.core.Authentication;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">import org.springframework.security.web.authentication.logout.LogoutHandler;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">import javax.servlet.http.HttpServletRequest;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">import javax.servlet.http.HttpServletResponse;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> * &lt;p&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> * 登出业务逻辑类</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> * &lt;/p&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">public class TokenLogoutHandler implements LogoutHandler {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    private TokenManager tokenManager;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    private RedisTemplate redisTemplate;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    public TokenLogoutHandler(TokenManager tokenManager, RedisTemplate redisTemplate) {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        this.tokenManager = tokenManager;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        this.redisTemplate = redisTemplate;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    public void logout(HttpServletRequest request, HttpServletResponse response, Authentication authentication) {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        String token = request.getHeader(&quot;token&quot;);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        if (token != null) {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            tokenManager.removeToken(token);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            //清空当前用户缓存中的权限数据</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            String userName = tokenManager.getUserFromToken(token);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            redisTemplate.delete(userName);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        ResponseUtil.out(response, R.ok());</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre></div></div>
<p>（4）</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">UnauthorizedEntryPoint：未授权统一处理</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">import com.atguigu.commonutils.R;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">import com.atguigu.commonutils.utils.ResponseUtil;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">import org.springframework.security.core.AuthenticationException;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">import org.springframework.security.web.AuthenticationEntryPoint;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">import javax.servlet.ServletException;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">import javax.servlet.http.HttpServletRequest;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">import javax.servlet.http.HttpServletResponse;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">import java.io.IOException;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> * &lt;p&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> * 未授权的统一处理方式</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> * &lt;/p&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">public class UnauthorizedEntryPoint implements AuthenticationEntryPoint {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    public void commence(HttpServletRequest request, HttpServletResponse response,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                         AuthenticationException authException) throws IOException, ServletException {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        ResponseUtil.out(response, R.error());</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre></div></div>
<p><strong>6、创建认证授权实体类</strong></p>
<p><img decoding="async" loading="lazy" alt="img" src="data:image/png;base64,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" width="319" height="184" class="img_ev3q"></p>
<p>（1）SecutityUser</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">import lombok.Data;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">import lombok.extern.slf4j.Slf4j;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">import org.springframework.security.core.GrantedAuthority;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">import org.springframework.security.core.authority.SimpleGrantedAuthority;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">import org.springframework.security.core.userdetails.UserDetails;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">import org.springframework.util.StringUtils;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">import java.util.ArrayList;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">import java.util.Collection;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">import java.util.List;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> * &lt;p&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> * 安全认证用户详情信息</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> * &lt;/p&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">@Data</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">@Slf4j</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">public class SecurityUser implements UserDetails {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    //当前登录用户</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    private transient User currentUserInfo;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    //当前权限</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    private List&lt;String&gt; permissionValueList;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    public SecurityUser() {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    public SecurityUser(User user) {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        if (user != null) {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            this.currentUserInfo = user;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    public Collection&lt;? extends GrantedAuthority&gt; getAuthorities() {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        Collection&lt;GrantedAuthority&gt; authorities = new ArrayList&lt;&gt;();</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        for(String permissionValue : permissionValueList) {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            if(StringUtils.isEmpty(permissionValue)) continue;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            SimpleGrantedAuthority authority = new SimpleGrantedAuthority(permissionValue);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            authorities.add(authority);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        return authorities;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    public String getPassword() {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        return currentUserInfo.getPassword();</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    public String getUsername() {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        return currentUserInfo.getUsername();</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    public boolean isAccountNonExpired() {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        return true;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    public boolean isAccountNonLocked() {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        return true;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    public boolean isCredentialsNonExpired() {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        return true;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    public boolean isEnabled() {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        return true;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre></div></div>
<p><strong>（2）User</strong></p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">import io.swagger.annotations.ApiModel;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">import io.swagger.annotations.ApiModelProperty;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">import lombok.Data;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">import java.io.Serializable;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> * &lt;p&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> * 用户实体类</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> * &lt;/p&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">@Data</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">@ApiModel(description = &quot;用户实体类&quot;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">public class User implements Serializable {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    private static final long serialVersionUID = 1L;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    @ApiModelProperty(value = &quot;微信openid&quot;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    private String username;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    @ApiModelProperty(value = &quot;密码&quot;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    private String password;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    @ApiModelProperty(value = &quot;昵称&quot;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    private String nickName;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    @ApiModelProperty(value = &quot;用户头像&quot;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    private String salt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    @ApiModelProperty(value = &quot;用户签名&quot;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    private String token;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre></div></div>
<p><strong>7、创建认证和授权的filter</strong></p>
<p><img decoding="async" loading="lazy" alt="img" src="data:image/png;base64,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" width="398" height="213" class="img_ev3q"></p>
<p>（1）TokenLoginFilter：认证的filter</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">import com.atguigu.commonutils.R;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">import com.atguigu.commonutils.utils.ResponseUtil;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">import com.atguigu.serurity.entity.SecurityUser;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">import com.atguigu.serurity.entity.User;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">import com.atguigu.serurity.security.TokenManager;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">import com.fasterxml.jackson.databind.ObjectMapper;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">import org.springframework.data.redis.core.RedisTemplate;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">import org.springframework.security.authentication.AuthenticationManager;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">import org.springframework.security.authentication.UsernamePasswordAuthenticationToken;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">import org.springframework.security.core.Authentication;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">import org.springframework.security.core.AuthenticationException;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">import org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">import org.springframework.security.web.util.matcher.AntPathRequestMatcher;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">import javax.servlet.FilterChain;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">import javax.servlet.ServletException;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">import javax.servlet.http.HttpServletRequest;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">import javax.servlet.http.HttpServletResponse;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">import java.io.IOException;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">import java.util.ArrayList;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> * &lt;p&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> * 登录过滤器，继承UsernamePasswordAuthenticationFilter，对用户名密码进行登录校验</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> * &lt;/p&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">public class TokenLoginFilter extends UsernamePasswordAuthenticationFilter {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    private AuthenticationManager authenticationManager;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    private TokenManager tokenManager;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    private RedisTemplate redisTemplate;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    public TokenLoginFilter(AuthenticationManager authenticationManager, TokenManager tokenManager, RedisTemplate redisTemplate) {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        this.authenticationManager = authenticationManager;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        this.tokenManager = tokenManager;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        this.redisTemplate = redisTemplate;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        this.setPostOnly(false);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        this.setRequiresAuthenticationRequestMatcher(new AntPathRequestMatcher(&quot;/admin/acl/login&quot;,&quot;POST&quot;));</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    public Authentication attemptAuthentication(HttpServletRequest req, HttpServletResponse res)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            throws AuthenticationException {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        try {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            User user = new ObjectMapper().readValue(req.getInputStream(), User.class);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            return authenticationManager.authenticate(new UsernamePasswordAuthenticationToken(user.getUsername(), user.getPassword(), new ArrayList&lt;&gt;()));</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        } catch (IOException e) {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            throw new RuntimeException(e);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     * 登录成功</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     * @param req</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     * @param res</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     * @param chain</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     * @param auth</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     * @throws IOException</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     * @throws ServletException</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    protected void successfulAuthentication(HttpServletRequest req, HttpServletResponse res, FilterChain chain,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                            Authentication auth) throws IOException, ServletException {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        SecurityUser user = (SecurityUser) auth.getPrincipal();</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        String token = tokenManager.createToken(user.getCurrentUserInfo().getUsername());</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        redisTemplate.opsForValue().set(user.getCurrentUserInfo().getUsername(), user.getPermissionValueList());</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        ResponseUtil.out(res, R.ok().data(&quot;token&quot;, token));</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     * 登录失败</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     * @param request</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     * @param response</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     * @param e</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     * @throws IOException</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     * @throws ServletException</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    protected void unsuccessfulAuthentication(HttpServletRequest request, HttpServletResponse response,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                              AuthenticationException e) throws IOException, ServletException {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        ResponseUtil.out(response, R.error());</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre></div></div>
<p><strong><em>*</em>*******************************<code>（2）TokenAuthenticationFilter：</code>*********************************</strong>*</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">授权filter</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">package com.atguigu.serurity.filter;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">import com.atguigu.commonutils.R;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">import com.atguigu.commonutils.utils.ResponseUtil;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">import com.atguigu.serurity.security.TokenManager;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">import org.springframework.data.redis.core.RedisTemplate;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">import org.springframework.security.authentication.AuthenticationManager;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">import org.springframework.security.authentication.UsernamePasswordAuthenticationToken;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">import org.springframework.security.core.GrantedAuthority;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">import org.springframework.security.core.authority.SimpleGrantedAuthority;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">import org.springframework.security.core.context.SecurityContextHolder;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">import org.springframework.security.web.authentication.www.BasicAuthenticationFilter;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">import org.springframework.util.StringUtils;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">import javax.servlet.FilterChain;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">import javax.servlet.ServletException;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">import javax.servlet.http.HttpServletRequest;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">import javax.servlet.http.HttpServletResponse;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">import java.io.IOException;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">import java.util.ArrayList;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">import java.util.Collection;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">import java.util.List;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> * &lt;p&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> * 访问过滤器</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> * &lt;/p&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">public class TokenAuthenticationFilter extends BasicAuthenticationFilter {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    private TokenManager tokenManager;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    private RedisTemplate redisTemplate;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    public TokenAuthenticationFilter(AuthenticationManager authManager, TokenManager tokenManager,RedisTemplate redisTemplate) {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        super(authManager);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        this.tokenManager = tokenManager;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        this.redisTemplate = redisTemplate;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    protected void doFilterInternal(HttpServletRequest req, HttpServletResponse res, FilterChain chain)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            throws IOException, ServletException {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        logger.info(&quot;=================&quot;+req.getRequestURI());</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        if(req.getRequestURI().indexOf(&quot;admin&quot;) == -1) {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            chain.doFilter(req, res);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            return;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        UsernamePasswordAuthenticationToken authentication = null;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        try {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            authentication = getAuthentication(req);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        } catch (Exception e) {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            ResponseUtil.out(res, R.error());</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        if (authentication != null) {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            SecurityContextHolder.getContext().setAuthentication(authentication);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        } else {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            ResponseUtil.out(res, R.error());</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        chain.doFilter(req, res);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    private UsernamePasswordAuthenticationToken getAuthentication(HttpServletRequest request) {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        // token置于header里</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        String token = request.getHeader(&quot;token&quot;);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        if (token != null &amp;&amp; !&quot;&quot;.equals(token.trim())) {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            String userName = tokenManager.getUserFromToken(token);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            List&lt;String&gt; permissionValueList = (List&lt;String&gt;) redisTemplate.opsForValue().get(userName);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            Collection&lt;GrantedAuthority&gt; authorities = new ArrayList&lt;&gt;();</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            for(String permissionValue : permissionValueList) {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                if(StringUtils.isEmpty(permissionValue)) continue;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                SimpleGrantedAuthority authority = new SimpleGrantedAuthority(permissionValue);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                authorities.add(authority);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            if (!StringUtils.isEmpty(userName)) {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                return new UsernamePasswordAuthenticationToken(userName, token, authorities);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            return null;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        return null;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-tags-row"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a rel="tag" class="tag_zVej tagRegular_sFm0" href="/mdviewer/docs/tags/尚硅谷">尚硅谷</a></li></ul></div></div><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/hello-github-ui/mdviewer/edit/master/docs/谷粒学院在线教育项目/day18/01-整合Spring Security.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/mdviewer/docs/谷粒学院在线教育项目/day17/04-随堂笔记"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">04-随堂笔记</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/mdviewer/docs/谷粒学院在线教育项目/day18/02-创建查询用户类和前端对接"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">02-创建查询用户类和前端对接</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#二整合spring-security" class="table-of-contents__link toc-highlight">二、整合Spring Security</a></li></ul></div></div></div></div></main></div></div></div></div>
</body>
</html>