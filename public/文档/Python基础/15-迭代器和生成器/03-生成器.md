生成器（Generator）是 Python 中一种非常有用的工具，用于简化迭代器的创建，并提高内存使用效率。下面将从多个角度介绍生成器的概念和使用方法。

## 1. 什么是生成器？

生成器是一种特殊的 `迭代器`，它允许你在函数执行过程中 “暂停”，并在下一次调用时继续执行。与传统的函数不同，生成器使用 `yield` 关键字返回数据，每次调用 `next()` 时从上次 `yield` 的地方恢复执行。这种 `惰性求值` 机制使得生成器在处理大量数据时非常高效，因为它不需要一次性将所有数据加载到内存中。

## 2. 如何定义生成器？

有两种常见的方式可以定义生成器：

### 2.1 使用生成器函数

生成器函数类似于普通函数，但它使用 `yield` 关键字返回数据。每次执行到 `yield` 时，函数会暂停，并保存当前状态，等待下一次调用。

示例：

```python
def simple_generator():
    print("生成器开始执行")
    yield 1
    print("生成器继续执行")
    yield 2
    print("生成器结束")
    yield 3

# 使用生成器
gen = simple_generator()
print(next(gen))  # 输出：生成器开始执行 \n 1
print(next(gen))  # 输出：生成器继续执行 \n 2
print(next(gen))  # 输出：生成器结束 \n 3
```

在这个例子中，`simple_generator` 每次遇到 `yield` 返回一个值，并暂停执行，等待下一次调用 `next()`。

### 2.2 使用生成器表达式

生成器表达式的语法与列表推导式类似，但它返回的是生成器对象而不是整个列表，从而避免一次性创建所有数据。

示例：

```python
# 生成器表达式
gen_exp = (x * x for x in range(5))

# 遍历生成器表达式
for num in gen_exp:
    print(num)
```

该表达式会逐步计算 `x * x`，而不是将所有值都保存到列表中。

ps：需要补充下 `列表推导式` 的相关内容。



## 3. 生成器的优点

- 内存友好：生成器按需生成数据，不会一次性将所有数据加载到内存中，非常适合处理大数据量。
- 简洁性：使用生成器可以让代码更简洁，尤其是在需要编写复杂的迭代逻辑时。
- 无限序列：生成器可以创建无限序列，比如斐波那契数列，通过 `yield` 可以无限输出下一个值而不会耗尽内存。

## 4. 使用生成器的注意事项

- 状态保存：生成器在暂停时会保存局部变量的状态，